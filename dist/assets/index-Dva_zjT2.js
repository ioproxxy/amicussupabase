function Z0(n,e){for(var i=0;i<e.length;i++){const o=e[i];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in n)){const a=Object.getOwnPropertyDescriptor(o,l);a&&Object.defineProperty(n,l,a.get?a:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=i(l);fetch(l.href,a)}})();function Dc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function W0(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var i=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var l=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(i,o,l.get?l:{enumerable:!0,get:function(){return n[o]}})}),i}var Yu={exports:{}},Ro={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp;function j0(){if(jp)return Ro;jp=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var h in l)h!=="key"&&(a[h]=l[h])}else a=l;return l=a.ref,{$$typeof:n,type:o,key:c,ref:l!==void 0?l:null,props:a}}return Ro.Fragment=e,Ro.jsx=i,Ro.jsxs=i,Ro}var em;function eT(){return em||(em=1,Yu.exports=j0()),Yu.exports}var B=eT(),Ku={exports:{}},ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function tT(){if(tm)return ae;tm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,M={};function P(N,F,Q){this.props=N,this.context=F,this.refs=M,this.updater=Q||C}P.prototype.isReactComponent={},P.prototype.setState=function(N,F){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,F,"setState")},P.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function O(){}O.prototype=P.prototype;function x(N,F,Q){this.props=N,this.context=F,this.refs=M,this.updater=Q||C}var z=x.prototype=new O;z.constructor=x,b(z,P.prototype),z.isPureReactComponent=!0;var Y=Array.isArray;function $(){}var J={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function Z(N,F,Q){var j=Q.ref;return{$$typeof:n,type:N,key:F,ref:j!==void 0?j:null,props:Q}}function he(N,F){return Z(N.type,F,N.props)}function Te(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function fe(N){var F={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Q){return F[Q]})}var Se=/\/+/g;function ct(N,F){return typeof N=="object"&&N!==null&&N.key!=null?fe(""+N.key):F.toString(36)}function et(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then($,$):(N.status="pending",N.then(function(F){N.status==="pending"&&(N.status="fulfilled",N.value=F)},function(F){N.status==="pending"&&(N.status="rejected",N.reason=F)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function q(N,F,Q,j,ue){var pe=typeof N;(pe==="undefined"||pe==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(pe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case n:case e:be=!0;break;case v:return be=N._init,q(be(N._payload),F,Q,j,ue)}}if(be)return ue=ue(N),be=j===""?"."+ct(N,0):j,Y(ue)?(Q="",be!=null&&(Q=be.replace(Se,"$&/")+"/"),q(ue,F,Q,"",function(Us){return Us})):ue!=null&&(Te(ue)&&(ue=he(ue,Q+(ue.key==null||N&&N.key===ue.key?"":(""+ue.key).replace(Se,"$&/")+"/")+be)),F.push(ue)),1;be=0;var pt=j===""?".":j+":";if(Y(N))for(var Fe=0;Fe<N.length;Fe++)j=N[Fe],pe=pt+ct(j,Fe),be+=q(j,F,Q,pe,ue);else if(Fe=A(N),typeof Fe=="function")for(N=Fe.call(N),Fe=0;!(j=N.next()).done;)j=j.value,pe=pt+ct(j,Fe++),be+=q(j,F,Q,pe,ue);else if(pe==="object"){if(typeof N.then=="function")return q(et(N),F,Q,j,ue);throw F=String(N),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return be}function K(N,F,Q){if(N==null)return N;var j=[],ue=0;return q(N,j,"","",function(pe){return F.call(Q,pe,ue++)}),j}function ie(N){if(N._status===-1){var F=N._result;F=F(),F.then(function(Q){(N._status===0||N._status===-1)&&(N._status=1,N._result=Q)},function(Q){(N._status===0||N._status===-1)&&(N._status=2,N._result=Q)}),N._status===-1&&(N._status=0,N._result=F)}if(N._status===1)return N._result.default;throw N._result}var Me=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Ue={map:K,forEach:function(N,F,Q){K(N,function(){F.apply(this,arguments)},Q)},count:function(N){var F=0;return K(N,function(){F++}),F},toArray:function(N){return K(N,function(F){return F})||[]},only:function(N){if(!Te(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return ae.Activity=_,ae.Children=Ue,ae.Component=P,ae.Fragment=i,ae.Profiler=l,ae.PureComponent=x,ae.StrictMode=o,ae.Suspense=g,ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,ae.__COMPILER_RUNTIME={__proto__:null,c:function(N){return J.H.useMemoCache(N)}},ae.cache=function(N){return function(){return N.apply(null,arguments)}},ae.cacheSignal=function(){return null},ae.cloneElement=function(N,F,Q){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var j=b({},N.props),ue=N.key;if(F!=null)for(pe in F.key!==void 0&&(ue=""+F.key),F)!re.call(F,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&F.ref===void 0||(j[pe]=F[pe]);var pe=arguments.length-2;if(pe===1)j.children=Q;else if(1<pe){for(var be=Array(pe),pt=0;pt<pe;pt++)be[pt]=arguments[pt+2];j.children=be}return Z(N.type,ue,j)},ae.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},ae.createElement=function(N,F,Q){var j,ue={},pe=null;if(F!=null)for(j in F.key!==void 0&&(pe=""+F.key),F)re.call(F,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(ue[j]=F[j]);var be=arguments.length-2;if(be===1)ue.children=Q;else if(1<be){for(var pt=Array(be),Fe=0;Fe<be;Fe++)pt[Fe]=arguments[Fe+2];ue.children=pt}if(N&&N.defaultProps)for(j in be=N.defaultProps,be)ue[j]===void 0&&(ue[j]=be[j]);return Z(N,pe,ue)},ae.createRef=function(){return{current:null}},ae.forwardRef=function(N){return{$$typeof:h,render:N}},ae.isValidElement=Te,ae.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:ie}},ae.memo=function(N,F){return{$$typeof:m,type:N,compare:F===void 0?null:F}},ae.startTransition=function(N){var F=J.T,Q={};J.T=Q;try{var j=N(),ue=J.S;ue!==null&&ue(Q,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then($,Me)}catch(pe){Me(pe)}finally{F!==null&&Q.types!==null&&(F.types=Q.types),J.T=F}},ae.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},ae.use=function(N){return J.H.use(N)},ae.useActionState=function(N,F,Q){return J.H.useActionState(N,F,Q)},ae.useCallback=function(N,F){return J.H.useCallback(N,F)},ae.useContext=function(N){return J.H.useContext(N)},ae.useDebugValue=function(){},ae.useDeferredValue=function(N,F){return J.H.useDeferredValue(N,F)},ae.useEffect=function(N,F){return J.H.useEffect(N,F)},ae.useEffectEvent=function(N){return J.H.useEffectEvent(N)},ae.useId=function(){return J.H.useId()},ae.useImperativeHandle=function(N,F,Q){return J.H.useImperativeHandle(N,F,Q)},ae.useInsertionEffect=function(N,F){return J.H.useInsertionEffect(N,F)},ae.useLayoutEffect=function(N,F){return J.H.useLayoutEffect(N,F)},ae.useMemo=function(N,F){return J.H.useMemo(N,F)},ae.useOptimistic=function(N,F){return J.H.useOptimistic(N,F)},ae.useReducer=function(N,F,Q){return J.H.useReducer(N,F,Q)},ae.useRef=function(N){return J.H.useRef(N)},ae.useState=function(N){return J.H.useState(N)},ae.useSyncExternalStore=function(N,F,Q){return J.H.useSyncExternalStore(N,F,Q)},ae.useTransition=function(){return J.H.useTransition()},ae.version="19.2.0",ae}var nm;function Uc(){return nm||(nm=1,Ku.exports=tT()),Ku.exports}var Pe=Uc();const nT=Dc(Pe);var Qu={exports:{}},No={},Xu={exports:{}},Zu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function iT(){return im||(im=1,(function(n){function e(q,K){var ie=q.length;q.push(K);e:for(;0<ie;){var Me=ie-1>>>1,Ue=q[Me];if(0<l(Ue,K))q[Me]=K,q[ie]=Ue,ie=Me;else break e}}function i(q){return q.length===0?null:q[0]}function o(q){if(q.length===0)return null;var K=q[0],ie=q.pop();if(ie!==K){q[0]=ie;e:for(var Me=0,Ue=q.length,N=Ue>>>1;Me<N;){var F=2*(Me+1)-1,Q=q[F],j=F+1,ue=q[j];if(0>l(Q,ie))j<Ue&&0>l(ue,Q)?(q[Me]=ue,q[j]=ie,Me=j):(q[Me]=Q,q[F]=ie,Me=F);else if(j<Ue&&0>l(ue,ie))q[Me]=ue,q[j]=ie,Me=j;else break e}}return K}function l(q,K){var ie=q.sortIndex-K.sortIndex;return ie!==0?ie:q.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var g=[],m=[],v=1,_=null,S=3,A=!1,C=!1,b=!1,M=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function z(q){for(var K=i(m);K!==null;){if(K.callback===null)o(m);else if(K.startTime<=q)o(m),K.sortIndex=K.expirationTime,e(g,K);else break;K=i(m)}}function Y(q){if(b=!1,z(q),!C)if(i(g)!==null)C=!0,$||($=!0,fe());else{var K=i(m);K!==null&&et(Y,K.startTime-q)}}var $=!1,J=-1,re=5,Z=-1;function he(){return M?!0:!(n.unstable_now()-Z<re)}function Te(){if(M=!1,$){var q=n.unstable_now();Z=q;var K=!0;try{e:{C=!1,b&&(b=!1,O(J),J=-1),A=!0;var ie=S;try{t:{for(z(q),_=i(g);_!==null&&!(_.expirationTime>q&&he());){var Me=_.callback;if(typeof Me=="function"){_.callback=null,S=_.priorityLevel;var Ue=Me(_.expirationTime<=q);if(q=n.unstable_now(),typeof Ue=="function"){_.callback=Ue,z(q),K=!0;break t}_===i(g)&&o(g),z(q)}else o(g);_=i(g)}if(_!==null)K=!0;else{var N=i(m);N!==null&&et(Y,N.startTime-q),K=!1}}break e}finally{_=null,S=ie,A=!1}K=void 0}}finally{K?fe():$=!1}}}var fe;if(typeof x=="function")fe=function(){x(Te)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,ct=Se.port2;Se.port1.onmessage=Te,fe=function(){ct.postMessage(null)}}else fe=function(){P(Te,0)};function et(q,K){J=P(function(){q(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(q){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var ie=S;S=K;try{return q()}finally{S=ie}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=S;S=q;try{return K()}finally{S=ie}},n.unstable_scheduleCallback=function(q,K,ie){var Me=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Me+ie:Me):ie=Me,q){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ie+Ue,q={id:v++,callback:K,priorityLevel:q,startTime:ie,expirationTime:Ue,sortIndex:-1},ie>Me?(q.sortIndex=ie,e(m,q),i(g)===null&&q===i(m)&&(b?(O(J),J=-1):b=!0,et(Y,ie-Me))):(q.sortIndex=Ue,e(g,q),C||A||(C=!0,$||($=!0,fe()))),q},n.unstable_shouldYield=he,n.unstable_wrapCallback=function(q){var K=S;return function(){var ie=S;S=K;try{return q.apply(this,arguments)}finally{S=ie}}}})(Zu)),Zu}var sm;function sT(){return sm||(sm=1,Xu.exports=iT()),Xu.exports}var Wu={exports:{}},dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function oT(){if(om)return dt;om=1;var n=Uc();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(g,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:_==null?null:""+_,children:g,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,dt.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(g,m,null,v)},dt.flushSync=function(g){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,g)return g()}finally{c.T=m,o.p=v,o.d.f()}},dt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},dt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},dt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:A}):v==="script"&&o.d.X(g,{crossOrigin:_,integrity:S,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},dt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},dt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);o.d.L(g,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},dt.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=h(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},dt.requestFormReset=function(g){o.d.r(g)},dt.unstable_batchedUpdates=function(g,m){return g(m)},dt.useFormState=function(g,m,v){return c.H.useFormState(g,m,v)},dt.useFormStatus=function(){return c.H.useHostTransitionStatus()},dt.version="19.2.0",dt}var rm;function rT(){if(rm)return Wu.exports;rm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wu.exports=oT(),Wu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function lT(){if(lm)return No;lm=1;var n=sT(),e=Uc(),i=rT();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function a(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function c(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(a(t)!==t)throw Error(o(188))}function m(t){var s=t.alternate;if(!s){if(s=a(t),s===null)throw Error(o(188));return s!==t?null:t}for(var r=t,u=s;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return g(p),t;if(y===u)return g(p),s;y=y.sibling}throw Error(o(188))}if(r.return!==u.return)r=p,u=y;else{for(var T=!1,E=p.child;E;){if(E===r){T=!0,r=p,u=y;break}if(E===u){T=!0,u=p,r=y;break}E=E.sibling}if(!T){for(E=y.child;E;){if(E===r){T=!0,r=y,u=p;break}if(E===u){T=!0,u=y,r=p;break}E=E.sibling}if(!T)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),x=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=Te&&t[Te]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Symbol.for("react.client.reference");function ct(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case b:return"Fragment";case P:return"Profiler";case M:return"StrictMode";case Y:return"Suspense";case $:return"SuspenseList";case Z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case x:return t.displayName||"Context";case O:return(t._context.displayName||"Context")+".Consumer";case z:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return s=t.displayName||null,s!==null?s:ct(t.type)||"Memo";case re:s=t._payload,t=t._init;try{return ct(t(s))}catch{}}return null}var et=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Me=[],Ue=-1;function N(t){return{current:t}}function F(t){0>Ue||(t.current=Me[Ue],Me[Ue]=null,Ue--)}function Q(t,s){Ue++,Me[Ue]=t.current,t.current=s}var j=N(null),ue=N(null),pe=N(null),be=N(null);function pt(t,s){switch(Q(pe,s),Q(ue,t),Q(j,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Ep(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Ep(s),t=Ap(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}F(j),Q(j,t)}function Fe(){F(j),F(ue),F(pe)}function Us(t){t.memoizedState!==null&&Q(be,t);var s=j.current,r=Ap(s,t.type);s!==r&&(Q(ue,t),Q(j,r))}function Bo(t){ue.current===t&&(F(j),F(ue)),be.current===t&&(F(be),Ao._currentValue=ie)}var Ml,Zc;function ii(t){if(Ml===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Ml=s&&s[1]||"",Zc=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ml+t+Zc}var Il=!1;function xl(t,s){if(!t||Il)return"";Il=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(L){var k=L}Reflect.construct(t,[],V)}else{try{V.call()}catch(L){k=L}t.call(V.prototype)}}else{try{throw Error()}catch(L){k=L}(V=t())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(L){if(L&&k&&typeof L.stack=="string")return[L.stack,k.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],E=y[1];if(T&&E){var w=T.split(`
`),U=E.split(`
`);for(p=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(u===w.length||p===U.length)for(u=w.length-1,p=U.length-1;1<=u&&0<=p&&w[u]!==U[p];)p--;for(;1<=u&&0<=p;u--,p--)if(w[u]!==U[p]){if(u!==1||p!==1)do if(u--,p--,0>p||w[u]!==U[p]){var G=`
`+w[u].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=u&&0<=p);break}}}finally{Il=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ii(r):""}function Nv(t,s){switch(t.tag){case 26:case 27:case 5:return ii(t.type);case 16:return ii("Lazy");case 13:return t.child!==s&&s!==null?ii("Suspense Fallback"):ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return xl(t.type,!1);case 11:return xl(t.type.render,!1);case 1:return xl(t.type,!0);case 31:return ii("Activity");default:return""}}function Wc(t){try{var s="",r=null;do s+=Nv(t,r),r=t,t=t.return;while(t);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Dl=Object.prototype.hasOwnProperty,Ul=n.unstable_scheduleCallback,kl=n.unstable_cancelCallback,Mv=n.unstable_shouldYield,Iv=n.unstable_requestPaint,At=n.unstable_now,xv=n.unstable_getCurrentPriorityLevel,jc=n.unstable_ImmediatePriority,ed=n.unstable_UserBlockingPriority,Go=n.unstable_NormalPriority,Dv=n.unstable_LowPriority,td=n.unstable_IdlePriority,Uv=n.log,kv=n.unstable_setDisableYieldValue,ks=null,wt=null;function Rn(t){if(typeof Uv=="function"&&kv(t),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(ks,t)}catch{}}var Ct=Math.clz32?Math.clz32:Lv,Ov=Math.log,Pv=Math.LN2;function Lv(t){return t>>>=0,t===0?32:31-(Ov(t)/Pv|0)|0}var Ho=256,Vo=262144,zo=4194304;function si(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fo(t,s,r){var u=t.pendingLanes;if(u===0)return 0;var p=0,y=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var E=u&134217727;return E!==0?(u=E&~y,u!==0?p=si(u):(T&=E,T!==0?p=si(T):r||(r=E&~t,r!==0&&(p=si(r))))):(E=u&~y,E!==0?p=si(E):T!==0?p=si(T):r||(r=u&~t,r!==0&&(p=si(r)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:p}function Os(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function qv(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nd(){var t=zo;return zo<<=1,(zo&62914560)===0&&(zo=4194304),t}function Ol(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Ps(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Bv(t,s,r,u,p,y){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,w=t.expirationTimes,U=t.hiddenUpdates;for(r=T&~r;0<r;){var G=31-Ct(r),V=1<<G;E[G]=0,w[G]=-1;var k=U[G];if(k!==null)for(U[G]=null,G=0;G<k.length;G++){var L=k[G];L!==null&&(L.lane&=-536870913)}r&=~V}u!==0&&id(t,u,0),y!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=y&~(T&~s))}function id(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var u=31-Ct(s);t.entangledLanes|=s,t.entanglements[u]=t.entanglements[u]|1073741824|r&261930}function sd(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var u=31-Ct(r),p=1<<u;p&s|t[u]&s&&(t[u]|=s),r&=~p}}function od(t,s){var r=s&-s;return r=(r&42)!==0?1:Pl(r),(r&(t.suspendedLanes|s))!==0?0:r}function Pl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ll(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function rd(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:$p(t.type))}function ld(t,s){var r=K.p;try{return K.p=t,s()}finally{K.p=r}}var Nn=Math.random().toString(36).slice(2),it="__reactFiber$"+Nn,gt="__reactProps$"+Nn,xi="__reactContainer$"+Nn,ql="__reactEvents$"+Nn,Gv="__reactListeners$"+Nn,Hv="__reactHandles$"+Nn,ad="__reactResources$"+Nn,Ls="__reactMarker$"+Nn;function Bl(t){delete t[it],delete t[gt],delete t[ql],delete t[Gv],delete t[Hv]}function Di(t){var s=t[it];if(s)return s;for(var r=t.parentNode;r;){if(s=r[xi]||r[it]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Ip(t);t!==null;){if(r=t[it])return r;t=Ip(t)}return s}t=r,r=t.parentNode}return null}function Ui(t){if(t=t[it]||t[xi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function qs(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function ki(t){var s=t[ad];return s||(s=t[ad]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function tt(t){t[Ls]=!0}var ud=new Set,cd={};function oi(t,s){Oi(t,s),Oi(t+"Capture",s)}function Oi(t,s){for(cd[t]=s,t=0;t<s.length;t++)ud.add(s[t])}var Vv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dd={},fd={};function zv(t){return Dl.call(fd,t)?!0:Dl.call(dd,t)?!1:Vv.test(t)?fd[t]=!0:(dd[t]=!0,!1)}function Jo(t,s,r){if(zv(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function $o(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function on(t,s,r,u){if(u===null)t.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+u)}}function Pt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hd(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Fv(t,s,r){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){r=""+T,y.call(this,T)}}),Object.defineProperty(t,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Gl(t){if(!t._valueTracker){var s=hd(t)?"checked":"value";t._valueTracker=Fv(t,s,""+t[s])}}function pd(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return t&&(u=hd(t)?t.checked?"true":"false":t.value),t=u,t!==r?(s.setValue(t),!0):!1}function Yo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Jv=/[\n"\\]/g;function Lt(t){return t.replace(Jv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Hl(t,s,r,u,p,y,T,E){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),s!=null?T==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Pt(s)):t.value!==""+Pt(s)&&(t.value=""+Pt(s)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),s!=null?Vl(t,T,Pt(s)):r!=null?Vl(t,T,Pt(r)):u!=null&&t.removeAttribute("value"),p==null&&y!=null&&(t.defaultChecked=!!y),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Pt(E):t.removeAttribute("name")}function md(t,s,r,u,p,y,T,E){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Gl(t);return}r=r!=null?""+Pt(r):"",s=s!=null?""+Pt(s):r,E||s===t.value||(t.value=s),t.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=E?t.checked:!!u,t.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Gl(t)}function Vl(t,s,r){s==="number"&&Yo(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Pi(t,s,r,u){if(t=t.options,s){s={};for(var p=0;p<r.length;p++)s["$"+r[p]]=!0;for(r=0;r<t.length;r++)p=s.hasOwnProperty("$"+t[r].value),t[r].selected!==p&&(t[r].selected=p),p&&u&&(t[r].defaultSelected=!0)}else{for(r=""+Pt(r),s=null,p=0;p<t.length;p++){if(t[p].value===r){t[p].selected=!0,u&&(t[p].defaultSelected=!0);return}s!==null||t[p].disabled||(s=t[p])}s!==null&&(s.selected=!0)}}function gd(t,s,r){if(s!=null&&(s=""+Pt(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+Pt(r):""}function yd(t,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(o(92));if(et(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=Pt(s),t.defaultValue=r,u=t.textContent,u===r&&u!==""&&u!==null&&(t.value=u),Gl(t)}function Li(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var $v=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vd(t,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":u?t.setProperty(s,r):typeof r!="number"||r===0||$v.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function _d(t,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&r[p]!==u&&vd(t,p,u)}else for(var y in s)s.hasOwnProperty(y)&&vd(t,y,s[y])}function zl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(t){return Kv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function rn(){}var Fl=null;function Jl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,Bi=null;function Td(t){var s=Ui(t);if(s&&(t=s.stateNode)){var r=t[gt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Hl(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Lt(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==t&&u.form===t.form){var p=u[gt]||null;if(!p)throw Error(o(90));Hl(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===t.form&&pd(u)}break e;case"textarea":gd(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Pi(t,!!r.multiple,s,!1)}}}var $l=!1;function Sd(t,s,r){if($l)return t(s,r);$l=!0;try{var u=t(s);return u}finally{if($l=!1,(qi!==null||Bi!==null)&&(Or(),qi&&(s=qi,t=Bi,Bi=qi=null,Td(s),t)))for(s=0;s<t.length;s++)Td(t[s])}}function Bs(t,s){var r=t.stateNode;if(r===null)return null;var u=r[gt]||null;if(u===null)return null;r=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=!1;if(ln)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Yl=!1}var Mn=null,Kl=null,Qo=null;function Ed(){if(Qo)return Qo;var t,s=Kl,r=s.length,u,p="value"in Mn?Mn.value:Mn.textContent,y=p.length;for(t=0;t<r&&s[t]===p[t];t++);var T=r-t;for(u=1;u<=T&&s[r-u]===p[y-u];u++);return Qo=p.slice(t,1<u?1-u:void 0)}function Xo(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Zo(){return!0}function Ad(){return!1}function yt(t){function s(r,u,p,y,T){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Zo:Ad,this.isPropagationStopped=Ad,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),s}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=yt(ri),Hs=_({},ri,{view:0,detail:0}),Qv=yt(Hs),Ql,Xl,Vs,jo=_({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vs&&(Vs&&t.type==="mousemove"?(Ql=t.screenX-Vs.screenX,Xl=t.screenY-Vs.screenY):Xl=Ql=0,Vs=t),Ql)},movementY:function(t){return"movementY"in t?t.movementY:Xl}}),wd=yt(jo),Xv=_({},jo,{dataTransfer:0}),Zv=yt(Xv),Wv=_({},Hs,{relatedTarget:0}),Zl=yt(Wv),jv=_({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),e_=yt(jv),t_=_({},ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),n_=yt(t_),i_=_({},ri,{data:0}),Cd=yt(i_),s_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l_(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=r_[t])?!!s[t]:!1}function Wl(){return l_}var a_=_({},Hs,{key:function(t){if(t.key){var s=s_[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Xo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?o_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(t){return t.type==="keypress"?Xo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u_=yt(a_),c_=_({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=yt(c_),d_=_({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),f_=yt(d_),h_=_({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),p_=yt(h_),m_=_({},jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g_=yt(m_),y_=_({},ri,{newState:0,oldState:0}),v_=yt(y_),__=[9,13,27,32],jl=ln&&"CompositionEvent"in window,zs=null;ln&&"documentMode"in document&&(zs=document.documentMode);var T_=ln&&"TextEvent"in window&&!zs,Rd=ln&&(!jl||zs&&8<zs&&11>=zs),Nd=" ",Md=!1;function Id(t,s){switch(t){case"keyup":return __.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function S_(t,s){switch(t){case"compositionend":return xd(s);case"keypress":return s.which!==32?null:(Md=!0,Nd);case"textInput":return t=s.data,t===Nd&&Md?null:t;default:return null}}function E_(t,s){if(Gi)return t==="compositionend"||!jl&&Id(t,s)?(t=Ed(),Qo=Kl=Mn=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Rd&&s.locale!=="ko"?null:s.data;default:return null}}var A_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!A_[t.type]:s==="textarea"}function Ud(t,s,r,u){qi?Bi?Bi.push(u):Bi=[u]:qi=u,s=Vr(s,"onChange"),0<s.length&&(r=new Wo("onChange","change",null,r,u),t.push({event:r,listeners:s}))}var Fs=null,Js=null;function w_(t){gp(t,0)}function er(t){var s=qs(t);if(pd(s))return t}function kd(t,s){if(t==="change")return s}var Od=!1;if(ln){var ea;if(ln){var ta="oninput"in document;if(!ta){var Pd=document.createElement("div");Pd.setAttribute("oninput","return;"),ta=typeof Pd.oninput=="function"}ea=ta}else ea=!1;Od=ea&&(!document.documentMode||9<document.documentMode)}function Ld(){Fs&&(Fs.detachEvent("onpropertychange",qd),Js=Fs=null)}function qd(t){if(t.propertyName==="value"&&er(Js)){var s=[];Ud(s,Js,t,Jl(t)),Sd(w_,s)}}function C_(t,s,r){t==="focusin"?(Ld(),Fs=s,Js=r,Fs.attachEvent("onpropertychange",qd)):t==="focusout"&&Ld()}function b_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return er(Js)}function R_(t,s){if(t==="click")return er(s)}function N_(t,s){if(t==="input"||t==="change")return er(s)}function M_(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var bt=typeof Object.is=="function"?Object.is:M_;function $s(t,s){if(bt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Dl.call(s,p)||!bt(t[p],s[p]))return!1}return!0}function Bd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gd(t,s){var r=Bd(t);t=0;for(var u;r;){if(r.nodeType===3){if(u=t+r.textContent.length,t<=s&&u>=s)return{node:r,offset:s-t};t=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bd(r)}}function Hd(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Hd(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Vd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Yo(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Yo(t.document)}return s}function na(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var I_=ln&&"documentMode"in document&&11>=document.documentMode,Hi=null,ia=null,Ys=null,sa=!1;function zd(t,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sa||Hi==null||Hi!==Yo(u)||(u=Hi,"selectionStart"in u&&na(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ys&&$s(Ys,u)||(Ys=u,u=Vr(ia,"onSelect"),0<u.length&&(s=new Wo("onSelect","select",null,s,r),t.push({event:s,listeners:u}),s.target=Hi)))}function li(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Vi={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},oa={},Fd={};ln&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function ai(t){if(oa[t])return oa[t];if(!Vi[t])return t;var s=Vi[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Fd)return oa[t]=s[r];return t}var Jd=ai("animationend"),$d=ai("animationiteration"),Yd=ai("animationstart"),x_=ai("transitionrun"),D_=ai("transitionstart"),U_=ai("transitioncancel"),Kd=ai("transitionend"),Qd=new Map,ra="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ra.push("scrollEnd");function Yt(t,s){Qd.set(t,s),oi(s,[t])}var tr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qt=[],zi=0,la=0;function nr(){for(var t=zi,s=la=zi=0;s<t;){var r=qt[s];qt[s++]=null;var u=qt[s];qt[s++]=null;var p=qt[s];qt[s++]=null;var y=qt[s];if(qt[s++]=null,u!==null&&p!==null){var T=u.pending;T===null?p.next=p:(p.next=T.next,T.next=p),u.pending=p}y!==0&&Xd(r,p,y)}}function ir(t,s,r,u){qt[zi++]=t,qt[zi++]=s,qt[zi++]=r,qt[zi++]=u,la|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function aa(t,s,r,u){return ir(t,s,r,u),sr(t)}function ui(t,s){return ir(t,null,null,s),sr(t)}function Xd(t,s,r){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r);for(var p=!1,y=t.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(p=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,p&&s!==null&&(p=31-Ct(r),t=y.hiddenUpdates,u=t[p],u===null?t[p]=[s]:u.push(s),s.lane=r|536870912),y):null}function sr(t){if(50<go)throw go=0,yu=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Fi={};function k_(t,s,r,u){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,s,r,u){return new k_(t,s,r,u)}function ua(t){return t=t.prototype,!(!t||!t.isReactComponent)}function an(t,s){var r=t.alternate;return r===null?(r=Rt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Zd(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function or(t,s,r,u,p,y){var T=0;if(u=t,typeof t=="function")ua(t)&&(T=1);else if(typeof t=="string")T=B0(t,r,j.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Z:return t=Rt(31,r,s,p),t.elementType=Z,t.lanes=y,t;case b:return ci(r.children,p,y,s);case M:T=8,p|=24;break;case P:return t=Rt(12,r,s,p|2),t.elementType=P,t.lanes=y,t;case Y:return t=Rt(13,r,s,p),t.elementType=Y,t.lanes=y,t;case $:return t=Rt(19,r,s,p),t.elementType=$,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x:T=10;break e;case O:T=9;break e;case z:T=11;break e;case J:T=14;break e;case re:T=16,u=null;break e}T=29,r=Error(o(130,t===null?"null":typeof t,"")),u=null}return s=Rt(T,r,s,p),s.elementType=t,s.type=u,s.lanes=y,s}function ci(t,s,r,u){return t=Rt(7,t,u,s),t.lanes=r,t}function ca(t,s,r){return t=Rt(6,t,null,s),t.lanes=r,t}function Wd(t){var s=Rt(18,null,null,0);return s.stateNode=t,s}function da(t,s,r){return s=Rt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var jd=new WeakMap;function Bt(t,s){if(typeof t=="object"&&t!==null){var r=jd.get(t);return r!==void 0?r:(s={value:t,source:s,stack:Wc(s)},jd.set(t,s),s)}return{value:t,source:s,stack:Wc(s)}}var Ji=[],$i=0,rr=null,Ks=0,Gt=[],Ht=0,In=null,en=1,tn="";function un(t,s){Ji[$i++]=Ks,Ji[$i++]=rr,rr=t,Ks=s}function ef(t,s,r){Gt[Ht++]=en,Gt[Ht++]=tn,Gt[Ht++]=In,In=t;var u=en;t=tn;var p=32-Ct(u)-1;u&=~(1<<p),r+=1;var y=32-Ct(s)+p;if(30<y){var T=p-p%5;y=(u&(1<<T)-1).toString(32),u>>=T,p-=T,en=1<<32-Ct(s)+p|r<<p|u,tn=y+t}else en=1<<y|r<<p|u,tn=t}function fa(t){t.return!==null&&(un(t,1),ef(t,1,0))}function ha(t){for(;t===rr;)rr=Ji[--$i],Ji[$i]=null,Ks=Ji[--$i],Ji[$i]=null;for(;t===In;)In=Gt[--Ht],Gt[Ht]=null,tn=Gt[--Ht],Gt[Ht]=null,en=Gt[--Ht],Gt[Ht]=null}function tf(t,s){Gt[Ht++]=en,Gt[Ht++]=tn,Gt[Ht++]=In,en=s.id,tn=s.overflow,In=t}var st=null,Le=null,_e=!1,xn=null,Vt=!1,pa=Error(o(519));function Dn(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qs(Bt(s,t)),pa}function nf(t){var s=t.stateNode,r=t.type,u=t.memoizedProps;switch(s[it]=t,s[gt]=u,r){case"dialog":ge("cancel",s),ge("close",s);break;case"iframe":case"object":case"embed":ge("load",s);break;case"video":case"audio":for(r=0;r<vo.length;r++)ge(vo[r],s);break;case"source":ge("error",s);break;case"img":case"image":case"link":ge("error",s),ge("load",s);break;case"details":ge("toggle",s);break;case"input":ge("invalid",s),md(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ge("invalid",s);break;case"textarea":ge("invalid",s),yd(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||Tp(s.textContent,r)?(u.popover!=null&&(ge("beforetoggle",s),ge("toggle",s)),u.onScroll!=null&&ge("scroll",s),u.onScrollEnd!=null&&ge("scrollend",s),u.onClick!=null&&(s.onclick=rn),s=!0):s=!1,s||Dn(t,!0)}function sf(t){for(st=t.return;st;)switch(st.tag){case 5:case 31:case 13:Vt=!1;return;case 27:case 3:Vt=!0;return;default:st=st.return}}function Yi(t){if(t!==st)return!1;if(!_e)return sf(t),_e=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Du(t.type,t.memoizedProps)),r=!r),r&&Le&&Dn(t),sf(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Le=Mp(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Le=Mp(t)}else s===27?(s=Le,$n(t.type)?(t=Lu,Lu=null,Le=t):Le=s):Le=st?Ft(t.stateNode.nextSibling):null;return!0}function di(){Le=st=null,_e=!1}function ma(){var t=xn;return t!==null&&(St===null?St=t:St.push.apply(St,t),xn=null),t}function Qs(t){xn===null?xn=[t]:xn.push(t)}var ga=N(null),fi=null,cn=null;function Un(t,s,r){Q(ga,s._currentValue),s._currentValue=r}function dn(t){t._currentValue=ga.current,F(ga)}function ya(t,s,r){for(;t!==null;){var u=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),t===r)break;t=t.return}}function va(t,s,r,u){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var E=y;y=p;for(var w=0;w<s.length;w++)if(E.context===s[w]){y.lanes|=r,E=y.alternate,E!==null&&(E.lanes|=r),ya(y.return,r,t),u||(T=null);break e}y=E.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(o(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),ya(T,r,t),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===t){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function Ki(t,s,r,u){t=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var E=p.type;bt(p.pendingProps.value,T.value)||(t!==null?t.push(E):t=[E])}}else if(p===be.current){if(T=p.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Ao):t=[Ao])}p=p.return}t!==null&&va(s,t,r,u),s.flags|=262144}function lr(t){for(t=t.firstContext;t!==null;){if(!bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function hi(t){fi=t,cn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ot(t){return of(fi,t)}function ar(t,s){return fi===null&&hi(t),of(t,s)}function of(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},cn===null){if(t===null)throw Error(o(308));cn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else cn=cn.next=s;return r}var O_=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,u){t.push(u)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},P_=n.unstable_scheduleCallback,L_=n.unstable_NormalPriority,Ye={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _a(){return{controller:new O_,data:new Map,refCount:0}}function Xs(t){t.refCount--,t.refCount===0&&P_(L_,function(){t.controller.abort()})}var Zs=null,Ta=0,Qi=0,Xi=null;function q_(t,s){if(Zs===null){var r=Zs=[];Ta=0,Qi=Au(),Xi={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Ta++,s.then(rf,rf),s}function rf(){if(--Ta===0&&Zs!==null){Xi!==null&&(Xi.status="fulfilled");var t=Zs;Zs=null,Qi=0,Xi=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function B_(t,s){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return t.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<r.length;p++)(0,r[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var lf=q.S;q.S=function(t,s){Fh=At(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&q_(t,s),lf!==null&&lf(t,s)};var pi=N(null);function Sa(){var t=pi.current;return t!==null?t:ke.pooledCache}function ur(t,s){s===null?Q(pi,pi.current):Q(pi,s.pool)}function af(){var t=Sa();return t===null?null:{parent:Ye._currentValue,pool:t}}var Zi=Error(o(460)),Ea=Error(o(474)),cr=Error(o(542)),dr={then:function(){}};function uf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cf(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(rn,rn),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ff(t),t;default:if(typeof s.status=="string")s.then(rn,rn);else{if(t=ke,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ff(t),t}throw gi=s,Zi}}function mi(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(gi=r,Zi):r}}var gi=null;function df(){if(gi===null)throw Error(o(459));var t=gi;return gi=null,t}function ff(t){if(t===Zi||t===cr)throw Error(o(483))}var Wi=null,Ws=0;function fr(t){var s=Ws;return Ws+=1,Wi===null&&(Wi=[]),cf(Wi,t,s)}function js(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function hr(t,s){throw s.$$typeof===S?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function hf(t){function s(I,R){if(t){var D=I.deletions;D===null?(I.deletions=[R],I.flags|=16):D.push(R)}}function r(I,R){if(!t)return null;for(;R!==null;)s(I,R),R=R.sibling;return null}function u(I){for(var R=new Map;I!==null;)I.key!==null?R.set(I.key,I):R.set(I.index,I),I=I.sibling;return R}function p(I,R){return I=an(I,R),I.index=0,I.sibling=null,I}function y(I,R,D){return I.index=D,t?(D=I.alternate,D!==null?(D=D.index,D<R?(I.flags|=67108866,R):D):(I.flags|=67108866,R)):(I.flags|=1048576,R)}function T(I){return t&&I.alternate===null&&(I.flags|=67108866),I}function E(I,R,D,H){return R===null||R.tag!==6?(R=ca(D,I.mode,H),R.return=I,R):(R=p(R,D),R.return=I,R)}function w(I,R,D,H){var se=D.type;return se===b?G(I,R,D.props.children,H,D.key):R!==null&&(R.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===re&&mi(se)===R.type)?(R=p(R,D.props),js(R,D),R.return=I,R):(R=or(D.type,D.key,D.props,null,I.mode,H),js(R,D),R.return=I,R)}function U(I,R,D,H){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=da(D,I.mode,H),R.return=I,R):(R=p(R,D.children||[]),R.return=I,R)}function G(I,R,D,H,se){return R===null||R.tag!==7?(R=ci(D,I.mode,H,se),R.return=I,R):(R=p(R,D),R.return=I,R)}function V(I,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=ca(""+R,I.mode,D),R.return=I,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case A:return D=or(R.type,R.key,R.props,null,I.mode,D),js(D,R),D.return=I,D;case C:return R=da(R,I.mode,D),R.return=I,R;case re:return R=mi(R),V(I,R,D)}if(et(R)||fe(R))return R=ci(R,I.mode,D,null),R.return=I,R;if(typeof R.then=="function")return V(I,fr(R),D);if(R.$$typeof===x)return V(I,ar(I,R),D);hr(I,R)}return null}function k(I,R,D,H){var se=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return se!==null?null:E(I,R,""+D,H);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return D.key===se?w(I,R,D,H):null;case C:return D.key===se?U(I,R,D,H):null;case re:return D=mi(D),k(I,R,D,H)}if(et(D)||fe(D))return se!==null?null:G(I,R,D,H,null);if(typeof D.then=="function")return k(I,R,fr(D),H);if(D.$$typeof===x)return k(I,R,ar(I,D),H);hr(I,D)}return null}function L(I,R,D,H,se){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return I=I.get(D)||null,E(R,I,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return I=I.get(H.key===null?D:H.key)||null,w(R,I,H,se);case C:return I=I.get(H.key===null?D:H.key)||null,U(R,I,H,se);case re:return H=mi(H),L(I,R,D,H,se)}if(et(H)||fe(H))return I=I.get(D)||null,G(R,I,H,se,null);if(typeof H.then=="function")return L(I,R,D,fr(H),se);if(H.$$typeof===x)return L(I,R,D,ar(R,H),se);hr(R,H)}return null}function W(I,R,D,H){for(var se=null,Ee=null,ee=R,de=R=0,ve=null;ee!==null&&de<D.length;de++){ee.index>de?(ve=ee,ee=null):ve=ee.sibling;var Ae=k(I,ee,D[de],H);if(Ae===null){ee===null&&(ee=ve);break}t&&ee&&Ae.alternate===null&&s(I,ee),R=y(Ae,R,de),Ee===null?se=Ae:Ee.sibling=Ae,Ee=Ae,ee=ve}if(de===D.length)return r(I,ee),_e&&un(I,de),se;if(ee===null){for(;de<D.length;de++)ee=V(I,D[de],H),ee!==null&&(R=y(ee,R,de),Ee===null?se=ee:Ee.sibling=ee,Ee=ee);return _e&&un(I,de),se}for(ee=u(ee);de<D.length;de++)ve=L(ee,I,de,D[de],H),ve!==null&&(t&&ve.alternate!==null&&ee.delete(ve.key===null?de:ve.key),R=y(ve,R,de),Ee===null?se=ve:Ee.sibling=ve,Ee=ve);return t&&ee.forEach(function(Zn){return s(I,Zn)}),_e&&un(I,de),se}function oe(I,R,D,H){if(D==null)throw Error(o(151));for(var se=null,Ee=null,ee=R,de=R=0,ve=null,Ae=D.next();ee!==null&&!Ae.done;de++,Ae=D.next()){ee.index>de?(ve=ee,ee=null):ve=ee.sibling;var Zn=k(I,ee,Ae.value,H);if(Zn===null){ee===null&&(ee=ve);break}t&&ee&&Zn.alternate===null&&s(I,ee),R=y(Zn,R,de),Ee===null?se=Zn:Ee.sibling=Zn,Ee=Zn,ee=ve}if(Ae.done)return r(I,ee),_e&&un(I,de),se;if(ee===null){for(;!Ae.done;de++,Ae=D.next())Ae=V(I,Ae.value,H),Ae!==null&&(R=y(Ae,R,de),Ee===null?se=Ae:Ee.sibling=Ae,Ee=Ae);return _e&&un(I,de),se}for(ee=u(ee);!Ae.done;de++,Ae=D.next())Ae=L(ee,I,de,Ae.value,H),Ae!==null&&(t&&Ae.alternate!==null&&ee.delete(Ae.key===null?de:Ae.key),R=y(Ae,R,de),Ee===null?se=Ae:Ee.sibling=Ae,Ee=Ae);return t&&ee.forEach(function(X0){return s(I,X0)}),_e&&un(I,de),se}function De(I,R,D,H){if(typeof D=="object"&&D!==null&&D.type===b&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case A:e:{for(var se=D.key;R!==null;){if(R.key===se){if(se=D.type,se===b){if(R.tag===7){r(I,R.sibling),H=p(R,D.props.children),H.return=I,I=H;break e}}else if(R.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===re&&mi(se)===R.type){r(I,R.sibling),H=p(R,D.props),js(H,D),H.return=I,I=H;break e}r(I,R);break}else s(I,R);R=R.sibling}D.type===b?(H=ci(D.props.children,I.mode,H,D.key),H.return=I,I=H):(H=or(D.type,D.key,D.props,null,I.mode,H),js(H,D),H.return=I,I=H)}return T(I);case C:e:{for(se=D.key;R!==null;){if(R.key===se)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){r(I,R.sibling),H=p(R,D.children||[]),H.return=I,I=H;break e}else{r(I,R);break}else s(I,R);R=R.sibling}H=da(D,I.mode,H),H.return=I,I=H}return T(I);case re:return D=mi(D),De(I,R,D,H)}if(et(D))return W(I,R,D,H);if(fe(D)){if(se=fe(D),typeof se!="function")throw Error(o(150));return D=se.call(D),oe(I,R,D,H)}if(typeof D.then=="function")return De(I,R,fr(D),H);if(D.$$typeof===x)return De(I,R,ar(I,D),H);hr(I,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(r(I,R.sibling),H=p(R,D),H.return=I,I=H):(r(I,R),H=ca(D,I.mode,H),H.return=I,I=H),T(I)):r(I,R)}return function(I,R,D,H){try{Ws=0;var se=De(I,R,D,H);return Wi=null,se}catch(ee){if(ee===Zi||ee===cr)throw ee;var Ee=Rt(29,ee,null,I.mode);return Ee.lanes=H,Ee.return=I,Ee}finally{}}}var yi=hf(!0),pf=hf(!1),kn=!1;function Aa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wa(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function On(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(t,s,r){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ce&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=sr(t),Xd(t,null,r),s}return ir(t,u,s,r),sr(t)}function eo(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=t.pendingLanes,r|=u,s.lanes=r,sd(t,r)}}function Ca(t,s){var r=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?p=y=s:y=y.next=s}else p=y=s;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var ba=!1;function to(){if(ba){var t=Xi;if(t!==null)throw t}}function no(t,s,r,u){ba=!1;var p=t.updateQueue;kn=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var w=E,U=w.next;w.next=null,T===null?y=U:T.next=U,T=w;var G=t.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==T&&(E===null?G.firstBaseUpdate=U:E.next=U,G.lastBaseUpdate=w))}if(y!==null){var V=p.baseState;T=0,G=U=w=null,E=y;do{var k=E.lane&-536870913,L=k!==E.lane;if(L?(ye&k)===k:(u&k)===k){k!==0&&k===Qi&&(ba=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var W=t,oe=E;k=s;var De=r;switch(oe.tag){case 1:if(W=oe.payload,typeof W=="function"){V=W.call(De,V,k);break e}V=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=oe.payload,k=typeof W=="function"?W.call(De,V,k):W,k==null)break e;V=_({},V,k);break e;case 2:kn=!0}}k=E.callback,k!==null&&(t.flags|=64,L&&(t.flags|=8192),L=p.callbacks,L===null?p.callbacks=[k]:L.push(k))}else L={lane:k,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(U=G=L,w=V):G=G.next=L,T|=k;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;L=E,E=L.next,L.next=null,p.lastBaseUpdate=L,p.shared.pending=null}}while(!0);G===null&&(w=V),p.baseState=w,p.firstBaseUpdate=U,p.lastBaseUpdate=G,y===null&&(p.shared.lanes=0),Hn|=T,t.lanes=T,t.memoizedState=V}}function mf(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function gf(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)mf(r[t],s)}var ji=N(null),pr=N(0);function yf(t,s){t=Tn,Q(pr,t),Q(ji,s),Tn=t|s.baseLanes}function Ra(){Q(pr,Tn),Q(ji,ji.current)}function Na(){Tn=pr.current,F(ji),F(pr)}var Nt=N(null),zt=null;function Ln(t){var s=t.alternate;Q(Je,Je.current&1),Q(Nt,t),zt===null&&(s===null||ji.current!==null||s.memoizedState!==null)&&(zt=t)}function Ma(t){Q(Je,Je.current),Q(Nt,t),zt===null&&(zt=t)}function vf(t){t.tag===22?(Q(Je,Je.current),Q(Nt,t),zt===null&&(zt=t)):qn()}function qn(){Q(Je,Je.current),Q(Nt,Nt.current)}function Mt(t){F(Nt),zt===t&&(zt=null),F(Je)}var Je=N(0);function mr(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Ou(r)||Pu(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fn=0,ce=null,Ie=null,Ke=null,gr=!1,es=!1,vi=!1,yr=0,io=0,ts=null,G_=0;function Ve(){throw Error(o(321))}function Ia(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!bt(t[r],s[r]))return!1;return!0}function xa(t,s,r,u,p,y){return fn=y,ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=t===null||t.memoizedState===null?th:$a,vi=!1,y=r(u,p),vi=!1,es&&(y=Tf(s,r,u,p)),_f(t),y}function _f(t){q.H=ro;var s=Ie!==null&&Ie.next!==null;if(fn=0,Ke=Ie=ce=null,gr=!1,io=0,ts=null,s)throw Error(o(300));t===null||Qe||(t=t.dependencies,t!==null&&lr(t)&&(Qe=!0))}function Tf(t,s,r,u){ce=t;var p=0;do{if(es&&(ts=null),io=0,es=!1,25<=p)throw Error(o(301));if(p+=1,Ke=Ie=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=nh,y=s(r,u)}while(es);return y}function H_(){var t=q.H,s=t.useState()[0];return s=typeof s.then=="function"?so(s):s,t=t.useState()[0],(Ie!==null?Ie.memoizedState:null)!==t&&(ce.flags|=1024),s}function Da(){var t=yr!==0;return yr=0,t}function Ua(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function ka(t){if(gr){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}gr=!1}fn=0,Ke=Ie=ce=null,es=!1,io=yr=0,ts=null}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?ce.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function $e(){if(Ie===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var s=Ke===null?ce.memoizedState:Ke.next;if(s!==null)Ke=s,Ie=t;else{if(t===null)throw ce.alternate===null?Error(o(467)):Error(o(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Ke===null?ce.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function so(t){var s=io;return io+=1,ts===null&&(ts=[]),t=cf(ts,t,s),s=ce,(Ke===null?s.memoizedState:Ke.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?th:$a),t}function _r(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return so(t);if(t.$$typeof===x)return ot(t)}throw Error(o(438,String(t)))}function Oa(t){var s=null,r=ce.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=vr(),ce.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),u=0;u<t;u++)r[u]=he;return s.index++,r}function hn(t,s){return typeof s=="function"?s(t):s}function Tr(t){var s=$e();return Pa(s,Ie,t)}function Pa(t,s,r){var u=t.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var p=t.baseQueue,y=u.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}s.baseQueue=p=y,u.pending=null}if(y=t.baseState,p===null)t.memoizedState=y;else{s=p.next;var E=T=null,w=null,U=s,G=!1;do{var V=U.lane&-536870913;if(V!==U.lane?(ye&V)===V:(fn&V)===V){var k=U.revertLane;if(k===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),V===Qi&&(G=!0);else if((fn&k)===k){U=U.next,k===Qi&&(G=!0);continue}else V={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},w===null?(E=w=V,T=y):w=w.next=V,ce.lanes|=k,Hn|=k;V=U.action,vi&&r(y,V),y=U.hasEagerState?U.eagerState:r(y,V)}else k={lane:V,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},w===null?(E=w=k,T=y):w=w.next=k,ce.lanes|=V,Hn|=V;U=U.next}while(U!==null&&U!==s);if(w===null?T=y:w.next=E,!bt(y,t.memoizedState)&&(Qe=!0,G&&(r=Xi,r!==null)))throw r;t.memoizedState=y,t.baseState=T,t.baseQueue=w,u.lastRenderedState=y}return p===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function La(t){var s=$e(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var u=r.dispatch,p=r.pending,y=s.memoizedState;if(p!==null){r.pending=null;var T=p=p.next;do y=t(y,T.action),T=T.next;while(T!==p);bt(y,s.memoizedState)||(Qe=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,u]}function Sf(t,s,r){var u=ce,p=$e(),y=_e;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=s();var T=!bt((Ie||p).memoizedState,r);if(T&&(p.memoizedState=r,Qe=!0),p=p.queue,Ga(wf.bind(null,u,p,t),[t]),p.getSnapshot!==s||T||Ke!==null&&Ke.memoizedState.tag&1){if(u.flags|=2048,ns(9,{destroy:void 0},Af.bind(null,u,p,r,s),null),ke===null)throw Error(o(349));y||(fn&127)!==0||Ef(u,s,r)}return r}function Ef(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=ce.updateQueue,s===null?(s=vr(),ce.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Af(t,s,r,u){s.value=r,s.getSnapshot=u,Cf(s)&&bf(t)}function wf(t,s,r){return r(function(){Cf(s)&&bf(t)})}function Cf(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!bt(t,r)}catch{return!0}}function bf(t){var s=ui(t,2);s!==null&&Et(s,t,2)}function qa(t){var s=mt();if(typeof t=="function"){var r=t;if(t=r(),vi){Rn(!0);try{r()}finally{Rn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:t},s}function Rf(t,s,r,u){return t.baseState=r,Pa(t,Ie,typeof u=="function"?u:hn)}function V_(t,s,r,u,p){if(Ar(t))throw Error(o(485));if(t=s.action,t!==null){var y={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};q.T!==null?r(!0):y.isTransition=!1,u(y),r=s.pending,r===null?(y.next=s.pending=y,Nf(s,y)):(y.next=r.next,s.pending=r.next=y)}}function Nf(t,s){var r=s.action,u=s.payload,p=t.state;if(s.isTransition){var y=q.T,T={};q.T=T;try{var E=r(p,u),w=q.S;w!==null&&w(T,E),Mf(t,s,E)}catch(U){Ba(t,s,U)}finally{y!==null&&T.types!==null&&(y.types=T.types),q.T=y}}else try{y=r(p,u),Mf(t,s,y)}catch(U){Ba(t,s,U)}}function Mf(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){If(t,s,u)},function(u){return Ba(t,s,u)}):If(t,s,r)}function If(t,s,r){s.status="fulfilled",s.value=r,xf(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,Nf(t,r)))}function Ba(t,s,r){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,xf(s),s=s.next;while(s!==u)}t.action=null}function xf(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Df(t,s){return s}function Uf(t,s){if(_e){var r=ke.formState;if(r!==null){e:{var u=ce;if(_e){if(Le){t:{for(var p=Le,y=Vt;p.nodeType!==8;){if(!y){p=null;break t}if(p=Ft(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Le=Ft(p.nextSibling),u=p.data==="F!";break e}}Dn(u)}u=!1}u&&(s=r[0])}}return r=mt(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:s},r.queue=u,r=Wf.bind(null,ce,u),u.dispatch=r,u=qa(!1),y=Ja.bind(null,ce,!1,u.queue),u=mt(),p={state:s,dispatch:null,action:t,pending:null},u.queue=p,r=V_.bind(null,ce,p,y,r),p.dispatch=r,u.memoizedState=t,[s,r,!1]}function kf(t){var s=$e();return Of(s,Ie,t)}function Of(t,s,r){if(s=Pa(t,s,Df)[0],t=Tr(hn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=so(s)}catch(T){throw T===Zi?cr:T}else u=s;s=$e();var p=s.queue,y=p.dispatch;return r!==s.memoizedState&&(ce.flags|=2048,ns(9,{destroy:void 0},z_.bind(null,p,r),null)),[u,y,t]}function z_(t,s){t.action=s}function Pf(t){var s=$e(),r=Ie;if(r!==null)return Of(s,r,t);$e(),s=s.memoizedState,r=$e();var u=r.queue.dispatch;return r.memoizedState=t,[s,u,!1]}function ns(t,s,r,u){return t={tag:t,create:r,deps:u,inst:s,next:null},s=ce.updateQueue,s===null&&(s=vr(),ce.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(u=r.next,r.next=t,t.next=u,s.lastEffect=t),t}function Lf(){return $e().memoizedState}function Sr(t,s,r,u){var p=mt();ce.flags|=t,p.memoizedState=ns(1|s,{destroy:void 0},r,u===void 0?null:u)}function Er(t,s,r,u){var p=$e();u=u===void 0?null:u;var y=p.memoizedState.inst;Ie!==null&&u!==null&&Ia(u,Ie.memoizedState.deps)?p.memoizedState=ns(s,y,r,u):(ce.flags|=t,p.memoizedState=ns(1|s,y,r,u))}function qf(t,s){Sr(8390656,8,t,s)}function Ga(t,s){Er(2048,8,t,s)}function F_(t){ce.flags|=4;var s=ce.updateQueue;if(s===null)s=vr(),ce.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function Bf(t){var s=$e().memoizedState;return F_({ref:s,nextImpl:t}),function(){if((Ce&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Gf(t,s){return Er(4,2,t,s)}function Hf(t,s){return Er(4,4,t,s)}function Vf(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function zf(t,s,r){r=r!=null?r.concat([t]):null,Er(4,4,Vf.bind(null,s,t),r)}function Ha(){}function Ff(t,s){var r=$e();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&Ia(s,u[1])?u[0]:(r.memoizedState=[t,s],t)}function Jf(t,s){var r=$e();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&Ia(s,u[1]))return u[0];if(u=t(),vi){Rn(!0);try{t()}finally{Rn(!1)}}return r.memoizedState=[u,s],u}function Va(t,s,r){return r===void 0||(fn&1073741824)!==0&&(ye&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=$h(),ce.lanes|=t,Hn|=t,r)}function $f(t,s,r,u){return bt(r,s)?r:ji.current!==null?(t=Va(t,r,u),bt(t,s)||(Qe=!0),t):(fn&42)===0||(fn&1073741824)!==0&&(ye&261930)===0?(Qe=!0,t.memoizedState=r):(t=$h(),ce.lanes|=t,Hn|=t,s)}function Yf(t,s,r,u,p){var y=K.p;K.p=y!==0&&8>y?y:8;var T=q.T,E={};q.T=E,Ja(t,!1,s,r);try{var w=p(),U=q.S;if(U!==null&&U(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var G=B_(w,u);oo(t,s,G,Dt(t))}else oo(t,s,u,Dt(t))}catch(V){oo(t,s,{then:function(){},status:"rejected",reason:V},Dt())}finally{K.p=y,T!==null&&E.types!==null&&(T.types=E.types),q.T=T}}function J_(){}function za(t,s,r,u){if(t.tag!==5)throw Error(o(476));var p=Kf(t).queue;Yf(t,p,s,ie,r===null?J_:function(){return Qf(t),r(u)})}function Kf(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:ie},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Qf(t){var s=Kf(t);s.next===null&&(s=t.alternate.memoizedState),oo(t,s.next.queue,{},Dt())}function Fa(){return ot(Ao)}function Xf(){return $e().memoizedState}function Zf(){return $e().memoizedState}function $_(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=Dt();t=On(r);var u=Pn(s,t,r);u!==null&&(Et(u,s,r),eo(u,s,r)),s={cache:_a()},t.payload=s;return}s=s.return}}function Y_(t,s,r){var u=Dt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ar(t)?jf(s,r):(r=aa(t,s,r,u),r!==null&&(Et(r,t,u),eh(r,s,u)))}function Wf(t,s,r){var u=Dt();oo(t,s,r,u)}function oo(t,s,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ar(t))jf(s,p);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,E=y(T,r);if(p.hasEagerState=!0,p.eagerState=E,bt(E,T))return ir(t,s,p,0),ke===null&&nr(),!1}catch{}finally{}if(r=aa(t,s,p,u),r!==null)return Et(r,t,u),eh(r,s,u),!0}return!1}function Ja(t,s,r,u){if(u={lane:2,revertLane:Au(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ar(t)){if(s)throw Error(o(479))}else s=aa(t,r,u,2),s!==null&&Et(s,t,2)}function Ar(t){var s=t.alternate;return t===ce||s!==null&&s===ce}function jf(t,s){es=gr=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function eh(t,s,r){if((r&4194048)!==0){var u=s.lanes;u&=t.pendingLanes,r|=u,s.lanes=r,sd(t,r)}}var ro={readContext:ot,use:_r,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve,useHostTransitionStatus:Ve,useFormState:Ve,useActionState:Ve,useOptimistic:Ve,useMemoCache:Ve,useCacheRefresh:Ve};ro.useEffectEvent=Ve;var th={readContext:ot,use:_r,useCallback:function(t,s){return mt().memoizedState=[t,s===void 0?null:s],t},useContext:ot,useEffect:qf,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,Sr(4194308,4,Vf.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Sr(4194308,4,t,s)},useInsertionEffect:function(t,s){Sr(4,2,t,s)},useMemo:function(t,s){var r=mt();s=s===void 0?null:s;var u=t();if(vi){Rn(!0);try{t()}finally{Rn(!1)}}return r.memoizedState=[u,s],u},useReducer:function(t,s,r){var u=mt();if(r!==void 0){var p=r(s);if(vi){Rn(!0);try{r(s)}finally{Rn(!1)}}}else p=s;return u.memoizedState=u.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},u.queue=t,t=t.dispatch=Y_.bind(null,ce,t),[u.memoizedState,t]},useRef:function(t){var s=mt();return t={current:t},s.memoizedState=t},useState:function(t){t=qa(t);var s=t.queue,r=Wf.bind(null,ce,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:Ha,useDeferredValue:function(t,s){var r=mt();return Va(r,t,s)},useTransition:function(){var t=qa(!1);return t=Yf.bind(null,ce,t.queue,!0,!1),mt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var u=ce,p=mt();if(_e){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),ke===null)throw Error(o(349));(ye&127)!==0||Ef(u,s,r)}p.memoizedState=r;var y={value:r,getSnapshot:s};return p.queue=y,qf(wf.bind(null,u,y,t),[t]),u.flags|=2048,ns(9,{destroy:void 0},Af.bind(null,u,y,r,s),null),r},useId:function(){var t=mt(),s=ke.identifierPrefix;if(_e){var r=tn,u=en;r=(u&~(1<<32-Ct(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=yr++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=G_++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Fa,useFormState:Uf,useActionState:Uf,useOptimistic:function(t){var s=mt();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Ja.bind(null,ce,!0,r),r.dispatch=s,[t,s]},useMemoCache:Oa,useCacheRefresh:function(){return mt().memoizedState=$_.bind(null,ce)},useEffectEvent:function(t){var s=mt(),r={impl:t};return s.memoizedState=r,function(){if((Ce&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},$a={readContext:ot,use:_r,useCallback:Ff,useContext:ot,useEffect:Ga,useImperativeHandle:zf,useInsertionEffect:Gf,useLayoutEffect:Hf,useMemo:Jf,useReducer:Tr,useRef:Lf,useState:function(){return Tr(hn)},useDebugValue:Ha,useDeferredValue:function(t,s){var r=$e();return $f(r,Ie.memoizedState,t,s)},useTransition:function(){var t=Tr(hn)[0],s=$e().memoizedState;return[typeof t=="boolean"?t:so(t),s]},useSyncExternalStore:Sf,useId:Xf,useHostTransitionStatus:Fa,useFormState:kf,useActionState:kf,useOptimistic:function(t,s){var r=$e();return Rf(r,Ie,t,s)},useMemoCache:Oa,useCacheRefresh:Zf};$a.useEffectEvent=Bf;var nh={readContext:ot,use:_r,useCallback:Ff,useContext:ot,useEffect:Ga,useImperativeHandle:zf,useInsertionEffect:Gf,useLayoutEffect:Hf,useMemo:Jf,useReducer:La,useRef:Lf,useState:function(){return La(hn)},useDebugValue:Ha,useDeferredValue:function(t,s){var r=$e();return Ie===null?Va(r,t,s):$f(r,Ie.memoizedState,t,s)},useTransition:function(){var t=La(hn)[0],s=$e().memoizedState;return[typeof t=="boolean"?t:so(t),s]},useSyncExternalStore:Sf,useId:Xf,useHostTransitionStatus:Fa,useFormState:Pf,useActionState:Pf,useOptimistic:function(t,s){var r=$e();return Ie!==null?Rf(r,Ie,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Oa,useCacheRefresh:Zf};nh.useEffectEvent=Bf;function Ya(t,s,r,u){s=t.memoizedState,r=r(u,s),r=r==null?s:_({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ka={enqueueSetState:function(t,s,r){t=t._reactInternals;var u=Dt(),p=On(u);p.payload=s,r!=null&&(p.callback=r),s=Pn(t,p,u),s!==null&&(Et(s,t,u),eo(s,t,u))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var u=Dt(),p=On(u);p.tag=1,p.payload=s,r!=null&&(p.callback=r),s=Pn(t,p,u),s!==null&&(Et(s,t,u),eo(s,t,u))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Dt(),u=On(r);u.tag=2,s!=null&&(u.callback=s),s=Pn(t,u,r),s!==null&&(Et(s,t,r),eo(s,t,r))}};function ih(t,s,r,u,p,y,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,y,T):s.prototype&&s.prototype.isPureReactComponent?!$s(r,u)||!$s(p,y):!0}function sh(t,s,r,u){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==t&&Ka.enqueueReplaceState(s,s.state,null)}function _i(t,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(t=t.defaultProps){r===s&&(r=_({},r));for(var p in t)r[p]===void 0&&(r[p]=t[p])}return r}function oh(t){tr(t)}function rh(t){console.error(t)}function lh(t){tr(t)}function wr(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function ah(t,s,r){try{var u=t.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Qa(t,s,r){return r=On(r),r.tag=3,r.payload={element:null},r.callback=function(){wr(t,s)},r}function uh(t){return t=On(t),t.tag=3,t}function ch(t,s,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;t.payload=function(){return p(y)},t.callback=function(){ah(s,r,u)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){ah(s,r,u),typeof p!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function K_(t,s,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&Ki(s,r,p,!0),r=Nt.current,r!==null){switch(r.tag){case 31:case 13:return zt===null?Pr():r.alternate===null&&ze===0&&(ze=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===dr?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),Tu(t,u,p)),!1;case 22:return r.flags|=65536,u===dr?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),Tu(t,u,p)),!1}throw Error(o(435,r.tag))}return Tu(t,u,p),Pr(),!1}if(_e)return s=Nt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==pa&&(t=Error(o(422),{cause:u}),Qs(Bt(t,r)))):(u!==pa&&(s=Error(o(423),{cause:u}),Qs(Bt(s,r))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,u=Bt(u,r),p=Qa(t.stateNode,u,p),Ca(t,p),ze!==4&&(ze=2)),!1;var y=Error(o(520),{cause:u});if(y=Bt(y,r),mo===null?mo=[y]:mo.push(y),ze!==4&&(ze=2),s===null)return!0;u=Bt(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=p&-p,r.lanes|=t,t=Qa(r.stateNode,u,t),Ca(r,t),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Vn===null||!Vn.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=uh(p),ch(p,t,r,u),Ca(r,p),!1}r=r.return}while(r!==null);return!1}var Xa=Error(o(461)),Qe=!1;function rt(t,s,r,u){s.child=t===null?pf(s,null,r,u):yi(s,t.child,r,u)}function dh(t,s,r,u,p){r=r.render;var y=s.ref;if("ref"in u){var T={};for(var E in u)E!=="ref"&&(T[E]=u[E])}else T=u;return hi(s),u=xa(t,s,r,T,y,p),E=Da(),t!==null&&!Qe?(Ua(t,s,p),pn(t,s,p)):(_e&&E&&fa(s),s.flags|=1,rt(t,s,u,p),s.child)}function fh(t,s,r,u,p){if(t===null){var y=r.type;return typeof y=="function"&&!ua(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,hh(t,s,y,u,p)):(t=or(r.type,null,u,s,s.mode,p),t.ref=s.ref,t.return=s,s.child=t)}if(y=t.child,!su(t,p)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:$s,r(T,u)&&t.ref===s.ref)return pn(t,s,p)}return s.flags|=1,t=an(y,u),t.ref=s.ref,t.return=s,s.child=t}function hh(t,s,r,u,p){if(t!==null){var y=t.memoizedProps;if($s(y,u)&&t.ref===s.ref)if(Qe=!1,s.pendingProps=u=y,su(t,p))(t.flags&131072)!==0&&(Qe=!0);else return s.lanes=t.lanes,pn(t,s,p)}return Za(t,s,r,u,p)}function ph(t,s,r,u){var p=u.children,y=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,t!==null){for(u=s.child=t.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,s.child=null;return mh(t,s,y,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&ur(s,y!==null?y.cachePool:null),y!==null?yf(s,y):Ra(),vf(s);else return u=s.lanes=536870912,mh(t,s,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(ur(s,y.cachePool),yf(s,y),qn(),s.memoizedState=null):(t!==null&&ur(s,null),Ra(),qn());return rt(t,s,p,r),s.child}function lo(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function mh(t,s,r,u,p){var y=Sa();return y=y===null?null:{parent:Ye._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},t!==null&&ur(s,null),Ra(),vf(s),t!==null&&Ki(t,s,u,!0),s.childLanes=p,null}function Cr(t,s){return s=Rr({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function gh(t,s,r){return yi(s,t.child,null,r),t=Cr(s,s.pendingProps),t.flags|=2,Mt(s),s.memoizedState=null,t}function Q_(t,s,r){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(_e){if(u.mode==="hidden")return t=Cr(s,u),s.lanes=536870912,lo(null,t);if(Ma(s),(t=Le)?(t=Np(t,Vt),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:In!==null?{id:en,overflow:tn}:null,retryLane:536870912,hydrationErrors:null},r=Wd(t),r.return=s,s.child=r,st=s,Le=null)):t=null,t===null)throw Dn(s);return s.lanes=536870912,null}return Cr(s,u)}var y=t.memoizedState;if(y!==null){var T=y.dehydrated;if(Ma(s),p)if(s.flags&256)s.flags&=-257,s=gh(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(Qe||Ki(t,s,r,!1),p=(r&t.childLanes)!==0,Qe||p){if(u=ke,u!==null&&(T=od(u,r),T!==0&&T!==y.retryLane))throw y.retryLane=T,ui(t,T),Et(u,t,T),Xa;Pr(),s=gh(t,s,r)}else t=y.treeContext,Le=Ft(T.nextSibling),st=s,_e=!0,xn=null,Vt=!1,t!==null&&tf(s,t),s=Cr(s,u),s.flags|=4096;return s}return t=an(t.child,{mode:u.mode,children:u.children}),t.ref=s.ref,s.child=t,t.return=s,t}function br(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function Za(t,s,r,u,p){return hi(s),r=xa(t,s,r,u,void 0,p),u=Da(),t!==null&&!Qe?(Ua(t,s,p),pn(t,s,p)):(_e&&u&&fa(s),s.flags|=1,rt(t,s,r,p),s.child)}function yh(t,s,r,u,p,y){return hi(s),s.updateQueue=null,r=Tf(s,u,r,p),_f(t),u=Da(),t!==null&&!Qe?(Ua(t,s,y),pn(t,s,y)):(_e&&u&&fa(s),s.flags|=1,rt(t,s,r,y),s.child)}function vh(t,s,r,u,p){if(hi(s),s.stateNode===null){var y=Fi,T=r.contextType;typeof T=="object"&&T!==null&&(y=ot(T)),y=new r(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ka,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},Aa(s),T=r.contextType,y.context=typeof T=="object"&&T!==null?ot(T):Fi,y.state=s.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(Ya(s,r,T,u),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Ka.enqueueReplaceState(y,y.state,null),no(s,u,y,p),to(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(t===null){y=s.stateNode;var E=s.memoizedProps,w=_i(r,E);y.props=w;var U=y.context,G=r.contextType;T=Fi,typeof G=="object"&&G!==null&&(T=ot(G));var V=r.getDerivedStateFromProps;G=typeof V=="function"||typeof y.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E||U!==T)&&sh(s,y,u,T),kn=!1;var k=s.memoizedState;y.state=k,no(s,u,y,p),to(),U=s.memoizedState,E||k!==U||kn?(typeof V=="function"&&(Ya(s,r,V,u),U=s.memoizedState),(w=kn||ih(s,r,w,u,k,U,T))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=U),y.props=u,y.state=U,y.context=T,u=w):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,wa(t,s),T=s.memoizedProps,G=_i(r,T),y.props=G,V=s.pendingProps,k=y.context,U=r.contextType,w=Fi,typeof U=="object"&&U!==null&&(w=ot(U)),E=r.getDerivedStateFromProps,(U=typeof E=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==V||k!==w)&&sh(s,y,u,w),kn=!1,k=s.memoizedState,y.state=k,no(s,u,y,p),to();var L=s.memoizedState;T!==V||k!==L||kn||t!==null&&t.dependencies!==null&&lr(t.dependencies)?(typeof E=="function"&&(Ya(s,r,E,u),L=s.memoizedState),(G=kn||ih(s,r,G,u,k,L,w)||t!==null&&t.dependencies!==null&&lr(t.dependencies))?(U||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,L,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,L,w)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&k===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&k===t.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=L),y.props=u,y.state=L,y.context=w,u=G):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&k===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&k===t.memoizedState||(s.flags|=1024),u=!1)}return y=u,br(t,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,t!==null&&u?(s.child=yi(s,t.child,null,p),s.child=yi(s,null,r,p)):rt(t,s,r,p),s.memoizedState=y.state,t=s.child):t=pn(t,s,p),t}function _h(t,s,r,u){return di(),s.flags|=256,rt(t,s,r,u),s.child}var Wa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ja(t){return{baseLanes:t,cachePool:af()}}function eu(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=xt),t}function Th(t,s,r){var u=s.pendingProps,p=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(Je.current&2)!==0),T&&(p=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,t===null){if(_e){if(p?Ln(s):qn(),(t=Le)?(t=Np(t,Vt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:In!==null?{id:en,overflow:tn}:null,retryLane:536870912,hydrationErrors:null},r=Wd(t),r.return=s,s.child=r,st=s,Le=null)):t=null,t===null)throw Dn(s);return Pu(t)?s.lanes=32:s.lanes=536870912,null}var E=u.children;return u=u.fallback,p?(qn(),p=s.mode,E=Rr({mode:"hidden",children:E},p),u=ci(u,p,r,null),E.return=s,u.return=s,E.sibling=u,s.child=E,u=s.child,u.memoizedState=ja(r),u.childLanes=eu(t,T,r),s.memoizedState=Wa,lo(null,u)):(Ln(s),tu(s,E))}var w=t.memoizedState;if(w!==null&&(E=w.dehydrated,E!==null)){if(y)s.flags&256?(Ln(s),s.flags&=-257,s=nu(t,s,r)):s.memoizedState!==null?(qn(),s.child=t.child,s.flags|=128,s=null):(qn(),E=u.fallback,p=s.mode,u=Rr({mode:"visible",children:u.children},p),E=ci(E,p,r,null),E.flags|=2,u.return=s,E.return=s,u.sibling=E,s.child=u,yi(s,t.child,null,r),u=s.child,u.memoizedState=ja(r),u.childLanes=eu(t,T,r),s.memoizedState=Wa,s=lo(null,u));else if(Ln(s),Pu(E)){if(T=E.nextSibling&&E.nextSibling.dataset,T)var U=T.dgst;T=U,u=Error(o(419)),u.stack="",u.digest=T,Qs({value:u,source:null,stack:null}),s=nu(t,s,r)}else if(Qe||Ki(t,s,r,!1),T=(r&t.childLanes)!==0,Qe||T){if(T=ke,T!==null&&(u=od(T,r),u!==0&&u!==w.retryLane))throw w.retryLane=u,ui(t,u),Et(T,t,u),Xa;Ou(E)||Pr(),s=nu(t,s,r)}else Ou(E)?(s.flags|=192,s.child=t.child,s=null):(t=w.treeContext,Le=Ft(E.nextSibling),st=s,_e=!0,xn=null,Vt=!1,t!==null&&tf(s,t),s=tu(s,u.children),s.flags|=4096);return s}return p?(qn(),E=u.fallback,p=s.mode,w=t.child,U=w.sibling,u=an(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,U!==null?E=an(U,E):(E=ci(E,p,r,null),E.flags|=2),E.return=s,u.return=s,u.sibling=E,s.child=u,lo(null,u),u=s.child,E=t.child.memoizedState,E===null?E=ja(r):(p=E.cachePool,p!==null?(w=Ye._currentValue,p=p.parent!==w?{parent:w,pool:w}:p):p=af(),E={baseLanes:E.baseLanes|r,cachePool:p}),u.memoizedState=E,u.childLanes=eu(t,T,r),s.memoizedState=Wa,lo(t.child,u)):(Ln(s),r=t.child,t=r.sibling,r=an(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,t!==null&&(T=s.deletions,T===null?(s.deletions=[t],s.flags|=16):T.push(t)),s.child=r,s.memoizedState=null,r)}function tu(t,s){return s=Rr({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Rr(t,s){return t=Rt(22,t,null,s),t.lanes=0,t}function nu(t,s,r){return yi(s,t.child,null,r),t=tu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Sh(t,s,r){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s),ya(t.return,s,r)}function iu(t,s,r,u,p,y){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=r,T.tailMode=p,T.treeForkCount=y)}function Eh(t,s,r){var u=s.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var T=Je.current,E=(T&2)!==0;if(E?(T=T&1|2,s.flags|=128):T&=1,Q(Je,T),rt(t,s,u,r),u=_e?Ks:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sh(t,r,s);else if(t.tag===19)Sh(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(r=s.child,p=null;r!==null;)t=r.alternate,t!==null&&mr(t)===null&&(p=r),r=r.sibling;r=p,r===null?(p=s.child,s.child=null):(p=r.sibling,r.sibling=null),iu(s,!1,p,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=s.child,s.child=null;p!==null;){if(t=p.alternate,t!==null&&mr(t)===null){s.child=p;break}t=p.sibling,p.sibling=r,r=p,p=t}iu(s,!0,r,null,y,u);break;case"together":iu(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function pn(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Hn|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(Ki(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,r=an(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=an(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function su(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&lr(t)))}function X_(t,s,r){switch(s.tag){case 3:pt(s,s.stateNode.containerInfo),Un(s,Ye,t.memoizedState.cache),di();break;case 27:case 5:Us(s);break;case 4:pt(s,s.stateNode.containerInfo);break;case 10:Un(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ma(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ln(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Th(t,s,r):(Ln(s),t=pn(t,s,r),t!==null?t.sibling:null);Ln(s);break;case 19:var p=(t.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(Ki(t,s,r,!1),u=(r&s.childLanes)!==0),p){if(u)return Eh(t,s,r);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(Je,Je.current),u)break;return null;case 22:return s.lanes=0,ph(t,s,r,s.pendingProps);case 24:Un(s,Ye,t.memoizedState.cache)}return pn(t,s,r)}function Ah(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)Qe=!0;else{if(!su(t,r)&&(s.flags&128)===0)return Qe=!1,X_(t,s,r);Qe=(t.flags&131072)!==0}else Qe=!1,_e&&(s.flags&1048576)!==0&&ef(s,Ks,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(t=mi(s.elementType),s.type=t,typeof t=="function")ua(t)?(u=_i(t,u),s.tag=1,s=vh(null,s,t,u,r)):(s.tag=0,s=Za(null,s,t,u,r));else{if(t!=null){var p=t.$$typeof;if(p===z){s.tag=11,s=dh(null,s,t,u,r);break e}else if(p===J){s.tag=14,s=fh(null,s,t,u,r);break e}}throw s=ct(t)||t,Error(o(306,s,""))}}return s;case 0:return Za(t,s,s.type,s.pendingProps,r);case 1:return u=s.type,p=_i(u,s.pendingProps),vh(t,s,u,p,r);case 3:e:{if(pt(s,s.stateNode.containerInfo),t===null)throw Error(o(387));u=s.pendingProps;var y=s.memoizedState;p=y.element,wa(t,s),no(s,u,null,r);var T=s.memoizedState;if(u=T.cache,Un(s,Ye,u),u!==y.cache&&va(s,[Ye],r,!0),to(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=_h(t,s,u,r);break e}else if(u!==p){p=Bt(Error(o(424)),s),Qs(p),s=_h(t,s,u,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Le=Ft(t.firstChild),st=s,_e=!0,xn=null,Vt=!0,r=pf(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(di(),u===p){s=pn(t,s,r);break e}rt(t,s,u,r)}s=s.child}return s;case 26:return br(t,s),t===null?(r=kp(s.type,null,s.pendingProps,null))?s.memoizedState=r:_e||(r=s.type,t=s.pendingProps,u=zr(pe.current).createElement(r),u[it]=s,u[gt]=t,lt(u,r,t),tt(u),s.stateNode=u):s.memoizedState=kp(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Us(s),t===null&&_e&&(u=s.stateNode=xp(s.type,s.pendingProps,pe.current),st=s,Vt=!0,p=Le,$n(s.type)?(Lu=p,Le=Ft(u.firstChild)):Le=p),rt(t,s,s.pendingProps.children,r),br(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&_e&&((p=u=Le)&&(u=b0(u,s.type,s.pendingProps,Vt),u!==null?(s.stateNode=u,st=s,Le=Ft(u.firstChild),Vt=!1,p=!0):p=!1),p||Dn(s)),Us(s),p=s.type,y=s.pendingProps,T=t!==null?t.memoizedProps:null,u=y.children,Du(p,y)?u=null:T!==null&&Du(p,T)&&(s.flags|=32),s.memoizedState!==null&&(p=xa(t,s,H_,null,null,r),Ao._currentValue=p),br(t,s),rt(t,s,u,r),s.child;case 6:return t===null&&_e&&((t=r=Le)&&(r=R0(r,s.pendingProps,Vt),r!==null?(s.stateNode=r,st=s,Le=null,t=!0):t=!1),t||Dn(s)),null;case 13:return Th(t,s,r);case 4:return pt(s,s.stateNode.containerInfo),u=s.pendingProps,t===null?s.child=yi(s,null,u,r):rt(t,s,u,r),s.child;case 11:return dh(t,s,s.type,s.pendingProps,r);case 7:return rt(t,s,s.pendingProps,r),s.child;case 8:return rt(t,s,s.pendingProps.children,r),s.child;case 12:return rt(t,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,Un(s,s.type,u.value),rt(t,s,u.children,r),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,hi(s),p=ot(p),u=u(p),s.flags|=1,rt(t,s,u,r),s.child;case 14:return fh(t,s,s.type,s.pendingProps,r);case 15:return hh(t,s,s.type,s.pendingProps,r);case 19:return Eh(t,s,r);case 31:return Q_(t,s,r);case 22:return ph(t,s,r,s.pendingProps);case 24:return hi(s),u=ot(Ye),t===null?(p=Sa(),p===null&&(p=ke,y=_a(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),s.memoizedState={parent:u,cache:p},Aa(s),Un(s,Ye,p)):((t.lanes&r)!==0&&(wa(t,s),no(s,null,null,r),to()),p=t.memoizedState,y=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Un(s,Ye,u)):(u=y.cache,Un(s,Ye,u),u!==p.cache&&va(s,[Ye],r,!0))),rt(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function mn(t){t.flags|=4}function ou(t,s,r,u,p){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(Xh())t.flags|=8192;else throw gi=dr,Ea}else t.flags&=-16777217}function wh(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Bp(s))if(Xh())t.flags|=8192;else throw gi=dr,Ea}function Nr(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?nd():536870912,t.lanes|=s,rs|=s)}function ao(t,s){if(!_e)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function qe(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,u=0;if(s)for(var p=t.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=u,t.childLanes=r,s}function Z_(t,s,r){var u=s.pendingProps;switch(ha(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(s),null;case 1:return qe(s),null;case 3:return r=s.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),dn(Ye),Fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yi(s)?mn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ma())),qe(s),null;case 26:var p=s.type,y=s.memoizedState;return t===null?(mn(s),y!==null?(qe(s),wh(s,y)):(qe(s),ou(s,p,null,u,r))):y?y!==t.memoizedState?(mn(s),qe(s),wh(s,y)):(qe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==u&&mn(s),qe(s),ou(s,p,t,u,r)),null;case 27:if(Bo(s),r=pe.current,p=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&mn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return qe(s),null}t=j.current,Yi(s)?nf(s):(t=xp(p,u,r),s.stateNode=t,mn(s))}return qe(s),null;case 5:if(Bo(s),p=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&mn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return qe(s),null}if(y=j.current,Yi(s))nf(s);else{var T=zr(pe.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(p,{is:u.is}):T.createElement(p)}}y[it]=s,y[gt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;e:switch(lt(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&mn(s)}}return qe(s),ou(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==u&&mn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(t=pe.current,Yi(s)){if(t=s.stateNode,r=s.memoizedProps,u=null,p=st,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}t[it]=s,t=!!(t.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Tp(t.nodeValue,r)),t||Dn(s,!0)}else t=zr(t).createTextNode(u),t[it]=s,s.stateNode=t}return qe(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(u=Yi(s),r!==null){if(t===null){if(!u)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[it]=s}else di(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),t=!1}else r=ma(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(Mt(s),s):(Mt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return qe(s),null;case 13:if(u=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=Yi(s),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[it]=s}else di(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),p=!1}else p=ma(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(Mt(s),s):(Mt(s),null)}return Mt(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,t=t!==null&&t.memoizedState!==null,r&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),Nr(s,s.updateQueue),qe(s),null);case 4:return Fe(),t===null&&Ru(s.stateNode.containerInfo),qe(s),null;case 10:return dn(s.type),qe(s),null;case 19:if(F(Je),u=s.memoizedState,u===null)return qe(s),null;if(p=(s.flags&128)!==0,y=u.rendering,y===null)if(p)ao(u,!1);else{if(ze!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(y=mr(t),y!==null){for(s.flags|=128,ao(u,!1),t=y.updateQueue,s.updateQueue=t,Nr(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)Zd(r,t),r=r.sibling;return Q(Je,Je.current&1|2),_e&&un(s,u.treeForkCount),s.child}t=t.sibling}u.tail!==null&&At()>Ur&&(s.flags|=128,p=!0,ao(u,!1),s.lanes=4194304)}else{if(!p)if(t=mr(y),t!==null){if(s.flags|=128,p=!0,t=t.updateQueue,s.updateQueue=t,Nr(s,t),ao(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!_e)return qe(s),null}else 2*At()-u.renderingStartTime>Ur&&r!==536870912&&(s.flags|=128,p=!0,ao(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(t=u.last,t!==null?t.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=At(),t.sibling=null,r=Je.current,Q(Je,p?r&1|2:r&1),_e&&un(s,u.treeForkCount),t):(qe(s),null);case 22:case 23:return Mt(s),Na(),u=s.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(qe(s),s.subtreeFlags&6&&(s.flags|=8192)):qe(s),r=s.updateQueue,r!==null&&Nr(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),t!==null&&F(pi),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),dn(Ye),qe(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function W_(t,s){switch(ha(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return dn(Ye),Fe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Bo(s),null;case 31:if(s.memoizedState!==null){if(Mt(s),s.alternate===null)throw Error(o(340));di()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Mt(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));di()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return F(Je),null;case 4:return Fe(),null;case 10:return dn(s.type),null;case 22:case 23:return Mt(s),Na(),t!==null&&F(pi),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return dn(Ye),null;case 25:return null;default:return null}}function Ch(t,s){switch(ha(s),s.tag){case 3:dn(Ye),Fe();break;case 26:case 27:case 5:Bo(s);break;case 4:Fe();break;case 31:s.memoizedState!==null&&Mt(s);break;case 13:Mt(s);break;case 19:F(Je);break;case 10:dn(s.type);break;case 22:case 23:Mt(s),Na(),t!==null&&F(pi);break;case 24:dn(Ye)}}function uo(t,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&t)===t){u=void 0;var y=r.create,T=r.inst;u=y(),T.destroy=u}r=r.next}while(r!==p)}}catch(E){Ne(s,s.return,E)}}function Bn(t,s,r){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&t)===t){var T=u.inst,E=T.destroy;if(E!==void 0){T.destroy=void 0,p=s;var w=r,U=E;try{U()}catch(G){Ne(p,w,G)}}}u=u.next}while(u!==y)}}catch(G){Ne(s,s.return,G)}}function bh(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{gf(s,r)}catch(u){Ne(t,t.return,u)}}}function Rh(t,s,r){r.props=_i(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(u){Ne(t,s,u)}}function co(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof r=="function"?t.refCleanup=r(u):r.current=u}}catch(p){Ne(t,s,p)}}function nn(t,s){var r=t.ref,u=t.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){Ne(t,s,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Ne(t,s,p)}else r.current=null}function Nh(t){var s=t.type,r=t.memoizedProps,u=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){Ne(t,t.return,p)}}function ru(t,s,r){try{var u=t.stateNode;T0(u,t.type,r,s),u[gt]=s}catch(p){Ne(t,t.return,p)}}function Mh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$n(t.type)||t.tag===4}function lu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$n(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function au(t,s,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=rn));else if(u!==4&&(u===27&&$n(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(au(t,s,r),t=t.sibling;t!==null;)au(t,s,r),t=t.sibling}function Mr(t,s,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(u!==4&&(u===27&&$n(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Mr(t,s,r),t=t.sibling;t!==null;)Mr(t,s,r),t=t.sibling}function Ih(t){var s=t.stateNode,r=t.memoizedProps;try{for(var u=t.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);lt(s,u,r),s[it]=t,s[gt]=r}catch(y){Ne(t,t.return,y)}}var gn=!1,Xe=!1,uu=!1,xh=typeof WeakSet=="function"?WeakSet:Set,nt=null;function j_(t,s){if(t=t.containerInfo,Iu=Xr,t=Vd(t),na(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var T=0,E=-1,w=-1,U=0,G=0,V=t,k=null;t:for(;;){for(var L;V!==r||p!==0&&V.nodeType!==3||(E=T+p),V!==y||u!==0&&V.nodeType!==3||(w=T+u),V.nodeType===3&&(T+=V.nodeValue.length),(L=V.firstChild)!==null;)k=V,V=L;for(;;){if(V===t)break t;if(k===r&&++U===p&&(E=T),k===y&&++G===u&&(w=T),(L=V.nextSibling)!==null)break;V=k,k=V.parentNode}V=L}r=E===-1||w===-1?null:{start:E,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(xu={focusedElem:t,selectionRange:r},Xr=!1,nt=s;nt!==null;)if(s=nt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,nt=t;else for(;nt!==null;){switch(s=nt,y=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)p=t[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,r=s,p=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var W=_i(r.type,p);t=u.getSnapshotBeforeUpdate(W,y),u.__reactInternalSnapshotBeforeUpdate=t}catch(oe){Ne(r,r.return,oe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)ku(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ku(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,nt=t;break}nt=s.return}}function Dh(t,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:vn(t,r),u&4&&uo(5,r);break;case 1:if(vn(t,r),u&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(T){Ne(r,r.return,T)}else{var p=_i(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(p,s,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Ne(r,r.return,T)}}u&64&&bh(r),u&512&&co(r,r.return);break;case 3:if(vn(t,r),u&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{gf(t,s)}catch(T){Ne(r,r.return,T)}}break;case 27:s===null&&u&4&&Ih(r);case 26:case 5:vn(t,r),s===null&&u&4&&Nh(r),u&512&&co(r,r.return);break;case 12:vn(t,r);break;case 31:vn(t,r),u&4&&Oh(t,r);break;case 13:vn(t,r),u&4&&Ph(t,r),u&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=a0.bind(null,r),N0(t,r))));break;case 22:if(u=r.memoizedState!==null||gn,!u){s=s!==null&&s.memoizedState!==null||Xe,p=gn;var y=Xe;gn=u,(Xe=s)&&!y?_n(t,r,(r.subtreeFlags&8772)!==0):vn(t,r),gn=p,Xe=y}break;case 30:break;default:vn(t,r)}}function Uh(t){var s=t.alternate;s!==null&&(t.alternate=null,Uh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Bl(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ge=null,vt=!1;function yn(t,s,r){for(r=r.child;r!==null;)kh(t,s,r),r=r.sibling}function kh(t,s,r){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(ks,r)}catch{}switch(r.tag){case 26:Xe||nn(r,s),yn(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Xe||nn(r,s);var u=Ge,p=vt;$n(r.type)&&(Ge=r.stateNode,vt=!1),yn(t,s,r),To(r.stateNode),Ge=u,vt=p;break;case 5:Xe||nn(r,s);case 6:if(u=Ge,p=vt,Ge=null,yn(t,s,r),Ge=u,vt=p,Ge!==null)if(vt)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(r.stateNode)}catch(y){Ne(r,s,y)}else try{Ge.removeChild(r.stateNode)}catch(y){Ne(r,s,y)}break;case 18:Ge!==null&&(vt?(t=Ge,bp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),ps(t)):bp(Ge,r.stateNode));break;case 4:u=Ge,p=vt,Ge=r.stateNode.containerInfo,vt=!0,yn(t,s,r),Ge=u,vt=p;break;case 0:case 11:case 14:case 15:Bn(2,r,s),Xe||Bn(4,r,s),yn(t,s,r);break;case 1:Xe||(nn(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Rh(r,s,u)),yn(t,s,r);break;case 21:yn(t,s,r);break;case 22:Xe=(u=Xe)||r.memoizedState!==null,yn(t,s,r),Xe=u;break;default:yn(t,s,r)}}function Oh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ps(t)}catch(r){Ne(s,s.return,r)}}}function Ph(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ps(t)}catch(r){Ne(s,s.return,r)}}function e0(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new xh),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new xh),s;default:throw Error(o(435,t.tag))}}function Ir(t,s){var r=e0(t);s.forEach(function(u){if(!r.has(u)){r.add(u);var p=u0.bind(null,t,u);u.then(p,p)}})}function _t(t,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],y=t,T=s,E=T;e:for(;E!==null;){switch(E.tag){case 27:if($n(E.type)){Ge=E.stateNode,vt=!1;break e}break;case 5:Ge=E.stateNode,vt=!1;break e;case 3:case 4:Ge=E.stateNode.containerInfo,vt=!0;break e}E=E.return}if(Ge===null)throw Error(o(160));kh(y,T,p),Ge=null,vt=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Lh(s,t),s=s.sibling}var Kt=null;function Lh(t,s){var r=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_t(s,t),Tt(t),u&4&&(Bn(3,t,t.return),uo(3,t),Bn(5,t,t.return));break;case 1:_t(s,t),Tt(t),u&512&&(Xe||r===null||nn(r,r.return)),u&64&&gn&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=Kt;if(_t(s,t),Tt(t),u&512&&(Xe||r===null||nn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=t.memoizedState,r===null)if(u===null)if(t.stateNode===null){e:{u=t.type,r=t.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ls]||y[it]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),lt(y,u,r),y[it]=t,tt(y),u=y;break e;case"link":var T=Lp("link","href",p).get(u+(r.href||""));if(T){for(var E=0;E<T.length;E++)if(y=T[E],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(E,1);break t}}y=p.createElement(u),lt(y,u,r),p.head.appendChild(y);break;case"meta":if(T=Lp("meta","content",p).get(u+(r.content||""))){for(E=0;E<T.length;E++)if(y=T[E],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(E,1);break t}}y=p.createElement(u),lt(y,u,r),p.head.appendChild(y);break;default:throw Error(o(468,u))}y[it]=t,tt(y),u=y}t.stateNode=u}else qp(p,t.type,t.stateNode);else t.stateNode=Pp(p,u,t.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?qp(p,t.type,t.stateNode):Pp(p,u,t.memoizedProps)):u===null&&t.stateNode!==null&&ru(t,t.memoizedProps,r.memoizedProps)}break;case 27:_t(s,t),Tt(t),u&512&&(Xe||r===null||nn(r,r.return)),r!==null&&u&4&&ru(t,t.memoizedProps,r.memoizedProps);break;case 5:if(_t(s,t),Tt(t),u&512&&(Xe||r===null||nn(r,r.return)),t.flags&32){p=t.stateNode;try{Li(p,"")}catch(W){Ne(t,t.return,W)}}u&4&&t.stateNode!=null&&(p=t.memoizedProps,ru(t,p,r!==null?r.memoizedProps:p)),u&1024&&(uu=!0);break;case 6:if(_t(s,t),Tt(t),u&4){if(t.stateNode===null)throw Error(o(162));u=t.memoizedProps,r=t.stateNode;try{r.nodeValue=u}catch(W){Ne(t,t.return,W)}}break;case 3:if($r=null,p=Kt,Kt=Fr(s.containerInfo),_t(s,t),Kt=p,Tt(t),u&4&&r!==null&&r.memoizedState.isDehydrated)try{ps(s.containerInfo)}catch(W){Ne(t,t.return,W)}uu&&(uu=!1,qh(t));break;case 4:u=Kt,Kt=Fr(t.stateNode.containerInfo),_t(s,t),Tt(t),Kt=u;break;case 12:_t(s,t),Tt(t);break;case 31:_t(s,t),Tt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Ir(t,u)));break;case 13:_t(s,t),Tt(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Dr=At()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Ir(t,u)));break;case 22:p=t.memoizedState!==null;var w=r!==null&&r.memoizedState!==null,U=gn,G=Xe;if(gn=U||p,Xe=G||w,_t(s,t),Xe=G,gn=U,Tt(t),u&8192)e:for(s=t.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(r===null||w||gn||Xe||Ti(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){w=r=s;try{if(y=w.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{E=w.stateNode;var V=w.memoizedProps.style,k=V!=null&&V.hasOwnProperty("display")?V.display:null;E.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(W){Ne(w,w.return,W)}}}else if(s.tag===6){if(r===null){w=s;try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(W){Ne(w,w.return,W)}}}else if(s.tag===18){if(r===null){w=s;try{var L=w.stateNode;p?Rp(L,!0):Rp(w.stateNode,!1)}catch(W){Ne(w,w.return,W)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=t.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Ir(t,r))));break;case 19:_t(s,t),Tt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Ir(t,u)));break;case 30:break;case 21:break;default:_t(s,t),Tt(t)}}function Tt(t){var s=t.flags;if(s&2){try{for(var r,u=t.return;u!==null;){if(Mh(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,y=lu(t);Mr(t,y,p);break;case 5:var T=r.stateNode;r.flags&32&&(Li(T,""),r.flags&=-33);var E=lu(t);Mr(t,E,T);break;case 3:case 4:var w=r.stateNode.containerInfo,U=lu(t);au(t,U,w);break;default:throw Error(o(161))}}catch(G){Ne(t,t.return,G)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function qh(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;qh(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function vn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Dh(t,s.alternate,s),s=s.sibling}function Ti(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Bn(4,s,s.return),Ti(s);break;case 1:nn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Rh(s,s.return,r),Ti(s);break;case 27:To(s.stateNode);case 26:case 5:nn(s,s.return),Ti(s);break;case 22:s.memoizedState===null&&Ti(s);break;case 30:Ti(s);break;default:Ti(s)}t=t.sibling}}function _n(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=t,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:_n(p,y,r),uo(4,y);break;case 1:if(_n(p,y,r),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){Ne(u,u.return,U)}if(u=y,p=u.updateQueue,p!==null){var E=u.stateNode;try{var w=p.shared.hiddenCallbacks;if(w!==null)for(p.shared.hiddenCallbacks=null,p=0;p<w.length;p++)mf(w[p],E)}catch(U){Ne(u,u.return,U)}}r&&T&64&&bh(y),co(y,y.return);break;case 27:Ih(y);case 26:case 5:_n(p,y,r),r&&u===null&&T&4&&Nh(y),co(y,y.return);break;case 12:_n(p,y,r);break;case 31:_n(p,y,r),r&&T&4&&Oh(p,y);break;case 13:_n(p,y,r),r&&T&4&&Ph(p,y);break;case 22:y.memoizedState===null&&_n(p,y,r),co(y,y.return);break;case 30:break;default:_n(p,y,r)}s=s.sibling}}function cu(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Xs(r))}function du(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Xs(t))}function Qt(t,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bh(t,s,r,u),s=s.sibling}function Bh(t,s,r,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Qt(t,s,r,u),p&2048&&uo(9,s);break;case 1:Qt(t,s,r,u);break;case 3:Qt(t,s,r,u),p&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Xs(t)));break;case 12:if(p&2048){Qt(t,s,r,u),t=s.stateNode;try{var y=s.memoizedProps,T=y.id,E=y.onPostCommit;typeof E=="function"&&E(T,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(w){Ne(s,s.return,w)}}else Qt(t,s,r,u);break;case 31:Qt(t,s,r,u);break;case 13:Qt(t,s,r,u);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?Qt(t,s,r,u):fo(t,s):y._visibility&2?Qt(t,s,r,u):(y._visibility|=2,is(t,s,r,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&cu(T,s);break;case 24:Qt(t,s,r,u),p&2048&&du(s.alternate,s);break;default:Qt(t,s,r,u)}}function is(t,s,r,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=t,T=s,E=r,w=u,U=T.flags;switch(T.tag){case 0:case 11:case 15:is(y,T,E,w,p),uo(8,T);break;case 23:break;case 22:var G=T.stateNode;T.memoizedState!==null?G._visibility&2?is(y,T,E,w,p):fo(y,T):(G._visibility|=2,is(y,T,E,w,p)),p&&U&2048&&cu(T.alternate,T);break;case 24:is(y,T,E,w,p),p&&U&2048&&du(T.alternate,T);break;default:is(y,T,E,w,p)}s=s.sibling}}function fo(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,u=s,p=u.flags;switch(u.tag){case 22:fo(r,u),p&2048&&cu(u.alternate,u);break;case 24:fo(r,u),p&2048&&du(u.alternate,u);break;default:fo(r,u)}s=s.sibling}}var ho=8192;function ss(t,s,r){if(t.subtreeFlags&ho)for(t=t.child;t!==null;)Gh(t,s,r),t=t.sibling}function Gh(t,s,r){switch(t.tag){case 26:ss(t,s,r),t.flags&ho&&t.memoizedState!==null&&G0(r,Kt,t.memoizedState,t.memoizedProps);break;case 5:ss(t,s,r);break;case 3:case 4:var u=Kt;Kt=Fr(t.stateNode.containerInfo),ss(t,s,r),Kt=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=ho,ho=16777216,ss(t,s,r),ho=u):ss(t,s,r));break;default:ss(t,s,r)}}function Hh(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function po(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];nt=u,zh(u,t)}Hh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vh(t),t=t.sibling}function Vh(t){switch(t.tag){case 0:case 11:case 15:po(t),t.flags&2048&&Bn(9,t,t.return);break;case 3:po(t);break;case 12:po(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,xr(t)):po(t);break;default:po(t)}}function xr(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];nt=u,zh(u,t)}Hh(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Bn(8,s,s.return),xr(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,xr(s));break;default:xr(s)}t=t.sibling}}function zh(t,s){for(;nt!==null;){var r=nt;switch(r.tag){case 0:case 11:case 15:Bn(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Xs(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,nt=u;else e:for(r=t;nt!==null;){u=nt;var p=u.sibling,y=u.return;if(Uh(u),u===r){nt=null;break e}if(p!==null){p.return=y,nt=p;break e}nt=y}}}var t0={getCacheForType:function(t){var s=ot(Ye),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return ot(Ye).controller.signal}},n0=typeof WeakMap=="function"?WeakMap:Map,Ce=0,ke=null,me=null,ye=0,Re=0,It=null,Gn=!1,os=!1,fu=!1,Tn=0,ze=0,Hn=0,Si=0,hu=0,xt=0,rs=0,mo=null,St=null,pu=!1,Dr=0,Fh=0,Ur=1/0,kr=null,Vn=null,We=0,zn=null,ls=null,Sn=0,mu=0,gu=null,Jh=null,go=0,yu=null;function Dt(){return(Ce&2)!==0&&ye!==0?ye&-ye:q.T!==null?Au():rd()}function $h(){if(xt===0)if((ye&536870912)===0||_e){var t=Vo;Vo<<=1,(Vo&3932160)===0&&(Vo=262144),xt=t}else xt=536870912;return t=Nt.current,t!==null&&(t.flags|=32),xt}function Et(t,s,r){(t===ke&&(Re===2||Re===9)||t.cancelPendingCommit!==null)&&(as(t,0),Fn(t,ye,xt,!1)),Ps(t,r),((Ce&2)===0||t!==ke)&&(t===ke&&((Ce&2)===0&&(Si|=r),ze===4&&Fn(t,ye,xt,!1)),sn(t))}function Yh(t,s,r){if((Ce&6)!==0)throw Error(o(327));var u=!r&&(s&127)===0&&(s&t.expiredLanes)===0||Os(t,s),p=u?o0(t,s):_u(t,s,!0),y=u;do{if(p===0){os&&!u&&Fn(t,s,0,!1);break}else{if(r=t.current.alternate,y&&!i0(r)){p=_u(t,s,!1),y=!1;continue}if(p===2){if(y=s,t.errorRecoveryDisabledLanes&y)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var E=t;p=mo;var w=E.current.memoizedState.isDehydrated;if(w&&(as(E,T).flags|=256),T=_u(E,T,!1),T!==2){if(fu&&!w){E.errorRecoveryDisabledLanes|=y,Si|=y,p=4;break e}y=St,St=p,y!==null&&(St===null?St=y:St.push.apply(St,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){as(t,0),Fn(t,s,0,!0);break}e:{switch(u=t,y=p,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Fn(u,s,xt,!Gn);break e;case 2:St=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(p=Dr+300-At(),10<p)){if(Fn(u,s,xt,!Gn),Fo(u,0,!0)!==0)break e;Sn=s,u.timeoutHandle=wp(Kh.bind(null,u,r,St,kr,pu,s,xt,Si,rs,Gn,y,"Throttled",-0,0),p);break e}Kh(u,r,St,kr,pu,s,xt,Si,rs,Gn,y,null,-0,0)}}break}while(!0);sn(t)}function Kh(t,s,r,u,p,y,T,E,w,U,G,V,k,L){if(t.timeoutHandle=-1,V=s.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rn},Gh(s,y,V);var W=(y&62914560)===y?Dr-At():(y&4194048)===y?Fh-At():0;if(W=H0(V,W),W!==null){Sn=y,t.cancelPendingCommit=W(np.bind(null,t,s,y,r,u,p,T,E,w,G,V,null,k,L)),Fn(t,y,T,!U);return}}np(t,s,y,r,u,p,T,E,w)}function i0(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],y=p.getSnapshot;p=p.value;try{if(!bt(y(),p))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fn(t,s,r,u){s&=~hu,s&=~Si,t.suspendedLanes|=s,t.pingedLanes&=~s,u&&(t.warmLanes|=s),u=t.expirationTimes;for(var p=s;0<p;){var y=31-Ct(p),T=1<<y;u[y]=-1,p&=~T}r!==0&&id(t,r,s)}function Or(){return(Ce&6)===0?(yo(0),!1):!0}function vu(){if(me!==null){if(Re===0)var t=me.return;else t=me,cn=fi=null,ka(t),Wi=null,Ws=0,t=me;for(;t!==null;)Ch(t.alternate,t),t=t.return;me=null}}function as(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,A0(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Sn=0,vu(),ke=t,me=r=an(t.current,null),ye=s,Re=0,It=null,Gn=!1,os=Os(t,s),fu=!1,rs=xt=hu=Si=Hn=ze=0,St=mo=null,pu=!1,(s&8)!==0&&(s|=s&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=s;0<u;){var p=31-Ct(u),y=1<<p;s|=t[p],u&=~y}return Tn=s,nr(),r}function Qh(t,s){ce=null,q.H=ro,s===Zi||s===cr?(s=df(),Re=3):s===Ea?(s=df(),Re=4):Re=s===Xa?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,It=s,me===null&&(ze=1,wr(t,Bt(s,t.current)))}function Xh(){var t=Nt.current;return t===null?!0:(ye&4194048)===ye?zt===null:(ye&62914560)===ye||(ye&536870912)!==0?t===zt:!1}function Zh(){var t=q.H;return q.H=ro,t===null?ro:t}function Wh(){var t=q.A;return q.A=t0,t}function Pr(){ze=4,Gn||(ye&4194048)!==ye&&Nt.current!==null||(os=!0),(Hn&134217727)===0&&(Si&134217727)===0||ke===null||Fn(ke,ye,xt,!1)}function _u(t,s,r){var u=Ce;Ce|=2;var p=Zh(),y=Wh();(ke!==t||ye!==s)&&(kr=null,as(t,s)),s=!1;var T=ze;e:do try{if(Re!==0&&me!==null){var E=me,w=It;switch(Re){case 8:vu(),T=6;break e;case 3:case 2:case 9:case 6:Nt.current===null&&(s=!0);var U=Re;if(Re=0,It=null,us(t,E,w,U),r&&os){T=0;break e}break;default:U=Re,Re=0,It=null,us(t,E,w,U)}}s0(),T=ze;break}catch(G){Qh(t,G)}while(!0);return s&&t.shellSuspendCounter++,cn=fi=null,Ce=u,q.H=p,q.A=y,me===null&&(ke=null,ye=0,nr()),T}function s0(){for(;me!==null;)jh(me)}function o0(t,s){var r=Ce;Ce|=2;var u=Zh(),p=Wh();ke!==t||ye!==s?(kr=null,Ur=At()+500,as(t,s)):os=Os(t,s);e:do try{if(Re!==0&&me!==null){s=me;var y=It;t:switch(Re){case 1:Re=0,It=null,us(t,s,y,1);break;case 2:case 9:if(uf(y)){Re=0,It=null,ep(s);break}s=function(){Re!==2&&Re!==9||ke!==t||(Re=7),sn(t)},y.then(s,s);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:uf(y)?(Re=0,It=null,ep(s)):(Re=0,It=null,us(t,s,y,7));break;case 5:var T=null;switch(me.tag){case 26:T=me.memoizedState;case 5:case 27:var E=me;if(T?Bp(T):E.stateNode.complete){Re=0,It=null;var w=E.sibling;if(w!==null)me=w;else{var U=E.return;U!==null?(me=U,Lr(U)):me=null}break t}}Re=0,It=null,us(t,s,y,5);break;case 6:Re=0,It=null,us(t,s,y,6);break;case 8:vu(),ze=6;break e;default:throw Error(o(462))}}r0();break}catch(G){Qh(t,G)}while(!0);return cn=fi=null,q.H=u,q.A=p,Ce=r,me!==null?0:(ke=null,ye=0,nr(),ze)}function r0(){for(;me!==null&&!Mv();)jh(me)}function jh(t){var s=Ah(t.alternate,t,Tn);t.memoizedProps=t.pendingProps,s===null?Lr(t):me=s}function ep(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=yh(r,s,s.pendingProps,s.type,void 0,ye);break;case 11:s=yh(r,s,s.pendingProps,s.type.render,s.ref,ye);break;case 5:ka(s);default:Ch(r,s),s=me=Zd(s,Tn),s=Ah(r,s,Tn)}t.memoizedProps=t.pendingProps,s===null?Lr(t):me=s}function us(t,s,r,u){cn=fi=null,ka(s),Wi=null,Ws=0;var p=s.return;try{if(K_(t,p,s,r,ye)){ze=1,wr(t,Bt(r,t.current)),me=null;return}}catch(y){if(p!==null)throw me=p,y;ze=1,wr(t,Bt(r,t.current)),me=null;return}s.flags&32768?(_e||u===1?t=!0:os||(ye&536870912)!==0?t=!1:(Gn=t=!0,(u===2||u===9||u===3||u===6)&&(u=Nt.current,u!==null&&u.tag===13&&(u.flags|=16384))),tp(s,t)):Lr(s)}function Lr(t){var s=t;do{if((s.flags&32768)!==0){tp(s,Gn);return}t=s.return;var r=Z_(s.alternate,s,Tn);if(r!==null){me=r;return}if(s=s.sibling,s!==null){me=s;return}me=s=t}while(s!==null);ze===0&&(ze=5)}function tp(t,s){do{var r=W_(t.alternate,t);if(r!==null){r.flags&=32767,me=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){me=t;return}me=t=r}while(t!==null);ze=6,me=null}function np(t,s,r,u,p,y,T,E,w){t.cancelPendingCommit=null;do qr();while(We!==0);if((Ce&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=la,Bv(t,r,y,T,E,w),t===ke&&(me=ke=null,ye=0),ls=s,zn=t,Sn=r,mu=y,gu=p,Jh=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,c0(Go,function(){return lp(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=q.T,q.T=null,p=K.p,K.p=2,T=Ce,Ce|=4;try{j_(t,s,r)}finally{Ce=T,K.p=p,q.T=u}}We=1,ip(),sp(),op()}}function ip(){if(We===1){We=0;var t=zn,s=ls,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=q.T,q.T=null;var u=K.p;K.p=2;var p=Ce;Ce|=4;try{Lh(s,t);var y=xu,T=Vd(t.containerInfo),E=y.focusedElem,w=y.selectionRange;if(T!==E&&E&&E.ownerDocument&&Hd(E.ownerDocument.documentElement,E)){if(w!==null&&na(E)){var U=w.start,G=w.end;if(G===void 0&&(G=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(G,E.value.length);else{var V=E.ownerDocument||document,k=V&&V.defaultView||window;if(k.getSelection){var L=k.getSelection(),W=E.textContent.length,oe=Math.min(w.start,W),De=w.end===void 0?oe:Math.min(w.end,W);!L.extend&&oe>De&&(T=De,De=oe,oe=T);var I=Gd(E,oe),R=Gd(E,De);if(I&&R&&(L.rangeCount!==1||L.anchorNode!==I.node||L.anchorOffset!==I.offset||L.focusNode!==R.node||L.focusOffset!==R.offset)){var D=V.createRange();D.setStart(I.node,I.offset),L.removeAllRanges(),oe>De?(L.addRange(D),L.extend(R.node,R.offset)):(D.setEnd(R.node,R.offset),L.addRange(D))}}}}for(V=[],L=E;L=L.parentNode;)L.nodeType===1&&V.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<V.length;E++){var H=V[E];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}Xr=!!Iu,xu=Iu=null}finally{Ce=p,K.p=u,q.T=r}}t.current=s,We=2}}function sp(){if(We===2){We=0;var t=zn,s=ls,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=q.T,q.T=null;var u=K.p;K.p=2;var p=Ce;Ce|=4;try{Dh(t,s.alternate,s)}finally{Ce=p,K.p=u,q.T=r}}We=3}}function op(){if(We===4||We===3){We=0,Iv();var t=zn,s=ls,r=Sn,u=Jh;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?We=5:(We=0,ls=zn=null,rp(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(Vn=null),Ll(r),s=s.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(ks,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=q.T,p=K.p,K.p=2,q.T=null;try{for(var y=t.onRecoverableError,T=0;T<u.length;T++){var E=u[T];y(E.value,{componentStack:E.stack})}}finally{q.T=s,K.p=p}}(Sn&3)!==0&&qr(),sn(t),p=t.pendingLanes,(r&261930)!==0&&(p&42)!==0?t===yu?go++:(go=0,yu=t):go=0,yo(0)}}function rp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Xs(s)))}function qr(){return ip(),sp(),op(),lp()}function lp(){if(We!==5)return!1;var t=zn,s=mu;mu=0;var r=Ll(Sn),u=q.T,p=K.p;try{K.p=32>r?32:r,q.T=null,r=gu,gu=null;var y=zn,T=Sn;if(We=0,ls=zn=null,Sn=0,(Ce&6)!==0)throw Error(o(331));var E=Ce;if(Ce|=4,Vh(y.current),Bh(y,y.current,T,r),Ce=E,yo(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(ks,y)}catch{}return!0}finally{K.p=p,q.T=u,rp(t,s)}}function ap(t,s,r){s=Bt(r,s),s=Qa(t.stateNode,s,2),t=Pn(t,s,2),t!==null&&(Ps(t,2),sn(t))}function Ne(t,s,r){if(t.tag===3)ap(t,t,r);else for(;s!==null;){if(s.tag===3){ap(s,t,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vn===null||!Vn.has(u))){t=Bt(r,t),r=uh(2),u=Pn(s,r,2),u!==null&&(ch(r,u,s,t),Ps(u,2),sn(u));break}}s=s.return}}function Tu(t,s,r){var u=t.pingCache;if(u===null){u=t.pingCache=new n0;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(r)||(fu=!0,p.add(r),t=l0.bind(null,t,s,r),s.then(t,t))}function l0(t,s,r){var u=t.pingCache;u!==null&&u.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,ke===t&&(ye&r)===r&&(ze===4||ze===3&&(ye&62914560)===ye&&300>At()-Dr?(Ce&2)===0&&as(t,0):hu|=r,rs===ye&&(rs=0)),sn(t)}function up(t,s){s===0&&(s=nd()),t=ui(t,s),t!==null&&(Ps(t,s),sn(t))}function a0(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),up(t,r)}function u0(t,s){var r=0;switch(t.tag){case 31:case 13:var u=t.stateNode,p=t.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),up(t,r)}function c0(t,s){return Ul(t,s)}var Br=null,cs=null,Su=!1,Gr=!1,Eu=!1,Jn=0;function sn(t){t!==cs&&t.next===null&&(cs===null?Br=cs=t:cs=cs.next=t),Gr=!0,Su||(Su=!0,f0())}function yo(t,s){if(!Eu&&Gr){Eu=!0;do for(var r=!1,u=Br;u!==null;){if(t!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var T=u.suspendedLanes,E=u.pingedLanes;y=(1<<31-Ct(42|t)+1)-1,y&=p&~(T&~E),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,hp(u,y))}else y=ye,y=Fo(u,u===ke?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Os(u,y)||(r=!0,hp(u,y));u=u.next}while(r);Eu=!1}}function d0(){cp()}function cp(){Gr=Su=!1;var t=0;Jn!==0&&E0()&&(t=Jn);for(var s=At(),r=null,u=Br;u!==null;){var p=u.next,y=dp(u,s);y===0?(u.next=null,r===null?Br=p:r.next=p,p===null&&(cs=r)):(r=u,(t!==0||(y&3)!==0)&&(Gr=!0)),u=p}We!==0&&We!==5||yo(t),Jn!==0&&(Jn=0)}function dp(t,s){for(var r=t.suspendedLanes,u=t.pingedLanes,p=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var T=31-Ct(y),E=1<<T,w=p[T];w===-1?((E&r)===0||(E&u)!==0)&&(p[T]=qv(E,s)):w<=s&&(t.expiredLanes|=E),y&=~E}if(s=ke,r=ye,r=Fo(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,r===0||t===s&&(Re===2||Re===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&kl(u),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Os(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(u!==null&&kl(u),Ll(r)){case 2:case 8:r=ed;break;case 32:r=Go;break;case 268435456:r=td;break;default:r=Go}return u=fp.bind(null,t),r=Ul(r,u),t.callbackPriority=s,t.callbackNode=r,s}return u!==null&&u!==null&&kl(u),t.callbackPriority=2,t.callbackNode=null,2}function fp(t,s){if(We!==0&&We!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(qr()&&t.callbackNode!==r)return null;var u=ye;return u=Fo(t,t===ke?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(Yh(t,u,s),dp(t,At()),t.callbackNode!=null&&t.callbackNode===r?fp.bind(null,t):null)}function hp(t,s){if(qr())return null;Yh(t,s,!0)}function f0(){w0(function(){(Ce&6)!==0?Ul(jc,d0):cp()})}function Au(){if(Jn===0){var t=Qi;t===0&&(t=Ho,Ho<<=1,(Ho&261888)===0&&(Ho=256)),Jn=t}return Jn}function pp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ko(""+t)}function mp(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function h0(t,s,r,u,p){if(s==="submit"&&r&&r.stateNode===p){var y=pp((p[gt]||null).action),T=u.submitter;T&&(s=(s=T[gt]||null)?pp(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var E=new Wo("action","action",null,u,p);t.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Jn!==0){var w=T?mp(p,T):new FormData(p);za(r,{pending:!0,data:w,method:p.method,action:y},null,w)}}else typeof y=="function"&&(E.preventDefault(),w=T?mp(p,T):new FormData(p),za(r,{pending:!0,data:w,method:p.method,action:y},y,w))},currentTarget:p}]})}}for(var wu=0;wu<ra.length;wu++){var Cu=ra[wu],p0=Cu.toLowerCase(),m0=Cu[0].toUpperCase()+Cu.slice(1);Yt(p0,"on"+m0)}Yt(Jd,"onAnimationEnd"),Yt($d,"onAnimationIteration"),Yt(Yd,"onAnimationStart"),Yt("dblclick","onDoubleClick"),Yt("focusin","onFocus"),Yt("focusout","onBlur"),Yt(x_,"onTransitionRun"),Yt(D_,"onTransitionStart"),Yt(U_,"onTransitionCancel"),Yt(Kd,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vo));function gp(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var u=t[r],p=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var T=u.length-1;0<=T;T--){var E=u[T],w=E.instance,U=E.currentTarget;if(E=E.listener,w!==y&&p.isPropagationStopped())break e;y=E,p.currentTarget=U;try{y(p)}catch(G){tr(G)}p.currentTarget=null,y=w}else for(T=0;T<u.length;T++){if(E=u[T],w=E.instance,U=E.currentTarget,E=E.listener,w!==y&&p.isPropagationStopped())break e;y=E,p.currentTarget=U;try{y(p)}catch(G){tr(G)}p.currentTarget=null,y=w}}}}function ge(t,s){var r=s[ql];r===void 0&&(r=s[ql]=new Set);var u=t+"__bubble";r.has(u)||(yp(s,t,2,!1),r.add(u))}function bu(t,s,r){var u=0;s&&(u|=4),yp(r,t,u,s)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Ru(t){if(!t[Hr]){t[Hr]=!0,ud.forEach(function(r){r!=="selectionchange"&&(g0.has(r)||bu(r,!1,t),bu(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Hr]||(s[Hr]=!0,bu("selectionchange",!1,s))}}function yp(t,s,r,u){switch($p(s)){case 2:var p=F0;break;case 8:p=J0;break;default:p=Vu}r=p.bind(null,s,r,t),p=void 0,!Yl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?t.addEventListener(s,r,{capture:!0,passive:p}):t.addEventListener(s,r,!0):p!==void 0?t.addEventListener(s,r,{passive:p}):t.addEventListener(s,r,!1)}function Nu(t,s,r,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var E=u.stateNode.containerInfo;if(E===p)break;if(T===4)for(T=u.return;T!==null;){var w=T.tag;if((w===3||w===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;E!==null;){if(T=Di(E),T===null)return;if(w=T.tag,w===5||w===6||w===26||w===27){u=y=T;continue e}E=E.parentNode}}u=u.return}Sd(function(){var U=y,G=Jl(r),V=[];e:{var k=Qd.get(t);if(k!==void 0){var L=Wo,W=t;switch(t){case"keypress":if(Xo(r)===0)break e;case"keydown":case"keyup":L=u_;break;case"focusin":W="focus",L=Zl;break;case"focusout":W="blur",L=Zl;break;case"beforeblur":case"afterblur":L=Zl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Zv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=f_;break;case Jd:case $d:case Yd:L=e_;break;case Kd:L=p_;break;case"scroll":case"scrollend":L=Qv;break;case"wheel":L=g_;break;case"copy":case"cut":case"paste":L=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=bd;break;case"toggle":case"beforetoggle":L=v_}var oe=(s&4)!==0,De=!oe&&(t==="scroll"||t==="scrollend"),I=oe?k!==null?k+"Capture":null:k;oe=[];for(var R=U,D;R!==null;){var H=R;if(D=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||D===null||I===null||(H=Bs(R,I),H!=null&&oe.push(_o(R,H,D))),De)break;R=R.return}0<oe.length&&(k=new L(k,W,null,r,G),V.push({event:k,listeners:oe}))}}if((s&7)===0){e:{if(k=t==="mouseover"||t==="pointerover",L=t==="mouseout"||t==="pointerout",k&&r!==Fl&&(W=r.relatedTarget||r.fromElement)&&(Di(W)||W[xi]))break e;if((L||k)&&(k=G.window===G?G:(k=G.ownerDocument)?k.defaultView||k.parentWindow:window,L?(W=r.relatedTarget||r.toElement,L=U,W=W?Di(W):null,W!==null&&(De=a(W),oe=W.tag,W!==De||oe!==5&&oe!==27&&oe!==6)&&(W=null)):(L=null,W=U),L!==W)){if(oe=wd,H="onMouseLeave",I="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(oe=bd,H="onPointerLeave",I="onPointerEnter",R="pointer"),De=L==null?k:qs(L),D=W==null?k:qs(W),k=new oe(H,R+"leave",L,r,G),k.target=De,k.relatedTarget=D,H=null,Di(G)===U&&(oe=new oe(I,R+"enter",W,r,G),oe.target=D,oe.relatedTarget=De,H=oe),De=H,L&&W)t:{for(oe=y0,I=L,R=W,D=0,H=I;H;H=oe(H))D++;H=0;for(var se=R;se;se=oe(se))H++;for(;0<D-H;)I=oe(I),D--;for(;0<H-D;)R=oe(R),H--;for(;D--;){if(I===R||R!==null&&I===R.alternate){oe=I;break t}I=oe(I),R=oe(R)}oe=null}else oe=null;L!==null&&vp(V,k,L,oe,!1),W!==null&&De!==null&&vp(V,De,W,oe,!0)}}e:{if(k=U?qs(U):window,L=k.nodeName&&k.nodeName.toLowerCase(),L==="select"||L==="input"&&k.type==="file")var Ee=kd;else if(Dd(k))if(Od)Ee=N_;else{Ee=b_;var ee=C_}else L=k.nodeName,!L||L.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?U&&zl(U.elementType)&&(Ee=kd):Ee=R_;if(Ee&&(Ee=Ee(t,U))){Ud(V,Ee,r,G);break e}ee&&ee(t,k,U),t==="focusout"&&U&&k.type==="number"&&U.memoizedProps.value!=null&&Vl(k,"number",k.value)}switch(ee=U?qs(U):window,t){case"focusin":(Dd(ee)||ee.contentEditable==="true")&&(Hi=ee,ia=U,Ys=null);break;case"focusout":Ys=ia=Hi=null;break;case"mousedown":sa=!0;break;case"contextmenu":case"mouseup":case"dragend":sa=!1,zd(V,r,G);break;case"selectionchange":if(I_)break;case"keydown":case"keyup":zd(V,r,G)}var de;if(jl)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Gi?Id(t,r)&&(ve="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ve="onCompositionStart");ve&&(Rd&&r.locale!=="ko"&&(Gi||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Gi&&(de=Ed()):(Mn=G,Kl="value"in Mn?Mn.value:Mn.textContent,Gi=!0)),ee=Vr(U,ve),0<ee.length&&(ve=new Cd(ve,t,null,r,G),V.push({event:ve,listeners:ee}),de?ve.data=de:(de=xd(r),de!==null&&(ve.data=de)))),(de=T_?S_(t,r):E_(t,r))&&(ve=Vr(U,"onBeforeInput"),0<ve.length&&(ee=new Cd("onBeforeInput","beforeinput",null,r,G),V.push({event:ee,listeners:ve}),ee.data=de)),h0(V,t,U,r,G)}gp(V,s)})}function _o(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Vr(t,s){for(var r=s+"Capture",u=[];t!==null;){var p=t,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Bs(t,r),p!=null&&u.unshift(_o(t,p,y)),p=Bs(t,s),p!=null&&u.push(_o(t,p,y))),t.tag===3)return u;t=t.return}return[]}function y0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function vp(t,s,r,u,p){for(var y=s._reactName,T=[];r!==null&&r!==u;){var E=r,w=E.alternate,U=E.stateNode;if(E=E.tag,w!==null&&w===u)break;E!==5&&E!==26&&E!==27||U===null||(w=U,p?(U=Bs(r,y),U!=null&&T.unshift(_o(r,U,w))):p||(U=Bs(r,y),U!=null&&T.push(_o(r,U,w)))),r=r.return}T.length!==0&&t.push({event:s,listeners:T})}var v0=/\r\n?/g,_0=/\u0000|\uFFFD/g;function _p(t){return(typeof t=="string"?t:""+t).replace(v0,`
`).replace(_0,"")}function Tp(t,s){return s=_p(s),_p(t)===s}function xe(t,s,r,u,p,y){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Li(t,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Li(t,""+u);break;case"className":$o(t,"class",u);break;case"tabIndex":$o(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":$o(t,r,u);break;case"style":_d(t,u,y);break;case"data":if(s!=="object"){$o(t,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=Ko(""+u),t.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&xe(t,s,"name",p.name,p,null),xe(t,s,"formEncType",p.formEncType,p,null),xe(t,s,"formMethod",p.formMethod,p,null),xe(t,s,"formTarget",p.formTarget,p,null)):(xe(t,s,"encType",p.encType,p,null),xe(t,s,"method",p.method,p,null),xe(t,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=Ko(""+u),t.setAttribute(r,u);break;case"onClick":u!=null&&(t.onclick=rn);break;case"onScroll":u!=null&&ge("scroll",t);break;case"onScrollEnd":u!=null&&ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}r=Ko(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""+u):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":u===!0?t.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,u):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(r,u):t.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(r):t.setAttribute(r,u);break;case"popover":ge("beforetoggle",t),ge("toggle",t),Jo(t,"popover",u);break;case"xlinkActuate":on(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":on(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":on(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":on(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":on(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":on(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":on(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":on(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":on(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Jo(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Yv.get(r)||r,Jo(t,r,u))}}function Mu(t,s,r,u,p,y){switch(r){case"style":_d(t,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof u=="string"?Li(t,u):(typeof u=="number"||typeof u=="bigint")&&Li(t,""+u);break;case"onScroll":u!=null&&ge("scroll",t);break;case"onScrollEnd":u!=null&&ge("scrollend",t);break;case"onClick":u!=null&&(t.onclick=rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),s=r.slice(2,p?r.length-7:void 0),y=t[gt]||null,y=y!=null?y[r]:null,typeof y=="function"&&t.removeEventListener(s,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,u,p);break e}r in t?t[r]=u:u===!0?t.setAttribute(r,""):Jo(t,r,u)}}}function lt(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",t),ge("load",t);var u=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:xe(t,s,y,T,r,null)}}p&&xe(t,s,"srcSet",r.srcSet,r,null),u&&xe(t,s,"src",r.src,r,null);return;case"input":ge("invalid",t);var E=y=T=p=null,w=null,U=null;for(u in r)if(r.hasOwnProperty(u)){var G=r[u];if(G!=null)switch(u){case"name":p=G;break;case"type":T=G;break;case"checked":w=G;break;case"defaultChecked":U=G;break;case"value":y=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,s));break;default:xe(t,s,u,G,r,null)}}md(t,y,E,w,U,T,p,!1);return;case"select":ge("invalid",t),u=T=y=null;for(p in r)if(r.hasOwnProperty(p)&&(E=r[p],E!=null))switch(p){case"value":y=E;break;case"defaultValue":T=E;break;case"multiple":u=E;default:xe(t,s,p,E,r,null)}s=y,r=T,t.multiple=!!u,s!=null?Pi(t,!!u,s,!1):r!=null&&Pi(t,!!u,r,!0);return;case"textarea":ge("invalid",t),y=p=u=null;for(T in r)if(r.hasOwnProperty(T)&&(E=r[T],E!=null))switch(T){case"value":u=E;break;case"defaultValue":p=E;break;case"children":y=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:xe(t,s,T,E,r,null)}yd(t,u,p,y);return;case"option":for(w in r)if(r.hasOwnProperty(w)&&(u=r[w],u!=null))switch(w){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:xe(t,s,w,u,r,null)}return;case"dialog":ge("beforetoggle",t),ge("toggle",t),ge("cancel",t),ge("close",t);break;case"iframe":case"object":ge("load",t);break;case"video":case"audio":for(u=0;u<vo.length;u++)ge(vo[u],t);break;case"image":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"embed":case"source":case"link":ge("error",t),ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(u=r[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:xe(t,s,U,u,r,null)}return;default:if(zl(s)){for(G in r)r.hasOwnProperty(G)&&(u=r[G],u!==void 0&&Mu(t,s,G,u,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(u=r[E],u!=null&&xe(t,s,E,u,r,null))}function T0(t,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,E=null,w=null,U=null,G=null;for(L in r){var V=r[L];if(r.hasOwnProperty(L)&&V!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":w=V;default:u.hasOwnProperty(L)||xe(t,s,L,null,u,V)}}for(var k in u){var L=u[k];if(V=r[k],u.hasOwnProperty(k)&&(L!=null||V!=null))switch(k){case"type":y=L;break;case"name":p=L;break;case"checked":U=L;break;case"defaultChecked":G=L;break;case"value":T=L;break;case"defaultValue":E=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,s));break;default:L!==V&&xe(t,s,k,L,u,V)}}Hl(t,T,E,w,U,G,y,p);return;case"select":L=T=E=k=null;for(y in r)if(w=r[y],r.hasOwnProperty(y)&&w!=null)switch(y){case"value":break;case"multiple":L=w;default:u.hasOwnProperty(y)||xe(t,s,y,null,u,w)}for(p in u)if(y=u[p],w=r[p],u.hasOwnProperty(p)&&(y!=null||w!=null))switch(p){case"value":k=y;break;case"defaultValue":E=y;break;case"multiple":T=y;default:y!==w&&xe(t,s,p,y,u,w)}s=E,r=T,u=L,k!=null?Pi(t,!!r,k,!1):!!u!=!!r&&(s!=null?Pi(t,!!r,s,!0):Pi(t,!!r,r?[]:"",!1));return;case"textarea":L=k=null;for(E in r)if(p=r[E],r.hasOwnProperty(E)&&p!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:xe(t,s,E,null,u,p)}for(T in u)if(p=u[T],y=r[T],u.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":k=p;break;case"defaultValue":L=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==y&&xe(t,s,T,p,u,y)}gd(t,k,L);return;case"option":for(var W in r)if(k=r[W],r.hasOwnProperty(W)&&k!=null&&!u.hasOwnProperty(W))switch(W){case"selected":t.selected=!1;break;default:xe(t,s,W,null,u,k)}for(w in u)if(k=u[w],L=r[w],u.hasOwnProperty(w)&&k!==L&&(k!=null||L!=null))switch(w){case"selected":t.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:xe(t,s,w,k,u,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in r)k=r[oe],r.hasOwnProperty(oe)&&k!=null&&!u.hasOwnProperty(oe)&&xe(t,s,oe,null,u,k);for(U in u)if(k=u[U],L=r[U],u.hasOwnProperty(U)&&k!==L&&(k!=null||L!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(137,s));break;default:xe(t,s,U,k,u,L)}return;default:if(zl(s)){for(var De in r)k=r[De],r.hasOwnProperty(De)&&k!==void 0&&!u.hasOwnProperty(De)&&Mu(t,s,De,void 0,u,k);for(G in u)k=u[G],L=r[G],!u.hasOwnProperty(G)||k===L||k===void 0&&L===void 0||Mu(t,s,G,k,u,L);return}}for(var I in r)k=r[I],r.hasOwnProperty(I)&&k!=null&&!u.hasOwnProperty(I)&&xe(t,s,I,null,u,k);for(V in u)k=u[V],L=r[V],!u.hasOwnProperty(V)||k===L||k==null&&L==null||xe(t,s,V,k,u,L)}function Sp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function S0(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],y=p.transferSize,T=p.initiatorType,E=p.duration;if(y&&E&&Sp(T)){for(T=0,E=p.responseEnd,u+=1;u<r.length;u++){var w=r[u],U=w.startTime;if(U>E)break;var G=w.transferSize,V=w.initiatorType;G&&Sp(V)&&(w=w.responseEnd,T+=G*(w<E?1:(E-U)/(w-U)))}if(--u,s+=8*(y+T)/(p.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Iu=null,xu=null;function zr(t){return t.nodeType===9?t:t.ownerDocument}function Ep(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ap(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Du(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Uu=null;function E0(){var t=window.event;return t&&t.type==="popstate"?t===Uu?!1:(Uu=t,!0):(Uu=null,!1)}var wp=typeof setTimeout=="function"?setTimeout:void 0,A0=typeof clearTimeout=="function"?clearTimeout:void 0,Cp=typeof Promise=="function"?Promise:void 0,w0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cp<"u"?function(t){return Cp.resolve(null).then(t).catch(C0)}:wp;function C0(t){setTimeout(function(){throw t})}function $n(t){return t==="head"}function bp(t,s){var r=s,u=0;do{var p=r.nextSibling;if(t.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){t.removeChild(p),ps(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")To(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,To(r);for(var y=r.firstChild;y;){var T=y.nextSibling,E=y.nodeName;y[Ls]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=T}}else r==="body"&&To(t.ownerDocument.body);r=p}while(r);ps(s)}function Rp(t,s){var r=t;t=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=u}while(r)}function ku(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ku(r),Bl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function b0(t,s,r,u){for(;t.nodeType===1;){var p=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Ls])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=Ft(t.nextSibling),t===null)break}return null}function R0(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ft(t.nextSibling),t===null))return null;return t}function Np(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ft(t.nextSibling),t===null))return null;return t}function Ou(t){return t.data==="$?"||t.data==="$~"}function Pu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function N0(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Ft(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Lu=null;function Mp(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return Ft(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function Ip(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function xp(t,s,r){switch(s=zr(r),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function To(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Bl(t)}var Jt=new Map,Dp=new Set;function Fr(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var En=K.d;K.d={f:M0,r:I0,D:x0,C:D0,L:U0,m:k0,X:P0,S:O0,M:L0};function M0(){var t=En.f(),s=Or();return t||s}function I0(t){var s=Ui(t);s!==null&&s.tag===5&&s.type==="form"?Qf(s):En.r(t)}var ds=typeof document>"u"?null:document;function Up(t,s,r){var u=ds;if(u&&typeof s=="string"&&s){var p=Lt(s);p='link[rel="'+t+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Dp.has(p)||(Dp.add(p),t={rel:t,crossOrigin:r,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),lt(s,"link",t),tt(s),u.head.appendChild(s)))}}function x0(t){En.D(t),Up("dns-prefetch",t,null)}function D0(t,s){En.C(t,s),Up("preconnect",t,s)}function U0(t,s,r){En.L(t,s,r);var u=ds;if(u&&t&&s){var p='link[rel="preload"][as="'+Lt(s)+'"]';s==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+Lt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+Lt(r.imageSizes)+'"]')):p+='[href="'+Lt(t)+'"]';var y=p;switch(s){case"style":y=fs(t);break;case"script":y=hs(t)}Jt.has(y)||(t=_({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),Jt.set(y,t),u.querySelector(p)!==null||s==="style"&&u.querySelector(So(y))||s==="script"&&u.querySelector(Eo(y))||(s=u.createElement("link"),lt(s,"link",t),tt(s),u.head.appendChild(s)))}}function k0(t,s){En.m(t,s);var r=ds;if(r&&t){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+Lt(u)+'"][href="'+Lt(t)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=hs(t)}if(!Jt.has(y)&&(t=_({rel:"modulepreload",href:t},s),Jt.set(y,t),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Eo(y)))return}u=r.createElement("link"),lt(u,"link",t),tt(u),r.head.appendChild(u)}}}function O0(t,s,r){En.S(t,s,r);var u=ds;if(u&&t){var p=ki(u).hoistableStyles,y=fs(t);s=s||"default";var T=p.get(y);if(!T){var E={loading:0,preload:null};if(T=u.querySelector(So(y)))E.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":s},r),(r=Jt.get(y))&&qu(t,r);var w=T=u.createElement("link");tt(w),lt(w,"link",t),w._p=new Promise(function(U,G){w.onload=U,w.onerror=G}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Jr(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:E},p.set(y,T)}}}function P0(t,s){En.X(t,s);var r=ds;if(r&&t){var u=ki(r).hoistableScripts,p=hs(t),y=u.get(p);y||(y=r.querySelector(Eo(p)),y||(t=_({src:t,async:!0},s),(s=Jt.get(p))&&Bu(t,s),y=r.createElement("script"),tt(y),lt(y,"link",t),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function L0(t,s){En.M(t,s);var r=ds;if(r&&t){var u=ki(r).hoistableScripts,p=hs(t),y=u.get(p);y||(y=r.querySelector(Eo(p)),y||(t=_({src:t,async:!0,type:"module"},s),(s=Jt.get(p))&&Bu(t,s),y=r.createElement("script"),tt(y),lt(y,"link",t),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function kp(t,s,r,u){var p=(p=pe.current)?Fr(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=fs(r.href),r=ki(p).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=fs(r.href);var y=ki(p).hoistableStyles,T=y.get(t);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,T),(y=p.querySelector(So(t)))&&!y._p&&(T.instance=y,T.state.loading=5),Jt.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Jt.set(t,r),y||q0(p,t,r,T.state))),s&&u===null)throw Error(o(528,""));return T}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=hs(r),r=ki(p).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function fs(t){return'href="'+Lt(t)+'"'}function So(t){return'link[rel="stylesheet"]['+t+"]"}function Op(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function q0(t,s,r,u){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=t.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),lt(s,"link",r),tt(s),t.head.appendChild(s))}function hs(t){return'[src="'+Lt(t)+'"]'}function Eo(t){return"script[async]"+t}function Pp(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=t.querySelector('style[data-href~="'+Lt(r.href)+'"]');if(u)return s.instance=u,tt(u),u;var p=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),tt(u),lt(u,"style",p),Jr(u,r.precedence,t),s.instance=u;case"stylesheet":p=fs(r.href);var y=t.querySelector(So(p));if(y)return s.state.loading|=4,s.instance=y,tt(y),y;u=Op(r),(p=Jt.get(p))&&qu(u,p),y=(t.ownerDocument||t).createElement("link"),tt(y);var T=y;return T._p=new Promise(function(E,w){T.onload=E,T.onerror=w}),lt(y,"link",u),s.state.loading|=4,Jr(y,r.precedence,t),s.instance=y;case"script":return y=hs(r.src),(p=t.querySelector(Eo(y)))?(s.instance=p,tt(p),p):(u=r,(p=Jt.get(y))&&(u=_({},r),Bu(u,p)),t=t.ownerDocument||t,p=t.createElement("script"),tt(p),lt(p,"link",u),t.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Jr(u,r.precedence,t));return s.instance}function Jr(t,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,T=0;T<u.length;T++){var E=u[T];if(E.dataset.precedence===s)y=E;else if(y!==p)break}y?y.parentNode.insertBefore(t,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function qu(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Bu(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var $r=null;function Lp(t,s,r){if($r===null){var u=new Map,p=$r=new Map;p.set(r,u)}else p=$r,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(t))return u;for(u.set(t,null),r=r.getElementsByTagName(t),p=0;p<r.length;p++){var y=r[p];if(!(y[Ls]||y[it]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=t+T;var E=u.get(T);E?E.push(y):u.set(T,[y])}}return u}function qp(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function B0(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Bp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function G0(t,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=fs(u.href),y=s.querySelector(So(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Yr.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=y,tt(y);return}y=s.ownerDocument||s,u=Op(u),(p=Jt.get(p))&&qu(u,p),y=y.createElement("link"),tt(y);var T=y;T._p=new Promise(function(E,w){T.onload=E,T.onerror=w}),lt(y,"link",u),r.instance=y}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Yr.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var Gu=0;function H0(t,s){return t.stylesheets&&t.count===0&&Qr(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var u=setTimeout(function(){if(t.stylesheets&&Qr(t,t.stylesheets),t.unsuspend){var y=t.unsuspend;t.unsuspend=null,y()}},6e4+s);0<t.imgBytes&&Gu===0&&(Gu=62500*S0());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qr(t,t.stylesheets),t.unsuspend)){var y=t.unsuspend;t.unsuspend=null,y()}},(t.imgBytes>Gu?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Yr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qr(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Kr=null;function Qr(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Kr=new Map,s.forEach(V0,t),Kr=null,Yr.call(t))}function V0(t,s){if(!(s.state.loading&4)){var r=Kr.get(t);if(r)var u=r.get(null);else{r=new Map,Kr.set(t,r);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),u=T)}u&&r.set(null,u)}p=s.instance,T=p.getAttribute("data-precedence"),y=r.get(T)||u,y===u&&r.set(null,p),r.set(T,p),this.count++,u=Yr.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),s.state.loading|=4}}var Ao={$$typeof:x,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function z0(t,s,r,u,p,y,T,E,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ol(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.hiddenUpdates=Ol(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Gp(t,s,r,u,p,y,T,E,w,U,G,V){return t=new z0(t,s,r,T,w,U,G,V,E),s=1,y===!0&&(s|=24),y=Rt(3,null,null,s),t.current=y,y.stateNode=t,s=_a(),s.refCount++,t.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:s},Aa(y),t}function Hp(t){return t?(t=Fi,t):Fi}function Vp(t,s,r,u,p,y){p=Hp(p),u.context===null?u.context=p:u.pendingContext=p,u=On(s),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Pn(t,u,s),r!==null&&(Et(r,t,s),eo(r,t,s))}function zp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Hu(t,s){zp(t,s),(t=t.alternate)&&zp(t,s)}function Fp(t){if(t.tag===13||t.tag===31){var s=ui(t,67108864);s!==null&&Et(s,t,67108864),Hu(t,67108864)}}function Jp(t){if(t.tag===13||t.tag===31){var s=Dt();s=Pl(s);var r=ui(t,s);r!==null&&Et(r,t,s),Hu(t,s)}}var Xr=!0;function F0(t,s,r,u){var p=q.T;q.T=null;var y=K.p;try{K.p=2,Vu(t,s,r,u)}finally{K.p=y,q.T=p}}function J0(t,s,r,u){var p=q.T;q.T=null;var y=K.p;try{K.p=8,Vu(t,s,r,u)}finally{K.p=y,q.T=p}}function Vu(t,s,r,u){if(Xr){var p=zu(u);if(p===null)Nu(t,s,u,Zr,r),Yp(t,u);else if(Y0(p,t,s,r,u))u.stopPropagation();else if(Yp(t,u),s&4&&-1<$0.indexOf(t)){for(;p!==null;){var y=Ui(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=si(y.pendingLanes);if(T!==0){var E=y;for(E.pendingLanes|=2,E.entangledLanes|=2;T;){var w=1<<31-Ct(T);E.entanglements[1]|=w,T&=~w}sn(y),(Ce&6)===0&&(Ur=At()+500,yo(0))}}break;case 31:case 13:E=ui(y,2),E!==null&&Et(E,y,2),Or(),Hu(y,2)}if(y=zu(u),y===null&&Nu(t,s,u,Zr,r),y===p)break;p=y}p!==null&&u.stopPropagation()}else Nu(t,s,u,null,r)}}function zu(t){return t=Jl(t),Fu(t)}var Zr=null;function Fu(t){if(Zr=null,t=Di(t),t!==null){var s=a(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=c(s),t!==null)return t;t=null}else if(r===31){if(t=h(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Zr=t,null}function $p(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xv()){case jc:return 2;case ed:return 8;case Go:case Dv:return 32;case td:return 268435456;default:return 32}default:return 32}}var Ju=!1,Yn=null,Kn=null,Qn=null,wo=new Map,Co=new Map,Xn=[],$0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yp(t,s){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":wo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(s.pointerId)}}function bo(t,s,r,u,p,y){return t===null||t.nativeEvent!==y?(t={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Ui(s),s!==null&&Fp(s)),t):(t.eventSystemFlags|=u,s=t.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),t)}function Y0(t,s,r,u,p){switch(s){case"focusin":return Yn=bo(Yn,t,s,r,u,p),!0;case"dragenter":return Kn=bo(Kn,t,s,r,u,p),!0;case"mouseover":return Qn=bo(Qn,t,s,r,u,p),!0;case"pointerover":var y=p.pointerId;return wo.set(y,bo(wo.get(y)||null,t,s,r,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Co.set(y,bo(Co.get(y)||null,t,s,r,u,p)),!0}return!1}function Kp(t){var s=Di(t.target);if(s!==null){var r=a(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){t.blockedOn=s,ld(t.priority,function(){Jp(r)});return}}else if(s===31){if(s=h(r),s!==null){t.blockedOn=s,ld(t.priority,function(){Jp(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wr(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=zu(t.nativeEvent);if(r===null){r=t.nativeEvent;var u=new r.constructor(r.type,r);Fl=u,r.target.dispatchEvent(u),Fl=null}else return s=Ui(r),s!==null&&Fp(s),t.blockedOn=r,!1;s.shift()}return!0}function Qp(t,s,r){Wr(t)&&r.delete(s)}function K0(){Ju=!1,Yn!==null&&Wr(Yn)&&(Yn=null),Kn!==null&&Wr(Kn)&&(Kn=null),Qn!==null&&Wr(Qn)&&(Qn=null),wo.forEach(Qp),Co.forEach(Qp)}function jr(t,s){t.blockedOn===s&&(t.blockedOn=null,Ju||(Ju=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,K0)))}var el=null;function Xp(t){el!==t&&(el=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){el===t&&(el=null);for(var s=0;s<t.length;s+=3){var r=t[s],u=t[s+1],p=t[s+2];if(typeof u!="function"){if(Fu(u||r)===null)continue;break}var y=Ui(r);y!==null&&(t.splice(s,3),s-=3,za(y,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function ps(t){function s(w){return jr(w,t)}Yn!==null&&jr(Yn,t),Kn!==null&&jr(Kn,t),Qn!==null&&jr(Qn,t),wo.forEach(s),Co.forEach(s);for(var r=0;r<Xn.length;r++){var u=Xn[r];u.blockedOn===t&&(u.blockedOn=null)}for(;0<Xn.length&&(r=Xn[0],r.blockedOn===null);)Kp(r),r.blockedOn===null&&Xn.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],y=r[u+1],T=p[gt]||null;if(typeof y=="function")T||Xp(r);else if(T){var E=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[gt]||null)E=T.formAction;else if(Fu(p)!==null)continue}else E=T.action;typeof E=="function"?r[u+1]=E:(r.splice(u,3),u-=3),Xp(r)}}}function Zp(){function t(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function $u(t){this._internalRoot=t}tl.prototype.render=$u.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,u=Dt();Vp(r,u,t,s,null,null)},tl.prototype.unmount=$u.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Vp(t.current,2,null,t,null,null),Or(),s[xi]=null}};function tl(t){this._internalRoot=t}tl.prototype.unstable_scheduleHydration=function(t){if(t){var s=rd();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Xn.length&&s!==0&&s<Xn[r].priority;r++);Xn.splice(r,0,t),r===0&&Kp(t)}};var Wp=e.version;if(Wp!=="19.2.0")throw Error(o(527,Wp,"19.2.0"));K.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=m(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Q0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{ks=nl.inject(Q0),wt=nl}catch{}}return No.createRoot=function(t,s){if(!l(t))throw Error(o(299));var r=!1,u="",p=oh,y=rh,T=lh;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Gp(t,1,!1,null,null,r,u,null,p,y,T,Zp),t[xi]=s.current,Ru(t),new $u(s)},No.hydrateRoot=function(t,s,r){if(!l(t))throw Error(o(299));var u=!1,p="",y=oh,T=rh,E=lh,w=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.formState!==void 0&&(w=r.formState)),s=Gp(t,1,!0,s,r??null,u,p,w,y,T,E,Zp),s.context=Hp(null),r=s.current,u=Dt(),u=Pl(u),p=On(u),p.callback=null,Pn(r,p,u),r=u,s.current.lanes=r,Ps(s,r),sn(s),t[xi]=s.current,Ru(t),new tl(s)},No.version="19.2.0",No}var am;function aT(){if(am)return Qu.exports;am=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qu.exports=lT(),Qu.exports}var uT=aT();const cT=Dc(uT);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dT,fT;function hT(){return{geminiUrl:dT,vertexUrl:fT}}function pT(n,e,i,o){var l,a;if(!(n!=null&&n.baseUrl)){const c=hT();return e?(l=c.vertexUrl)!==null&&l!==void 0?l:i:(a=c.geminiUrl)!==null&&a!==void 0?a:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cn{}function X(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(o,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const a=e[l];return a!=null?String(a):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function f(n,e,i){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(i))n[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(i))for(let m=0;m<g.length;m++){const v=g[m];f(v,e.slice(a+1),i[m])}else for(const m of g)f(m,e.slice(a+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];f(g[0],e.slice(a+1),i);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const o=e[e.length-1],l=n[o];if(l!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===l)return;if(typeof l=="object"&&typeof i=="object"&&l!==null&&i!==null)Object.assign(l,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[o]=i}function d(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return i;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2);if(a in n){const c=n[a];return Array.isArray(c)?c.map(h=>d(h,e.slice(o+1),i)):i}else return i}else n=n[l]}return n}catch(o){if(o instanceof TypeError)return i;throw o}}function mT(n,e){for(const[i,o]of Object.entries(e)){const l=i.split("."),a=o.split("."),c=new Set;let h=-1;for(let g=0;g<l.length;g++)if(l[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const m=a[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}uc(n,l,a,0,c)}}function uc(n,e,i,o,l){if(o>=e.length||typeof n!="object"||n===null)return;const a=e[o];if(a.endsWith("[]")){const c=a.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const g of h[c])uc(g,e,i,o+1,l)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!l.has(m)),g={};for(const m of h)g[m]=c[m];for(const[m,v]of Object.entries(g)){const _=[];for(const S of i.slice(o))S==="*"?_.push(m):_.push(S);f(c,_,v)}for(const m of h)delete c[m]}}else{const c=n;a in c&&uc(c[a],e,i,o+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kc(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gT(n){const e={},i=d(n,["operationName"]);i!=null&&f(e,["operationName"],i);const o=d(n,["resourceName"]);return o!=null&&f(e,["_url","resourceName"],o),e}function yT(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],_T(c)),e}function vT(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["response"]);return c!=null&&f(e,["response"],TT(c)),e}function _T(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>ST(c))),f(e,["generatedVideos"],a)}const o=d(n,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(n,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function TT(n){const e={},i=d(n,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>ET(c))),f(e,["generatedVideos"],a)}const o=d(n,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(n,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function ST(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],NT(i)),e}function ET(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],MT(i)),e}function AT(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function wT(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function CT(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["response"]);return c!=null&&f(e,["response"],bT(c)),e}function bT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["parent"]);o!=null&&f(e,["parent"],o);const l=d(n,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function ly(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["response"]);return c!=null&&f(e,["response"],RT(c)),e}function RT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["parent"]);o!=null&&f(e,["parent"],o);const l=d(n,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function NT(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const o=d(n,["encodedVideo"]);o!=null&&f(e,["videoBytes"],kc(o));const l=d(n,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function MT(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const o=d(n,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],kc(o));const l=d(n,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var um;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(um||(um={}));var cm;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(cm||(cm={}));var dm;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(dm||(dm={}));var ei;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ei||(ei={}));var fm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(fm||(fm={}));var hm;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(hm||(hm={}));var pm;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(pm||(pm={}));var mm;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(mm||(mm={}));var gm;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(gm||(gm={}));var ym;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ym||(ym={}));var vm;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(vm||(vm={}));var _m;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(_m||(_m={}));var Tm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Tm||(Tm={}));var Sm;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Sm||(Sm={}));var Em;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Em||(Em={}));var Am;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Am||(Am={}));var wm;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(wm||(wm={}));var Cm;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Cm||(Cm={}));var pl;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(pl||(pl={}));var bm;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bm||(bm={}));var Rm;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Rm||(Rm={}));var Nm;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Nm||(Nm={}));var cc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cc||(cc={}));var Mm;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Mm||(Mm={}));var Im;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Im||(Im={}));var xm;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(xm||(xm={}));var Dm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Dm||(Dm={}));var Um;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Um||(Um={}));var km;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(km||(km={}));var Om;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Om||(Om={}));var Pm;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Pm||(Pm={}));var Lm;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Lm||(Lm={}));var qm;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qm||(qm={}));var Bm;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Bm||(Bm={}));var Gm;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Gm||(Gm={}));var Hm;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Hm||(Hm={}));var Vm;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Vm||(Vm={}));var zm;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(zm||(zm={}));var Fm;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Fm||(Fm={}));var Jm;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Jm||(Jm={}));var $m;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})($m||($m={}));var Ym;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Ym||(Ym={}));var Km;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Km||(Km={}));var Qm;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Qm||(Qm={}));var Xm;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Xm||(Xm={}));var Zm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Zm||(Zm={}));var Wm;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Wm||(Wm={}));var jm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jm||(jm={}));var eg;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(eg||(eg={}));var tg;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tg||(tg={}));var ng;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ng||(ng={}));var ig;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(ig||(ig={}));var Es;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Es||(Es={}));class dc{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Mo{get text(){var e,i,o,l,a,c,h,g;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const S of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[A,C]of Object.entries(S))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(C!==null||C!==void 0)&&_.push(A);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,o,l,a,c,h,g;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,A]of Object.entries(_))S!=="inlineData"&&(A!==null||A!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,o,l,a,c,h,g;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,o,l,a,c,h,g,m;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,o,l,a,c,h,g,m;if(((l=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class sg{}class og{}class IT{}class xT{}class DT{}class UT{}class rg{}class lg{}class ag{}class kT{}class ml{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new ml;let l;const a=e;return i?l=vT(a):l=yT(a),Object.assign(o,l),o}}class ug{}class cg{}class dg{}class OT{}class PT{}class LT{}class Oc{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Oc,a=CT(e);return Object.assign(o,a),o}}class qT{}class BT{}class GT{}class fg{}class HT{get text(){var e,i,o;let l="",a=!1;const c=[];for(const h of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,l+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?l:void 0}get data(){var e,i,o;let l="";const a=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(l+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class VT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Pc{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Pc,a=ly(e);return Object.assign(o,a),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function we(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ay(n,e){const i=we(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function uy(n){return Array.isArray(n)?n.map(e=>gl(e)):[gl(n)]}function gl(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function cy(n){const e=gl(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dy(n){const e=gl(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hg(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function fy(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>hg(e)):[hg(n)]}function fc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function pg(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function mg(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ht(n){if(n==null)throw new Error("ContentUnion is required");return fc(n)?n:{role:"user",parts:fy(n)}}function Lc(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=ht(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const i=ht(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>ht(i)):[ht(e)]}function $t(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(pg(n)||mg(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(n)]}const e=[],i=[],o=fc(n[0]);for(const l of n){const a=fc(l);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(pg(l)||mg(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(l)}}return o||e.push({role:"user",parts:fy(i)}),e}function zT(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(ei).includes(i[0].toUpperCase())?i[0].toUpperCase():ei.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(ei).includes(o.toUpperCase())?o.toUpperCase():ei.TYPE_UNSPECIFIED})}}function As(n){const e={},i=["items"],o=["anyOf"],l=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&zT(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(ei).includes(h.toUpperCase())?h.toUpperCase():ei.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=As(h);else if(o.includes(c)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(As(m))}e[c]=g}else if(l.includes(c)){const g={};for(const[m,v]of Object.entries(h))g[m]=As(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function qc(n){return As(n)}function Bc(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Gc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ns(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=As(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=As(e.response));return n}function Ms(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function FT(n,e,i,o=1){const l=!e.startsWith(`${i}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:l?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:l?`${i}/${e}`:e}function bn(n,e){if(typeof e!="string")throw new Error("name must be a string");return FT(n,e,"cachedContents")}function hy(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ti(n){return kc(n)}function JT(n){return n!=null&&typeof n=="object"&&"name"in n}function $T(n){return n!=null&&typeof n=="object"&&"video"in n}function YT(n){return n!=null&&typeof n=="object"&&"uri"in n}function py(n){var e;let i;if(JT(n)&&(i=n.name),!(YT(n)&&(i=n.uri,i===void 0))&&!($T(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const l=i.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${i}`);i=l[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function my(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function gy(n){for(const e of["models","tunedModels","publisherModels"])if(KT(n,e))return n[e];return[]}function KT(n,e){return n!==null&&typeof n=="object"&&e in n}function QT(n,e={}){const i=n,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function XT(n,e={}){const i=[],o=new Set;for(const l of n){const a=l.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const c=QT(l,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function yy(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,l=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(l>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function ZT(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vy(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const l=i.inlinedResponses;if(!Array.isArray(l)||l.length===0)return n;let a=!1;for(const c of l){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Is(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function _y(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WT(n){const e={},i=d(n,["responsesFile"]);i!=null&&f(e,["fileName"],i);const o=d(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>MS(c))),f(e,["inlinedResponses"],a)}const l=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["inlinedEmbedContentResponses"],a)}return e}function jT(n){const e={},i=d(n,["predictionsFormat"]);i!=null&&f(e,["format"],i);const o=d(n,["gcsDestination","outputUriPrefix"]);o!=null&&f(e,["gcsUri"],o);const l=d(n,["bigqueryDestination","outputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function eS(n){const e={},i=d(n,["format"]);i!=null&&f(e,["predictionsFormat"],i);const o=d(n,["gcsUri"]);o!=null&&f(e,["gcsDestination","outputUriPrefix"],o);const l=d(n,["bigqueryUri"]);if(l!=null&&f(e,["bigqueryDestination","outputUri"],l),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function fl(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata","displayName"]);o!=null&&f(e,["displayName"],o);const l=d(n,["metadata","state"]);l!=null&&f(e,["state"],_y(l));const a=d(n,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=d(n,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(n,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(n,["metadata","model"]);g!=null&&f(e,["model"],g);const m=d(n,["metadata","output"]);return m!=null&&f(e,["dest"],WT(vy(m))),e}function hc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["displayName"]);o!=null&&f(e,["displayName"],o);const l=d(n,["state"]);l!=null&&f(e,["state"],_y(l));const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(n,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(n,["endTime"]);g!=null&&f(e,["endTime"],g);const m=d(n,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=d(n,["model"]);v!=null&&f(e,["model"],v);const _=d(n,["inputConfig"]);_!=null&&f(e,["src"],tS(_));const S=d(n,["outputConfig"]);S!=null&&f(e,["dest"],jT(vy(S)));const A=d(n,["completionStats"]);return A!=null&&f(e,["completionStats"],A),e}function tS(n){const e={},i=d(n,["instancesFormat"]);i!=null&&f(e,["format"],i);const o=d(n,["gcsSource","uris"]);o!=null&&f(e,["gcsUri"],o);const l=d(n,["bigquerySource","inputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function nS(n,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&f(i,["fileName"],o);const l=d(e,["inlinedRequests"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>NS(n,c))),f(i,["requests","requests"],a)}return i}function iS(n){const e={},i=d(n,["format"]);i!=null&&f(e,["instancesFormat"],i);const o=d(n,["gcsUri"]);o!=null&&f(e,["gcsSource","uris"],o);const l=d(n,["bigqueryUri"]);if(l!=null&&f(e,["bigquerySource","inputUri"],l),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function sS(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function oS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Is(n,o)),i}function rS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Is(n,o)),i}function lS(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const o=d(n,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],aS(o));const l=d(n,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(n,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const m=d(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(A=>A)),f(e,["safetyRatings"],S)}const _=d(n,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function aS(n){const e={},i=d(n,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["citations"],o)}return e}function Ty(n){const e={},i=d(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>PS(a))),f(e,["parts"],l)}const o=d(n,["role"]);return o!=null&&f(e,["role"],o),e}function uS(n,e){const i={},o=d(n,["displayName"]);if(e!==void 0&&o!=null&&f(e,["batch","displayName"],o),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function cS(n,e){const i={},o=d(n,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const l=d(n,["dest"]);return e!==void 0&&l!=null&&f(e,["outputConfig"],eS(ZT(l))),i}function gg(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["src"]);l!=null&&f(i,["batch","inputConfig"],nS(n,yy(n,l)));const a=d(e,["config"]);return a!=null&&uS(a,i),i}function dS(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],we(n,o));const l=d(e,["src"]);l!=null&&f(i,["inputConfig"],iS(yy(n,l)));const a=d(e,["config"]);return a!=null&&cS(a,i),i}function fS(n,e){const i={},o=d(n,["displayName"]);return e!==void 0&&o!=null&&f(e,["batch","displayName"],o),i}function hS(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["src"]);l!=null&&f(i,["batch","inputConfig"],TS(n,l));const a=d(e,["config"]);return a!=null&&fS(a,i),i}function pS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Is(n,o)),i}function mS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Is(n,o)),i}function gS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&f(e,["name"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);return a!=null&&f(e,["error"],a),e}function yS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&f(e,["name"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);return a!=null&&f(e,["error"],a),e}function vS(n,e){const i={},o=d(e,["contents"]);if(o!=null){let a=Lc(n,o);Array.isArray(a)&&(a=a.map(c=>c)),f(i,["requests[]","request","content"],a)}const l=d(e,["config"]);return l!=null&&(f(i,["_self"],_S(l,i)),mT(i,{"requests[].*":"requests[].request.*"})),i}function _S(n,e){const i={},o=d(n,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const l=d(n,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function TS(n,e){const i={},o=d(e,["fileName"]);o!=null&&f(i,["file_name"],o);const l=d(e,["inlinedRequests"]);return l!=null&&f(i,["requests"],vS(n,l)),i}function SS(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function ES(n,e,i){const o={},l=d(e,["systemInstruction"]);i!==void 0&&l!=null&&f(i,["systemInstruction"],Ty(ht(l)));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const A=d(e,["presencePenalty"]);A!=null&&f(o,["presencePenalty"],A);const C=d(e,["frequencyPenalty"]);C!=null&&f(o,["frequencyPenalty"],C);const b=d(e,["seed"]);b!=null&&f(o,["seed"],b);const M=d(e,["responseMimeType"]);M!=null&&f(o,["responseMimeType"],M);const P=d(e,["responseSchema"]);P!=null&&f(o,["responseSchema"],qc(P));const O=d(e,["responseJsonSchema"]);if(O!=null&&f(o,["responseJsonSchema"],O),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=d(e,["safetySettings"]);if(i!==void 0&&x!=null){let fe=x;Array.isArray(fe)&&(fe=fe.map(Se=>LS(Se))),f(i,["safetySettings"],fe)}const z=d(e,["tools"]);if(i!==void 0&&z!=null){let fe=Ms(z);Array.isArray(fe)&&(fe=fe.map(Se=>qS(Ns(Se)))),f(i,["tools"],fe)}const Y=d(e,["toolConfig"]);if(i!==void 0&&Y!=null&&f(i,["toolConfig"],Y),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=d(e,["cachedContent"]);i!==void 0&&$!=null&&f(i,["cachedContent"],bn(n,$));const J=d(e,["responseModalities"]);J!=null&&f(o,["responseModalities"],J);const re=d(e,["mediaResolution"]);re!=null&&f(o,["mediaResolution"],re);const Z=d(e,["speechConfig"]);if(Z!=null&&f(o,["speechConfig"],Bc(Z)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=d(e,["thinkingConfig"]);he!=null&&f(o,["thinkingConfig"],he);const Te=d(e,["imageConfig"]);return Te!=null&&f(o,["imageConfig"],Te),o}function AS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>lS(m))),f(e,["candidates"],g)}const l=d(n,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(n,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function wS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Is(n,o)),i}function CS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Is(n,o)),i}function bS(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function RS(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function NS(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["request","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let h=$t(l);Array.isArray(h)&&(h=h.map(g=>Ty(g))),f(i,["request","contents"],h)}const a=d(e,["metadata"]);a!=null&&f(i,["metadata"],a);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],ES(n,c,d(i,["request"],{}))),i}function MS(n){const e={},i=d(n,["response"]);i!=null&&f(e,["response"],AS(i));const o=d(n,["error"]);return o!=null&&f(e,["error"],o),e}function IS(n,e){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);if(e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function xS(n,e){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const a=d(n,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),i}function DS(n){const e={},i=d(n,["config"]);return i!=null&&IS(i,e),e}function US(n){const e={},i=d(n,["config"]);return i!=null&&xS(i,e),e}function kS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["operations"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>fl(c))),f(e,["batchJobs"],a)}return e}function OS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["batchPredictionJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>hc(c))),f(e,["batchJobs"],a)}return e}function PS(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const o=d(n,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(n,["fileData"]);a!=null&&f(e,["fileData"],SS(a));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const h=d(n,["inlineData"]);h!=null&&f(e,["inlineData"],sS(h));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function LS(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(n,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function qS(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const a=d(n,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],bS(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],RS(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(wn||(wn={}));class Ii{constructor(e,i,o,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,l)}init(e,i,o){var l,a;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(l=c.config)===null||l===void 0?void 0:l.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BS extends Cn{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new Ii(wn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=gg(this.apiClient,e),o=i._url,l=X("{model}:batchGenerateContent",o),h=i.batch.inputConfig.requests,g=h.requests,m=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=S,_.request=A}m.push(_)}return h.requests=m,delete i.config,delete i._url,delete i._query,{path:l,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},l=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${l}`),o.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${l}`;else if(c)o.dest=`${c}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=dS(this.apiClient,e);return h=X("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>hc(v))}else{const m=gg(this.apiClient,e);return h=X("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>fl(v))}}async createEmbeddingsInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hS(this.apiClient,e);return a=X("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>fl(g))}}async get(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=CS(this.apiClient,e);return h=X("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>hc(v))}else{const m=wS(this.apiClient,e);return h=X("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>fl(v))}}async cancel(e){var i,o,l,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=rS(this.apiClient,e);c=X("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=oS(this.apiClient,e);c=X("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=US(e);return h=X("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=OS(v),S=new fg;return Object.assign(S,_),S})}else{const m=DS(e);return h=X("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=kS(v),S=new fg;return Object.assign(S,_),S})}}async delete(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mS(this.apiClient,e);return h=X("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>yS(v))}else{const m=pS(this.apiClient,e);return h=X("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>gS(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GS(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function yg(n){const e={},i=d(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>lE(a))),f(e,["parts"],l)}const o=d(n,["role"]);return o!=null&&f(e,["role"],o),e}function HS(n,e){const i={},o=d(n,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(n,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let v=$t(c);Array.isArray(v)&&(v=v.map(_=>yg(_))),f(e,["contents"],v)}const h=d(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],yg(ht(h)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>aE(_))),f(e,["tools"],v)}const m=d(n,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],m),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function VS(n,e){const i={},o=d(n,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(n,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let _=$t(c);Array.isArray(_)&&(_=_.map(S=>S)),f(e,["contents"],_)}const h=d(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],ht(h));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>uE(S))),f(e,["tools"],_)}const m=d(n,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],m);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function zS(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],ay(n,o));const l=d(e,["config"]);return l!=null&&HS(l,i),i}function FS(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],ay(n,o));const l=d(e,["config"]);return l!=null&&VS(l,i),i}function JS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],bn(n,o)),i}function $S(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],bn(n,o)),i}function YS(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function KS(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function QS(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function XS(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const o=d(n,["name"]);o!=null&&f(e,["name"],o);const l=d(n,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(n,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function ZS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],bn(n,o)),i}function WS(n,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],bn(n,o)),i}function jS(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function eE(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function tE(n,e){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),i}function nE(n,e){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),i}function iE(n){const e={},i=d(n,["config"]);return i!=null&&tE(i,e),e}function sE(n){const e={},i=d(n,["config"]);return i!=null&&nE(i,e),e}function oE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function rE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function lE(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const o=d(n,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(n,["fileData"]);a!=null&&f(e,["fileData"],QS(a));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const h=d(n,["inlineData"]);h!=null&&f(e,["inlineData"],GS(h));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function aE(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const a=d(n,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],jS(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],eE(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function uE(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>XS(S))),f(e,["functionDeclarations"],_)}const o=d(n,["retrieval"]);o!=null&&f(e,["retrieval"],o);const l=d(n,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const a=d(n,["computerUse"]);if(a!=null&&f(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function cE(n,e){const i={},o=d(n,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(n,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),i}function dE(n,e){const i={},o=d(n,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(n,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),i}function fE(n,e){const i={},o=d(e,["name"]);o!=null&&f(i,["_url","name"],bn(n,o));const l=d(e,["config"]);return l!=null&&cE(l,i),i}function hE(n,e){const i={},o=d(e,["name"]);o!=null&&f(i,["_url","name"],bn(n,o));const l=d(e,["config"]);return l!=null&&dE(l,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pE extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Ii(wn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=FS(this.apiClient,e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=zS(this.apiClient,e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=WS(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=ZS(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=$S(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=KS(v),S=new cg;return Object.assign(S,_),S})}else{const m=JS(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=YS(v),S=new cg;return Object.assign(S,_),S})}}async update(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=hE(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=fE(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=sE(e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=rE(v),S=new dg;return Object.assign(S,_),S})}else{const m=iE(e);return h=X("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=oE(v),S=new dg;return Object.assign(S,_),S})}}}function vg(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(n){return this instanceof Be?(this.v=n,this):new Be(n)}function ws(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(n,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(A){return function(C){return Promise.resolve(C).then(A,_)}}function h(A,C){o[A]&&(l[A]=function(b){return new Promise(function(M,P){a.push([A,b,M,P])>1||g(A,b)})},C&&(l[A]=C(l[A])))}function g(A,C){try{m(o[A](C))}catch(b){S(a[0][3],b)}}function m(A){A.value instanceof Be?Promise.resolve(A.value.v).then(v,_):S(a[0][2],A)}function v(A){g("next",A)}function _(A){g("throw",A)}function S(A,C){A(C),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Do(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof vg=="function"?vg(n):n[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(a){i[a]=n[a]&&function(c){return new Promise(function(h,g){c=n[a](c),l(h,g,c.done,c.value)})}}function l(a,c,h,g){Promise.resolve(g).then(function(m){a({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mE(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Sy(i)}function Sy(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function gE(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _g(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let o=0;for(;o<i;)if(n[o].role==="user")e.push(n[o]),o++;else{const l=[];let a=!0;for(;o<i&&n[o].role==="model";)l.push(n[o]),a&&!Sy(n[o])&&(a=!1),o++;a?e.push(...l):e.pop()}return e}class yE{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new vE(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vE{constructor(e,i,o,l={},a=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=l,this.history=a,this.sendPromise=Promise.resolve(),gE(a)}async sendMessage(e){var i;await this.sendPromise;const o=ht(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await l,m=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(_))!==null&&h!==void 0?h:[]);const A=m?[m]:[];this.recordHistory(o,A,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var i;await this.sendPromise;const o=ht(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const a=await l;return this.processStreamResponse(a,o)}getHistory(e=!1){const i=e?_g(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,l;return ws(this,arguments,function*(){var c,h,g,m;const v=[];try{for(var _=!0,S=Do(e),A;A=yield Be(S.next()),c=A.done,!c;_=!0){m=A.value,_=!1;const C=m;if(mE(C)){const b=(l=(o=C.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content;b!==void 0&&v.push(b)}yield yield Be(C)}}catch(C){h={error:C}}finally{try{!_&&!c&&(g=S.return)&&(yield Be(g.call(S)))}finally{if(h)throw h.error}}this.recordHistory(i,v)})}recordHistory(e,i,o){let l=[];i.length>0&&i.every(a=>a.role!==void 0)?l=i:l.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(..._g(o)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Al extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Al.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _E(n){const e={},i=d(n,["file"]);return i!=null&&f(e,["file"],i),e}function TE(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function SE(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],py(i)),e}function EE(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function AE(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],py(i)),e}function wE(n,e){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),i}function CE(n){const e={},i=d(n,["config"]);return i!=null&&wE(i,e),e}function bE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["files"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RE extends Cn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Ii(wn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=CE(e);return a=X("files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=bE(g),v=new qT;return Object.assign(v,m),v})}}async createInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_E(e);return a=X("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=TE(g),v=new BT;return Object.assign(v,m),v})}}async get(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=AE(e);return a=X("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SE(e);return a=X("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=EE(g),v=new GT;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hl(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function NE(n){const e={},i=d(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>zE(a))),f(e,["parts"],l)}const o=d(n,["role"]);return o!=null&&f(e,["role"],o),e}function ME(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function IE(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const o=d(n,["name"]);o!=null&&f(e,["name"],o);const l=d(n,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(n,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function xE(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const o=d(n,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const l=d(n,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(n,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(n,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(n,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(n,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const A=d(n,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const C=d(n,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const b=d(n,["responseSchema"]);b!=null&&f(e,["responseSchema"],b);const M=d(n,["routingConfig"]);M!=null&&f(e,["routingConfig"],M);const P=d(n,["seed"]);P!=null&&f(e,["seed"],P);const O=d(n,["speechConfig"]);O!=null&&f(e,["speechConfig"],Ey(O));const x=d(n,["stopSequences"]);x!=null&&f(e,["stopSequences"],x);const z=d(n,["temperature"]);z!=null&&f(e,["temperature"],z);const Y=d(n,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const $=d(n,["topK"]);$!=null&&f(e,["topK"],$);const J=d(n,["topP"]);if(J!=null&&f(e,["topP"],J),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function DE(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function UE(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function kE(n,e){const i={},o=d(n,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const l=d(n,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(n,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Gc(_));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const A=d(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=d(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],NE(ht(C)));const b=d(n,["tools"]);if(e!==void 0&&b!=null){let $=Ms(b);Array.isArray($)&&($=$.map(J=>JE(Ns(J)))),f(e,["setup","tools"],$)}const M=d(n,["sessionResumption"]);e!==void 0&&M!=null&&f(e,["setup","sessionResumption"],FE(M));const P=d(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&f(e,["setup","inputAudioTranscription"],P);const O=d(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","outputAudioTranscription"],O);const x=d(n,["realtimeInputConfig"]);e!==void 0&&x!=null&&f(e,["setup","realtimeInputConfig"],x);const z=d(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const Y=d(n,["proactivity"]);return e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),i}function OE(n,e){const i={},o=d(n,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],xE(o));const l=d(n,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(n,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Ey(Gc(_)));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const A=d(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=d(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],ht(C));const b=d(n,["tools"]);if(e!==void 0&&b!=null){let $=Ms(b);Array.isArray($)&&($=$.map(J=>$E(Ns(J)))),f(e,["setup","tools"],$)}const M=d(n,["sessionResumption"]);e!==void 0&&M!=null&&f(e,["setup","sessionResumption"],M);const P=d(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&f(e,["setup","inputAudioTranscription"],P);const O=d(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","outputAudioTranscription"],O);const x=d(n,["realtimeInputConfig"]);e!==void 0&&x!=null&&f(e,["setup","realtimeInputConfig"],x);const z=d(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const Y=d(n,["proactivity"]);return e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),i}function PE(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],we(n,o));const l=d(e,["config"]);return l!=null&&f(i,["config"],kE(l,i)),i}function LE(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],we(n,o));const l=d(e,["config"]);return l!=null&&f(i,["config"],OE(l,i)),i}function qE(n){const e={},i=d(n,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function BE(n){const e={},i=d(n,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["weightedPrompts"],o)}return e}function GE(n){const e={},i=d(n,["media"]);if(i!=null){let m=uy(i);Array.isArray(m)&&(m=m.map(v=>hl(v))),f(e,["mediaChunks"],m)}const o=d(n,["audio"]);o!=null&&f(e,["audio"],hl(dy(o)));const l=d(n,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(n,["video"]);a!=null&&f(e,["video"],hl(cy(a)));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const h=d(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function HE(n){const e={},i=d(n,["media"]);if(i!=null){let m=uy(i);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["mediaChunks"],m)}const o=d(n,["audio"]);o!=null&&f(e,["audio"],dy(o));const l=d(n,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(n,["video"]);a!=null&&f(e,["video"],cy(a));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const h=d(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function VE(n){const e={},i=d(n,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const o=d(n,["serverContent"]);o!=null&&f(e,["serverContent"],o);const l=d(n,["toolCall"]);l!=null&&f(e,["toolCall"],l);const a=d(n,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],a);const c=d(n,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],YE(c));const h=d(n,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(n,["sessionResumptionUpdate"]);return g!=null&&f(e,["sessionResumptionUpdate"],g),e}function zE(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const o=d(n,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(n,["fileData"]);a!=null&&f(e,["fileData"],ME(a));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const h=d(n,["inlineData"]);h!=null&&f(e,["inlineData"],hl(h));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function FE(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ey(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const o=d(n,["voiceConfig"]);if(o!=null&&f(e,["voiceConfig"],o),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function JE(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const a=d(n,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],DE(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],UE(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function $E(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>IE(S))),f(e,["functionDeclarations"],_)}const o=d(n,["retrieval"]);o!=null&&f(e,["retrieval"],o);const l=d(n,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const a=d(n,["computerUse"]);if(a!=null&&f(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function YE(n){const e={},i=d(n,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const o=d(n,["cachedContentTokenCount"]);o!=null&&f(e,["cachedContentTokenCount"],o);const l=d(n,["candidatesTokenCount"]);l!=null&&f(e,["responseTokenCount"],l);const a=d(n,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=d(n,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(n,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(n,["promptTokensDetails"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["promptTokensDetails"],A)}const m=d(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["cacheTokensDetails"],A)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["responseTokensDetails"],A)}const _=d(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["toolUsePromptTokensDetails"],A)}const S=d(n,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KE(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function QE(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const o=d(n,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],XE(o));const l=d(n,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(n,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const m=d(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(A=>A)),f(e,["safetyRatings"],S)}const _=d(n,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function XE(n){const e={},i=d(n,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["citations"],o)}return e}function ZE(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let a=$t(l);Array.isArray(a)&&(a=a.map(c=>c)),f(i,["contents"],a)}return i}function WE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["tokensInfo"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["tokensInfo"],l)}return e}function jE(n){const e={},i=d(n,["values"]);i!=null&&f(e,["values"],i);const o=d(n,["statistics"]);return o!=null&&f(e,["statistics"],eA(o)),e}function eA(n){const e={},i=d(n,["truncated"]);i!=null&&f(e,["truncated"],i);const o=d(n,["token_count"]);return o!=null&&f(e,["tokenCount"],o),e}function wl(n){const e={},i=d(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>ow(a))),f(e,["parts"],l)}const o=d(n,["role"]);return o!=null&&f(e,["role"],o),e}function tA(n){const e={},i=d(n,["controlType"]);i!=null&&f(e,["controlType"],i);const o=d(n,["enableControlImageComputation"]);return o!=null&&f(e,["computeControl"],o),e}function nA(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function iA(n,e){const i={},o=d(n,["systemInstruction"]);e!==void 0&&o!=null&&f(e,["systemInstruction"],ht(o));const l=d(n,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Ry(h))),f(e,["tools"],c)}const a=d(n,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],$A(a)),i}function sA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let c=$t(l);Array.isArray(c)&&(c=c.map(h=>wl(h))),f(i,["contents"],c)}const a=d(e,["config"]);return a!=null&&nA(a),i}function oA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let c=$t(l);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const a=d(e,["config"]);return a!=null&&iA(a,i),i}function rA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["totalTokens"]);o!=null&&f(e,["totalTokens"],o);const l=d(n,["cachedContentTokenCount"]);return l!=null&&f(e,["cachedContentTokenCount"],l),e}function lA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["totalTokens"]);return o!=null&&f(e,["totalTokens"],o),e}function aA(n,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],we(n,o)),i}function uA(n,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],we(n,o)),i}function cA(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function dA(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function fA(n,e){const i={},o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const l=d(n,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const A=d(n,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const C=d(n,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const b=d(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","compressionQuality"],b);const M=d(n,["addWatermark"]);e!==void 0&&M!=null&&f(e,["parameters","addWatermark"],M);const P=d(n,["labels"]);e!==void 0&&P!=null&&f(e,["labels"],P);const O=d(n,["editMode"]);e!==void 0&&O!=null&&f(e,["parameters","editMode"],O);const x=d(n,["baseSteps"]);return e!==void 0&&x!=null&&f(e,["parameters","editConfig","baseSteps"],x),i}function hA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["prompt"]);l!=null&&f(i,["instances[0]","prompt"],l);const a=d(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>dw(g))),f(i,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&fA(c,i),i}function pA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Cl(a))),f(e,["generatedImages"],l)}return e}function mA(n,e){const i={},o=d(n,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const l=d(n,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function gA(n,e){const i={},o=d(n,["taskType"]);e!==void 0&&o!=null&&f(e,["instances[]","task_type"],o);const l=d(n,["title"]);e!==void 0&&l!=null&&f(e,["instances[]","title"],l);const a=d(n,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(n,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),i}function yA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let h=Lc(n,l);Array.isArray(h)&&(h=h.map(g=>g)),f(i,["requests[]","content"],h)}const a=d(e,["config"]);a!=null&&mA(a,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],we(n,c)),i}function vA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let c=Lc(n,l);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["instances[]","content"],c)}const a=d(e,["config"]);return a!=null&&gA(a,i),i}function _A(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["embeddings"],a)}const l=d(n,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function TA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>jE(c))),f(e,["embeddings"],a)}const l=d(n,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function SA(n){const e={},i=d(n,["endpoint"]);i!=null&&f(e,["name"],i);const o=d(n,["deployedModelId"]);return o!=null&&f(e,["deployedModelId"],o),e}function EA(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function AA(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const o=d(n,["name"]);o!=null&&f(e,["name"],o);const l=d(n,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(n,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function wA(n,e,i){const o={},l=d(e,["systemInstruction"]);i!==void 0&&l!=null&&f(i,["systemInstruction"],wl(ht(l)));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const A=d(e,["presencePenalty"]);A!=null&&f(o,["presencePenalty"],A);const C=d(e,["frequencyPenalty"]);C!=null&&f(o,["frequencyPenalty"],C);const b=d(e,["seed"]);b!=null&&f(o,["seed"],b);const M=d(e,["responseMimeType"]);M!=null&&f(o,["responseMimeType"],M);const P=d(e,["responseSchema"]);P!=null&&f(o,["responseSchema"],qc(P));const O=d(e,["responseJsonSchema"]);if(O!=null&&f(o,["responseJsonSchema"],O),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=d(e,["safetySettings"]);if(i!==void 0&&x!=null){let fe=x;Array.isArray(fe)&&(fe=fe.map(Se=>fw(Se))),f(i,["safetySettings"],fe)}const z=d(e,["tools"]);if(i!==void 0&&z!=null){let fe=Ms(z);Array.isArray(fe)&&(fe=fe.map(Se=>vw(Ns(Se)))),f(i,["tools"],fe)}const Y=d(e,["toolConfig"]);if(i!==void 0&&Y!=null&&f(i,["toolConfig"],Y),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=d(e,["cachedContent"]);i!==void 0&&$!=null&&f(i,["cachedContent"],bn(n,$));const J=d(e,["responseModalities"]);J!=null&&f(o,["responseModalities"],J);const re=d(e,["mediaResolution"]);re!=null&&f(o,["mediaResolution"],re);const Z=d(e,["speechConfig"]);if(Z!=null&&f(o,["speechConfig"],Bc(Z)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=d(e,["thinkingConfig"]);he!=null&&f(o,["thinkingConfig"],he);const Te=d(e,["imageConfig"]);return Te!=null&&f(o,["imageConfig"],Te),o}function CA(n,e,i){const o={},l=d(e,["systemInstruction"]);i!==void 0&&l!=null&&f(i,["systemInstruction"],ht(l));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const A=d(e,["presencePenalty"]);A!=null&&f(o,["presencePenalty"],A);const C=d(e,["frequencyPenalty"]);C!=null&&f(o,["frequencyPenalty"],C);const b=d(e,["seed"]);b!=null&&f(o,["seed"],b);const M=d(e,["responseMimeType"]);M!=null&&f(o,["responseMimeType"],M);const P=d(e,["responseSchema"]);P!=null&&f(o,["responseSchema"],qc(P));const O=d(e,["responseJsonSchema"]);O!=null&&f(o,["responseJsonSchema"],O);const x=d(e,["routingConfig"]);x!=null&&f(o,["routingConfig"],x);const z=d(e,["modelSelectionConfig"]);z!=null&&f(o,["modelConfig"],z);const Y=d(e,["safetySettings"]);if(i!==void 0&&Y!=null){let q=Y;Array.isArray(q)&&(q=q.map(K=>K)),f(i,["safetySettings"],q)}const $=d(e,["tools"]);if(i!==void 0&&$!=null){let q=Ms($);Array.isArray(q)&&(q=q.map(K=>Ry(Ns(K)))),f(i,["tools"],q)}const J=d(e,["toolConfig"]);i!==void 0&&J!=null&&f(i,["toolConfig"],J);const re=d(e,["labels"]);i!==void 0&&re!=null&&f(i,["labels"],re);const Z=d(e,["cachedContent"]);i!==void 0&&Z!=null&&f(i,["cachedContent"],bn(n,Z));const he=d(e,["responseModalities"]);he!=null&&f(o,["responseModalities"],he);const Te=d(e,["mediaResolution"]);Te!=null&&f(o,["mediaResolution"],Te);const fe=d(e,["speechConfig"]);fe!=null&&f(o,["speechConfig"],by(Bc(fe)));const Se=d(e,["audioTimestamp"]);Se!=null&&f(o,["audioTimestamp"],Se);const ct=d(e,["thinkingConfig"]);ct!=null&&f(o,["thinkingConfig"],ct);const et=d(e,["imageConfig"]);return et!=null&&f(o,["imageConfig"],et),o}function Tg(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let c=$t(l);Array.isArray(c)&&(c=c.map(h=>wl(h))),f(i,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(i,["generationConfig"],wA(n,a,i)),i}function Sg(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["contents"]);if(l!=null){let c=$t(l);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(i,["generationConfig"],CA(n,a,i)),i}function Eg(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>QE(m))),f(e,["candidates"],g)}const l=d(n,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(n,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function Ag(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),f(e,["candidates"],m)}const l=d(n,["createTime"]);l!=null&&f(e,["createTime"],l);const a=d(n,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=d(n,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(n,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(n,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function bA(n,e){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const a=d(n,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(n,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const m=d(n,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const v=d(n,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=d(n,["imageSize"]);if(e!==void 0&&A!=null&&f(e,["parameters","sampleImageSize"],A),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function RA(n,e){const i={},o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const l=d(n,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const A=d(n,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const C=d(n,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const b=d(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","compressionQuality"],b);const M=d(n,["addWatermark"]);e!==void 0&&M!=null&&f(e,["parameters","addWatermark"],M);const P=d(n,["labels"]);e!==void 0&&P!=null&&f(e,["labels"],P);const O=d(n,["imageSize"]);e!==void 0&&O!=null&&f(e,["parameters","sampleImageSize"],O);const x=d(n,["enhancePrompt"]);return e!==void 0&&x!=null&&f(e,["parameters","enhancePrompt"],x),i}function NA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["prompt"]);l!=null&&f(i,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&bA(a,i),i}function MA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["prompt"]);l!=null&&f(i,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&RA(a,i),i}function IA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>VA(c))),f(e,["generatedImages"],a)}const l=d(n,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],wy(l)),e}function xA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Cl(c))),f(e,["generatedImages"],a)}const l=d(n,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],Cy(l)),e}function DA(n,e){const i={},o=d(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(n,["durationSeconds"]);if(e!==void 0&&l!=null&&f(e,["parameters","durationSeconds"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const c=d(n,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(n,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const m=d(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],bl(v));const _=d(n,["referenceImages"]);if(e!==void 0&&_!=null){let S=_;Array.isArray(S)&&(S=S.map(A=>xw(A))),f(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function UA(n,e){const i={},o=d(n,["numberOfVideos"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const a=d(n,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(n,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const m=d(n,["resolution"]);e!==void 0&&m!=null&&f(e,["parameters","resolution"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(n,["pubsubTopic"]);e!==void 0&&_!=null&&f(e,["parameters","pubsubTopic"],_);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const A=d(n,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const C=d(n,["generateAudio"]);e!==void 0&&C!=null&&f(e,["parameters","generateAudio"],C);const b=d(n,["lastFrame"]);e!==void 0&&b!=null&&f(e,["instances[0]","lastFrame"],jt(b));const M=d(n,["referenceImages"]);if(e!==void 0&&M!=null){let x=M;Array.isArray(x)&&(x=x.map(z=>Dw(z))),f(e,["instances[0]","referenceImages"],x)}const P=d(n,["mask"]);e!==void 0&&P!=null&&f(e,["instances[0]","mask"],Iw(P));const O=d(n,["compressionQuality"]);return e!==void 0&&O!=null&&f(e,["parameters","compressionQuality"],O),i}function kA(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],qA(c)),e}function OA(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["response"]);return c!=null&&f(e,["response"],BA(c)),e}function PA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["prompt"]);l!=null&&f(i,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],bl(a));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],Ny(c));const h=d(e,["source"]);h!=null&&GA(h,i);const g=d(e,["config"]);return g!=null&&DA(g,i),i}function LA(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["prompt"]);l!=null&&f(i,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],jt(a));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],My(c));const h=d(e,["source"]);h!=null&&HA(h,i);const g=d(e,["config"]);return g!=null&&UA(g,i),i}function qA(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>FA(c))),f(e,["generatedVideos"],a)}const o=d(n,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(n,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function BA(n){const e={},i=d(n,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>JA(c))),f(e,["generatedVideos"],a)}const o=d(n,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(n,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function GA(n,e){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(n,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],bl(l));const a=d(n,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],Ny(a)),i}function HA(n,e){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(n,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],jt(l));const a=d(n,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],My(a)),i}function VA(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],ZA(i));const o=d(n,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const l=d(n,["_self"]);return l!=null&&f(e,["safetyAttributes"],wy(l)),e}function Cl(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],Ay(i));const o=d(n,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const l=d(n,["_self"]);l!=null&&f(e,["safetyAttributes"],Cy(l));const a=d(n,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function zA(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["mask"],Ay(i));const o=d(n,["labels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["labels"],l)}return e}function FA(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],Nw(i)),e}function JA(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],Mw(i)),e}function $A(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const o=d(n,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const l=d(n,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(n,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(n,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(n,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(n,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const A=d(n,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const C=d(n,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const b=d(n,["responseSchema"]);b!=null&&f(e,["responseSchema"],b);const M=d(n,["routingConfig"]);M!=null&&f(e,["routingConfig"],M);const P=d(n,["seed"]);P!=null&&f(e,["seed"],P);const O=d(n,["speechConfig"]);O!=null&&f(e,["speechConfig"],by(O));const x=d(n,["stopSequences"]);x!=null&&f(e,["stopSequences"],x);const z=d(n,["temperature"]);z!=null&&f(e,["temperature"],z);const Y=d(n,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const $=d(n,["topK"]);$!=null&&f(e,["topK"],$);const J=d(n,["topP"]);if(J!=null&&f(e,["topP"],J),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YA(n,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],we(n,o)),i}function KA(n,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],we(n,o)),i}function QA(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function XA(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function ZA(n){const e={},i=d(n,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],ti(i));const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Ay(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const o=d(n,["bytesBase64Encoded"]);o!=null&&f(e,["imageBytes"],ti(o));const l=d(n,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function bl(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],ti(i));const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function jt(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const o=d(n,["imageBytes"]);o!=null&&f(e,["bytesBase64Encoded"],ti(o));const l=d(n,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function WA(n,e,i){const o={},l=d(e,["pageSize"]);i!==void 0&&l!=null&&f(i,["_query","pageSize"],l);const a=d(e,["pageToken"]);i!==void 0&&a!=null&&f(i,["_query","pageToken"],a);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],my(n,h)),o}function jA(n,e,i){const o={},l=d(e,["pageSize"]);i!==void 0&&l!=null&&f(i,["_query","pageSize"],l);const a=d(e,["pageToken"]);i!==void 0&&a!=null&&f(i,["_query","pageToken"],a);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],my(n,h)),o}function ew(n,e){const i={},o=d(e,["config"]);return o!=null&&WA(n,o,i),i}function tw(n,e){const i={},o=d(e,["config"]);return o!=null&&jA(n,o,i),i}function nw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["_self"]);if(l!=null){let a=gy(l);Array.isArray(a)&&(a=a.map(c=>pc(c))),f(e,["models"],a)}return e}function iw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["_self"]);if(l!=null){let a=gy(l);Array.isArray(a)&&(a=a.map(c=>mc(c))),f(e,["models"],a)}return e}function sw(n){const e={},i=d(n,["maskMode"]);i!=null&&f(e,["maskMode"],i);const o=d(n,["segmentationClasses"]);o!=null&&f(e,["maskClasses"],o);const l=d(n,["maskDilation"]);return l!=null&&f(e,["dilation"],l),e}function pc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["displayName"]);o!=null&&f(e,["displayName"],o);const l=d(n,["description"]);l!=null&&f(e,["description"],l);const a=d(n,["version"]);a!=null&&f(e,["version"],a);const c=d(n,["_self"]);c!=null&&f(e,["tunedModelInfo"],_w(c));const h=d(n,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(n,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const m=d(n,["supportedGenerationMethods"]);m!=null&&f(e,["supportedActions"],m);const v=d(n,["temperature"]);v!=null&&f(e,["temperature"],v);const _=d(n,["maxTemperature"]);_!=null&&f(e,["maxTemperature"],_);const S=d(n,["topP"]);S!=null&&f(e,["topP"],S);const A=d(n,["topK"]);A!=null&&f(e,["topK"],A);const C=d(n,["thinking"]);return C!=null&&f(e,["thinking"],C),e}function mc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["displayName"]);o!=null&&f(e,["displayName"],o);const l=d(n,["description"]);l!=null&&f(e,["description"],l);const a=d(n,["versionId"]);a!=null&&f(e,["version"],a);const c=d(n,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>SA(S))),f(e,["endpoints"],_)}const h=d(n,["labels"]);h!=null&&f(e,["labels"],h);const g=d(n,["_self"]);g!=null&&f(e,["tunedModelInfo"],Tw(g));const m=d(n,["defaultCheckpointId"]);m!=null&&f(e,["defaultCheckpointId"],m);const v=d(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>S)),f(e,["checkpoints"],_)}return e}function ow(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const o=d(n,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(n,["fileData"]);a!=null&&f(e,["fileData"],EA(a));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const h=d(n,["inlineData"]);h!=null&&f(e,["inlineData"],KE(h));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function rw(n){const e={},i=d(n,["productImage"]);return i!=null&&f(e,["image"],jt(i)),e}function lw(n,e){const i={},o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const l=d(n,["baseSteps"]);e!==void 0&&l!=null&&f(e,["parameters","baseSteps"],l);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=d(n,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const m=d(n,["addWatermark"]);e!==void 0&&m!=null&&f(e,["parameters","addWatermark"],m);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const _=d(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const A=d(n,["labels"]);return e!==void 0&&A!=null&&f(e,["labels"],A),i}function aw(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["source"]);l!=null&&cw(l,i);const a=d(e,["config"]);return a!=null&&lw(a,i),i}function uw(n){const e={},i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Cl(l))),f(e,["generatedImages"],o)}return e}function cw(n,e){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(n,["personImage"]);e!==void 0&&l!=null&&f(e,["instances[0]","personImage","image"],jt(l));const a=d(n,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>rw(h))),f(e,["instances[0]","productImages"],c)}return i}function dw(n){const e={},i=d(n,["referenceImage"]);i!=null&&f(e,["referenceImage"],jt(i));const o=d(n,["referenceId"]);o!=null&&f(e,["referenceId"],o);const l=d(n,["referenceType"]);l!=null&&f(e,["referenceType"],l);const a=d(n,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],sw(a));const c=d(n,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],tA(c));const h=d(n,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(n,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function wy(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const o=d(n,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const l=d(n,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function Cy(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const o=d(n,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const l=d(n,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function fw(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(n,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function hw(n){const e={},i=d(n,["image"]);return i!=null&&f(e,["image"],jt(i)),e}function pw(n,e){const i={},o=d(n,["mode"]);e!==void 0&&o!=null&&f(e,["parameters","mode"],o);const l=d(n,["maxPredictions"]);e!==void 0&&l!=null&&f(e,["parameters","maxPredictions"],l);const a=d(n,["confidenceThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","confidenceThreshold"],a);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(n,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function mw(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["source"]);l!=null&&yw(l,i);const a=d(e,["config"]);return a!=null&&pw(a,i),i}function gw(n){const e={},i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>zA(l))),f(e,["generatedMasks"],o)}return e}function yw(n,e){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(n,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],jt(l));const a=d(n,["scribbleImage"]);return e!==void 0&&a!=null&&f(e,["instances[0]","scribble"],hw(a)),i}function by(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const o=d(n,["voiceConfig"]);if(o!=null&&f(e,["voiceConfig"],o),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function vw(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const a=d(n,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],QA(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],XA(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Ry(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>AA(S))),f(e,["functionDeclarations"],_)}const o=d(n,["retrieval"]);o!=null&&f(e,["retrieval"],o);const l=d(n,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const a=d(n,["computerUse"]);if(a!=null&&f(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function _w(n){const e={},i=d(n,["baseModel"]);i!=null&&f(e,["baseModel"],i);const o=d(n,["createTime"]);o!=null&&f(e,["createTime"],o);const l=d(n,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Tw(n){const e={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const o=d(n,["createTime"]);o!=null&&f(e,["createTime"],o);const l=d(n,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Sw(n,e){const i={},o=d(n,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const l=d(n,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),i}function Ew(n,e){const i={},o=d(n,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const l=d(n,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),i}function Aw(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","name"],we(n,o));const l=d(e,["config"]);return l!=null&&Sw(l,i),i}function ww(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["config"]);return l!=null&&Ew(l,i),i}function Cw(n,e){const i={},o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const l=d(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const a=d(n,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(n,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const m=d(n,["enhanceInputImage"]);e!==void 0&&m!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(n,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&f(e,["parameters","sampleCount"],S);const A=d(n,["mode"]);return e!==void 0&&A!=null&&f(e,["parameters","mode"],A),i}function bw(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],we(n,o));const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],jt(l));const a=d(e,["upscaleFactor"]);a!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],a);const c=d(e,["config"]);return c!=null&&Cw(c,i),i}function Rw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Cl(a))),f(e,["generatedImages"],l)}return e}function Nw(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const o=d(n,["encodedVideo"]);o!=null&&f(e,["videoBytes"],ti(o));const l=d(n,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function Mw(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const o=d(n,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],ti(o));const l=d(n,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function Iw(n){const e={},i=d(n,["image"]);i!=null&&f(e,["_self"],jt(i));const o=d(n,["maskMode"]);return o!=null&&f(e,["maskMode"],o),e}function xw(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],bl(i));const o=d(n,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function Dw(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],jt(i));const o=d(n,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function Ny(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const o=d(n,["videoBytes"]);o!=null&&f(e,["encodedVideo"],ti(o));const l=d(n,["mimeType"]);return l!=null&&f(e,["encoding"],l),e}function My(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["gcsUri"],i);const o=d(n,["videoBytes"]);o!=null&&f(e,["bytesBase64Encoded"],ti(o));const l=d(n,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uw="Content-Type",kw="X-Server-Timeout",Ow="User-Agent",gc="x-goog-api-client",Pw="1.29.1",Lw=`google-genai-sdk/${Pw}`,qw="v1beta1",Bw="v1beta",wg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Gw{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:qw,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Bw,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const l=[this.getRequestUrlInternal(i)];return o&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))l.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,i,l.toString(),e.abortSignal),this.unaryApiCall(l,a,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[l,a]of Object.entries(i))typeof a=="object"?o[l]=Object.assign(Object.assign({},o[l]),a):a!==void 0&&(o[l]=a);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,o);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,i,l.toString(),e.abortSignal),this.streamApiCall(l,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,l){if(i&&i.timeout||l){const a=new AbortController,c=a.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>a.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}l&&l.addEventListener("abort",()=>{a.abort()}),e.signal=c}return i&&i.extraBody!==null&&Hw(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async l=>(await Cg(l),new dc(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async l=>(await Cg(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){var i;return ws(this,arguments,function*(){const l=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:g}=yield Be(l.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(g,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const S=JSON.parse(JSON.stringify(_.error)),A=S.status,C=S.code,b=`got status: ${A}. ${JSON.stringify(_)}`;if(C>=400&&C<600)throw new Al({message:b,status:C})}}catch(_){if(_.name==="ApiError")throw _}c+=m;let v=c.match(wg);for(;v;){const _=v[1];try{const S=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Be(new dc(S)),c=c.slice(v[0].length),v=c.match(wg)}catch(S){throw new Error(`exception parsing stream chunk ${_}. ${S}`)}}}}finally{l.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=Lw+" "+this.clientOptions.userAgentExtra;return e[Ow]=i,e[gc]=i,e[Uw]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[l,a]of Object.entries(e.headers))o.append(l,a);e.timeout&&e.timeout>0&&o.append(kw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const l={};i!=null&&(l.mimeType=i.mimeType,l.name=i.name,l.displayName=i.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);l.sizeBytes=String(c.size);const h=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;const g={file:l},m=this.getFileName(e),v=X("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,l.sizeBytes,l.mimeType,m,g,i==null?void 0:i.httpOptions);return a.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var l;const a=this.clientOptions.uploader,c=await a.stat(i),h=String(c.size),g=(l=o==null?void 0:o.mimeType)!==null&&l!==void 0?l:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};o!=null&&o.customMetadata&&(_.customMetadata=o.customMetadata),o!=null&&o.chunkingConfig&&(_.chunkingConfig=o.chunkingConfig);const S=await this.fetchUploadUrl(m,h,g,v,_,o==null?void 0:o.httpOptions);return a.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,l,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},l?{"X-Goog-Upload-File-Name":l}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Cg(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const l=JSON.stringify(o);throw i>=400&&i<600?new Al({message:l,status:i}):new Error(l)}}function Hw(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))i=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],v=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const l=o(i,e);n.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vw="mcp_used/unknown";let zw=!1;function Iy(n){for(const e of n)if(Fw(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zw}function xy(n){var e;const i=(e=n[gc])!==null&&e!==void 0?e:"";n[gc]=(i+` ${Vw}`).trimStart()}function Fw(n){return n!==null&&typeof n=="object"&&n instanceof Hc}function Jw(n,e=100){return ws(this,arguments,function*(){let o,l=0;for(;l<e;){const a=yield Be(n.listTools({cursor:o}));for(const c of a.tools)yield yield Be(c),l++;if(!a.nextCursor)break;o=a.nextCursor}})}class Hc{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Hc(e,i)}async initialize(){var e,i,o,l;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,Do(Jw(v))),m;m=await g.next(),e=m.done,!e;h=!0){l=m.value,h=!1;const _=l;c.push(_);const S=_.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(_){i={error:_}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),XT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await l.callTool({name:o.name,arguments:o.args},void 0,a);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $w(n,e,i){const o=new VT;let l;i.data instanceof Blob?l=JSON.parse(await i.data.text()):l=JSON.parse(i.data),Object.assign(o,l),e(o)}class Yw{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=Xw(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(x=>{m=x}),_=e.callbacks,S=function(){m({})},A=this.apiClient,C={onopen:S,onmessage:x=>{$w(A,_.onmessage,x)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(x){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(x){}},b=this.webSocketFactory.create(g,Qw(c),C);b.connect(),await v;const O={setup:{model:we(this.apiClient,e.model)}};return b.send(JSON.stringify(O)),new Kw(b,this.apiClient)}}class Kw{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=BE(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=qE(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Es.PLAY)}pause(){this.sendPlaybackControl(Es.PAUSE)}stop(){this.sendPlaybackControl(Es.STOP)}resetContext(){this.sendPlaybackControl(Es.RESET_CONTEXT)}close(){this.conn.close()}}function Qw(n){const e={};return n.forEach((i,o)=>{e[o]=i}),e}function Xw(n){const e=new Headers;for(const[i,o]of Object.entries(n))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zw="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ww(n,e,i){const o=new HT;let l;i.data instanceof Blob?l=await i.data.text():i.data instanceof ArrayBuffer?l=new TextDecoder().decode(i.data):l=i.data;const a=JSON.parse(l);if(n.isVertexAI()){const c=VE(a);Object.assign(o,c)}else Object.assign(o,a);e(o)}class jw{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new Yw(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,l,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Iy(e.config.tools)&&xy(_);const S=iC(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const Z=this.apiClient.getApiKey();let he="BidiGenerateContent",Te="key";Z!=null&&Z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),he="BidiGenerateContentConstrained",Te="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${he}?${Te}=${Z}`}let A=()=>{};const C=new Promise(Z=>{A=Z}),b=e.callbacks,M=function(){var Z;(Z=b==null?void 0:b.onopen)===null||Z===void 0||Z.call(b),A({})},P=this.apiClient,O={onopen:M,onmessage:Z=>{Ww(P,b.onmessage,Z)},onerror:(i=b==null?void 0:b.onerror)!==null&&i!==void 0?i:function(Z){},onclose:(o=b==null?void 0:b.onclose)!==null&&o!==void 0?o:function(Z){}},x=this.webSocketFactory.create(v,nC(S),O);x.connect(),await C;let z=we(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const Z=this.apiClient.getProject(),he=this.apiClient.getLocation();z=`projects/${Z}/locations/${he}/`+z}let Y={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[pl.AUDIO]}:e.config.responseModalities=[pl.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],J=[];for(const Z of $)if(this.isCallableTool(Z)){const he=Z;J.push(await he.tool())}else J.push(Z);J.length>0&&(e.config.tools=J);const re={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=LE(this.apiClient,re):Y=PE(this.apiClient,re),delete Y.config,x.send(JSON.stringify(Y)),new tC(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const eC={turnComplete:!0};class tC{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=$t(i.turns),e.isVertexAI()||(o=o.map(l=>wl(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Zw)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},eC),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:HE(e)}:i={realtimeInput:GE(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function nC(n){const e={};return n.forEach((i,o)=>{e[o]=i}),e}function iC(n){const e=new Headers;for(const[i,o]of Object.entries(n))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bg=10;function Rg(n){var e,i,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const c of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if(Cs(c)){l=!0;break}if(!l)return!0;const a=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Cs(n){return"callTool"in n&&typeof n.callTool=="function"}function sC(n){var e,i,o;return(o=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(l=>Cs(l)))!==null&&o!==void 0?o:!1}function Ng(n){var e;const i=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,l)=>{if(Cs(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&i.push(l)}),i}function Mg(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oC extends Cn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,l,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!sC(i)||Rg(i.config))return await this.generateContentInternal(g);const m=Ng(i);if(m.length>0){const b=m.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let v,_;const S=$t(g.contents),A=(a=(l=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&a!==void 0?a:bg;let C=0;for(;C<A&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const b=v.candidates[0].content,M=[];for(const P of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Cs(P)){const x=await P.callTool(v.functionCalls);M.push(...x)}C++,_={role:"user",parts:M},g.contents=$t(g.contents),g.contents.push(b),g.contents.push(_),Mg(g.config)&&(S.push(b),S.push(_))}return Mg(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),Rg(i.config)){const l=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(l)}const o=Ng(i);if(o.length>0){const l=o.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${l}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var l;let a;const c=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Ii(wn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const l={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(l)},this.generateVideos=async i=>{var o,l,a,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((l=i.video)===null||l===void 0)&&l.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(a=i.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,l;const a=(i=e.config)===null||i===void 0?void 0:i.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>Cs(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&Iy(e.config.tools)){const g=(l=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),xy(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var i,o,l;const a=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(Cs(c)){const h=c,g=await h.tool();for(const m of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,h)}}return a}async processAfcStream(e){var i,o,l;const a=(l=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:bg;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,v,_){var S,A;return ws(this,arguments,function*(){for(var C,b,M,P;h<a;){c&&(h++,c=!1);const Y=yield Be(m.processParamsMaybeAddMcpUsage(_)),$=yield Be(m.generateContentStreamInternal(Y)),J=[],re=[];try{for(var O=!0,x=(b=void 0,Do($)),z;z=yield Be(x.next()),C=z.done,!C;O=!0){P=z.value,O=!1;const Z=P;if(yield yield Be(Z),Z.candidates&&(!((S=Z.candidates[0])===null||S===void 0)&&S.content)){re.push(Z.candidates[0].content);for(const he of(A=Z.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(h<a&&he.functionCall){if(!he.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(he.functionCall.name)){const Te=yield Be(v.get(he.functionCall.name).callTool([he.functionCall]));J.push(...Te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${he.functionCall.name}`)}}}}catch(Z){b={error:Z}}finally{try{!O&&!C&&(M=x.return)&&(yield Be(M.call(x)))}finally{if(b)throw b.error}}if(J.length>0){c=!0;const Z=new Mo;Z.candidates=[{content:{role:"user",parts:J}}],yield yield Be(Z);const he=[];he.push(...re),he.push({role:"user",parts:J});const Te=$t(_.contents).concat(he);_.contents=Te}else break}})})(this,g,e)}async generateContentInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Sg(this.apiClient,e);return h=X("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Ag(v),S=new Mo;return Object.assign(S,_),S})}else{const m=Tg(this.apiClient,e);return h=X("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Eg(v),S=new Mo;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Sg(this.apiClient,e);return h=X("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return ws(this,arguments,function*(){var S,A,C,b;try{for(var M=!0,P=Do(_),O;O=yield Be(P.next()),S=O.done,!S;M=!0){b=O.value,M=!1;const x=b,z=Ag(yield Be(x.json()));z.sdkHttpResponse={headers:x.headers};const Y=new Mo;Object.assign(Y,z),yield yield Be(Y)}}catch(x){A={error:x}}finally{try{!M&&!S&&(C=P.return)&&(yield Be(C.call(P)))}finally{if(A)throw A.error}}})})}else{const m=Tg(this.apiClient,e);return h=X("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(_){return ws(this,arguments,function*(){var S,A,C,b;try{for(var M=!0,P=Do(_),O;O=yield Be(P.next()),S=O.done,!S;M=!0){b=O.value,M=!1;const x=b,z=Eg(yield Be(x.json()));z.sdkHttpResponse={headers:x.headers};const Y=new Mo;Object.assign(Y,z),yield yield Be(Y)}}catch(x){A={error:x}}finally{try{!M&&!S&&(C=P.return)&&(yield Be(C.call(P)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=vA(this.apiClient,e);return h=X("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=TA(v),S=new sg;return Object.assign(S,_),S})}else{const m=yA(this.apiClient,e);return h=X("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=_A(v),S=new sg;return Object.assign(S,_),S})}}async generateImagesInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=MA(this.apiClient,e);return h=X("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=xA(v),S=new og;return Object.assign(S,_),S})}else{const m=NA(this.apiClient,e);return h=X("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=IA(v),S=new og;return Object.assign(S,_),S})}}async editImageInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=hA(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=pA(g),v=new IT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=bw(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=Rw(g),v=new xT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=aw(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=uw(g),v=new DT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=mw(this.apiClient,e);return a=X("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=gw(g),v=new UT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=KA(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>mc(v))}else{const m=YA(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>pc(v))}}async listInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=tw(this.apiClient,e);return h=X("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=iw(v),S=new rg;return Object.assign(S,_),S})}else{const m=ew(this.apiClient,e);return h=X("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=nw(v),S=new rg;return Object.assign(S,_),S})}}async update(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ww(this.apiClient,e);return h=X("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>mc(v))}else{const m=Aw(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>pc(v))}}async delete(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=uA(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=dA(v),S=new lg;return Object.assign(S,_),S})}else{const m=aA(this.apiClient,e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=cA(v),S=new lg;return Object.assign(S,_),S})}}async countTokens(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=oA(this.apiClient,e);return h=X("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=lA(v),S=new ag;return Object.assign(S,_),S})}else{const m=sA(this.apiClient,e);return h=X("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=rA(v),S=new ag;return Object.assign(S,_),S})}}async computeTokens(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=ZE(this.apiClient,e);return a=X("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=WE(g),v=new kT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=LA(this.apiClient,e);return h=X("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const _=OA(v),S=new ml;return Object.assign(S,_),S})}else{const m=PA(this.apiClient,e);return h=X("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const _=kA(v),S=new ml;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rC extends Cn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:a}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:a}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=wT(e);return h=X("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=AT(e);return h=X("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=gT(e);return a=X("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lC(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function aC(n){const e={},i=d(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>gC(a))),f(e,["parts"],l)}const o=d(n,["role"]);return o!=null&&f(e,["role"],o),e}function uC(n,e,i){const o={},l=d(e,["expireTime"]);i!==void 0&&l!=null&&f(i,["expireTime"],l);const a=d(e,["newSessionExpireTime"]);i!==void 0&&a!=null&&f(i,["newSessionExpireTime"],a);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const h=d(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&f(i,["bidiGenerateContentSetup"],mC(n,h));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),o}function cC(n,e){const i={},o=d(e,["config"]);return o!=null&&f(i,["config"],uC(n,o,i)),i}function dC(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(n,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function fC(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function hC(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function pC(n,e){const i={},o=d(n,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const l=d(n,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(n,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Gc(_));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const A=d(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=d(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],aC(ht(C)));const b=d(n,["tools"]);if(e!==void 0&&b!=null){let $=Ms(b);Array.isArray($)&&($=$.map(J=>vC(Ns(J)))),f(e,["setup","tools"],$)}const M=d(n,["sessionResumption"]);e!==void 0&&M!=null&&f(e,["setup","sessionResumption"],yC(M));const P=d(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&f(e,["setup","inputAudioTranscription"],P);const O=d(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","outputAudioTranscription"],O);const x=d(n,["realtimeInputConfig"]);e!==void 0&&x!=null&&f(e,["setup","realtimeInputConfig"],x);const z=d(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const Y=d(n,["proactivity"]);return e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),i}function mC(n,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],we(n,o));const l=d(e,["config"]);return l!=null&&f(i,["config"],pC(l,i)),i}function gC(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const o=d(n,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(n,["fileData"]);a!=null&&f(e,["fileData"],dC(a));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const h=d(n,["inlineData"]);h!=null&&f(e,["inlineData"],lC(h));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function yC(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vC(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(n,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const a=d(n,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],fC(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],hC(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _C(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const o=n[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const l=Object.keys(o).map(a=>`${i}.${a}`);e.push(...l)}else e.push(i)}return e.join(",")}function TC(n,e){let i=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,i=a):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const l=n.fieldMask;if(i){const a=_C(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];l.length>0&&(h=l.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?n.fieldMask=l.join(","):delete n.fieldMask;return n}class SC extends Cn{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=cC(this.apiClient,e);a=X("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=TC(h,e.config);return l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EC(n,e){const i={},o=d(n,["displayName"]);return e!==void 0&&o!=null&&f(e,["displayName"],o),i}function AC(n){const e={},i=d(n,["config"]);return i!=null&&EC(i,e),e}function wC(n,e){const i={},o=d(n,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),i}function CC(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const o=d(n,["config"]);return o!=null&&wC(o,e),e}function bC(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function RC(n,e){const i={},o=d(n,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["customMetadata"],a)}const l=d(n,["chunkingConfig"]);return e!==void 0&&l!=null&&f(e,["chunkingConfig"],l),i}function NC(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const o=d(n,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(n,["done"]);l!=null&&f(e,["done"],l);const a=d(n,["error"]);a!=null&&f(e,["error"],a);const c=d(n,["response"]);return c!=null&&f(e,["response"],IC(c)),e}function MC(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const o=d(n,["fileName"]);o!=null&&f(e,["fileName"],o);const l=d(n,["config"]);return l!=null&&RC(l,e),e}function IC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["parent"]);o!=null&&f(e,["parent"],o);const l=d(n,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function xC(n,e){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),i}function DC(n){const e={},i=d(n,["config"]);return i!=null&&xC(i,e),e}function UC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["fileSearchStores"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["fileSearchStores"],a)}return e}function kC(n,e){const i={},o=d(n,["mimeType"]);e!==void 0&&o!=null&&f(e,["mimeType"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(n,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function OC(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const o=d(n,["config"]);return o!=null&&kC(o,e),e}function PC(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LC(n,e){const i={},o=d(n,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),i}function qC(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const o=d(n,["config"]);return o!=null&&LC(o,e),e}function BC(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function GC(n,e){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),i}function HC(n){const e={},i=d(n,["parent"]);i!=null&&f(e,["_url","parent"],i);const o=d(n,["config"]);return o!=null&&GC(o,e),e}function VC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(n,["documents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zC extends Cn{constructor(e){super(),this.apiClient=e,this.list=async i=>new Ii(wn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=BC(e);return a=X("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var i,o;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qC(e);l=X("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HC(e);return a=X("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=VC(g),v=new OT;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FC extends Cn{constructor(e,i=new zC(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new Ii(wn.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=AC(e);return a=X("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bC(e);return a=X("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var i,o;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=CC(e);l=X("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=DC(e);return a=X("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=UC(g),v=new PT;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=OC(e);return a=X("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=PC(g),v=new LT;return Object.assign(v,m),v})}}async importFile(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MC(e);return a=X("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=NC(g),v=new Oc;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JC(n,e){const i={},o=d(n,["name"]);return o!=null&&f(i,["_url","name"],o),i}function $C(n,e){const i={},o=d(n,["name"]);return o!=null&&f(i,["_url","name"],o),i}function YC(n,e,i){const o={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=d(n,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&f(e,["displayName"],l),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(n,["epochCount"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","epochCount"],a);const c=d(n,["learningRateMultiplier"]);if(c!=null&&f(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(n,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function KC(n,e,i){const o={};let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const A=d(n,["validationDataset"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec"],Ig(A))}else if(l==="PREFERENCE_TUNING"){const A=d(n,["validationDataset"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec"],Ig(A))}const a=d(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&f(e,["tunedModelDisplayName"],a);const c=d(n,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=d(n,["epochCount"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(h==="PREFERENCE_TUNING"){const A=d(n,["epochCount"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=d(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(g==="PREFERENCE_TUNING"){const A=d(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=d(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=d(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=d(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=d(n,["adapterSize"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=d(n,["adapterSize"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(n,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(n,["beta"]);return e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function QC(n,e){const i={},o=d(n,["baseModel"]);o!=null&&f(i,["baseModel"],o);const l=d(n,["preTunedModel"]);l!=null&&f(i,["preTunedModel"],l);const a=d(n,["trainingDataset"]);a!=null&&rb(a);const c=d(n,["config"]);return c!=null&&YC(c,i),i}function XC(n,e){const i={},o=d(n,["baseModel"]);o!=null&&f(i,["baseModel"],o);const l=d(n,["preTunedModel"]);l!=null&&f(i,["preTunedModel"],l);const a=d(n,["trainingDataset"]);a!=null&&lb(a,i,e);const c=d(n,["config"]);return c!=null&&KC(c,i,e),i}function ZC(n,e){const i={},o=d(n,["name"]);return o!=null&&f(i,["_url","name"],o),i}function WC(n,e){const i={},o=d(n,["name"]);return o!=null&&f(i,["_url","name"],o),i}function jC(n,e,i){const o={},l=d(n,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function eb(n,e,i){const o={},l=d(n,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function tb(n,e){const i={},o=d(n,["config"]);return o!=null&&jC(o,i),i}function nb(n,e){const i={},o=d(n,["config"]);return o!=null&&eb(o,i),i}function ib(n,e){const i={},o=d(n,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const l=d(n,["nextPageToken"]);l!=null&&f(i,["nextPageToken"],l);const a=d(n,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>Dy(h))),f(i,["tuningJobs"],c)}return i}function sb(n,e){const i={},o=d(n,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const l=d(n,["nextPageToken"]);l!=null&&f(i,["nextPageToken"],l);const a=d(n,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>yc(h))),f(i,["tuningJobs"],c)}return i}function ob(n,e){const i={},o=d(n,["name"]);o!=null&&f(i,["model"],o);const l=d(n,["name"]);return l!=null&&f(i,["endpoint"],l),i}function rb(n,e){const i={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(n,["examples"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),f(i,["examples","examples"],l)}return i}function lb(n,e,i){const o={};let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Dy(n,e){const i={},o=d(n,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const l=d(n,["name"]);l!=null&&f(i,["name"],l);const a=d(n,["state"]);a!=null&&f(i,["state"],hy(a));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(n,["tuningTask","startTime"]);h!=null&&f(i,["startTime"],h);const g=d(n,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const m=d(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(n,["description"]);v!=null&&f(i,["description"],v);const _=d(n,["baseModel"]);_!=null&&f(i,["baseModel"],_);const S=d(n,["_self"]);return S!=null&&f(i,["tunedModel"],ob(S)),i}function yc(n,e){const i={},o=d(n,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const l=d(n,["name"]);l!=null&&f(i,["name"],l);const a=d(n,["state"]);a!=null&&f(i,["state"],hy(a));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(n,["startTime"]);h!=null&&f(i,["startTime"],h);const g=d(n,["endTime"]);g!=null&&f(i,["endTime"],g);const m=d(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(n,["error"]);v!=null&&f(i,["error"],v);const _=d(n,["description"]);_!=null&&f(i,["description"],_);const S=d(n,["baseModel"]);S!=null&&f(i,["baseModel"],S);const A=d(n,["tunedModel"]);A!=null&&f(i,["tunedModel"],A);const C=d(n,["preTunedModel"]);C!=null&&f(i,["preTunedModel"],C);const b=d(n,["supervisedTuningSpec"]);b!=null&&f(i,["supervisedTuningSpec"],b);const M=d(n,["preferenceOptimizationSpec"]);M!=null&&f(i,["preferenceOptimizationSpec"],M);const P=d(n,["tuningDataStats"]);P!=null&&f(i,["tuningDataStats"],P);const O=d(n,["encryptionSpec"]);O!=null&&f(i,["encryptionSpec"],O);const x=d(n,["partnerModelTuningSpec"]);x!=null&&f(i,["partnerModelTuningSpec"],x);const z=d(n,["customBaseModel"]);z!=null&&f(i,["customBaseModel"],z);const Y=d(n,["experiment"]);Y!=null&&f(i,["experiment"],Y);const $=d(n,["labels"]);$!=null&&f(i,["labels"],$);const J=d(n,["outputUri"]);J!=null&&f(i,["outputUri"],J);const re=d(n,["pipelineJob"]);re!=null&&f(i,["pipelineJob"],re);const Z=d(n,["serviceAccount"]);Z!=null&&f(i,["serviceAccount"],Z);const he=d(n,["tunedModelDisplayName"]);he!=null&&f(i,["tunedModelDisplayName"],he);const Te=d(n,["veoTuningSpec"]);return Te!=null&&f(i,["veoTuningSpec"],Te),i}function ab(n,e){const i={},o=d(n,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const l=d(n,["name"]);l!=null&&f(i,["name"],l);const a=d(n,["metadata"]);a!=null&&f(i,["metadata"],a);const c=d(n,["done"]);c!=null&&f(i,["done"],c);const h=d(n,["error"]);return h!=null&&f(i,["error"],h),i}function Ig(n,e){const i={},o=d(n,["gcsUri"]);o!=null&&f(i,["validationDatasetUri"],o);const l=d(n,["vertexDatasetResource"]);return l!=null&&f(i,["validationDatasetUri"],l),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ub extends Cn{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new Ii(wn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const l={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(l.checkpointId=i.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},i),{preTunedModel:l});return a.baseModel=void 0,await this.tuneInternal(a)}else{const l=Object.assign({},i);return await this.tuneInternal(l)}else{const l=Object.assign({},i),a=await this.tuneMldevInternal(l);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:cc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=WC(e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>yc(v))}else{const m=ZC(e);return h=X("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Dy(v))}}async listInternal(e){var i,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=nb(e);return h=X("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=sb(v),S=new ug;return Object.assign(S,_),S})}else{const m=tb(e);return h=X("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ib(v),S=new ug;return Object.assign(S,_),S})}}async cancel(e){var i,o,l,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=$C(e);c=X("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=JC(e);c=X("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=XC(e,e);return a=X("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>yc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QC(e);return a=X("tunedModels",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>ab(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cb{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const db=1024*1024*8,fb=3,hb=1e3,pb=2,yl="x-goog-upload-status";async function mb(n,e,i){var o;const l=await Uy(n,e,i),a=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[yl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function gb(n,e,i){var o;const l=await Uy(n,e,i),a=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[yl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=ly(a),h=new Pc;return Object.assign(h,c),h}async function Uy(n,e,i){var o,l;let a=0,c=0,h=new dc(new Response),g="upload";for(a=n.size;c<a;){const m=Math.min(db,a-c),v=n.slice(c,c+m);c+m>=a&&(g+=", finalize");let _=0,S=hb;for(;_<fb&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[yl]));)_++,await vb(S),S=S*pb;if(c+=m,((l=h==null?void 0:h.headers)===null||l===void 0?void 0:l[yl])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function yb(n){return{size:n.size,type:n.type}}function vb(n){return new Promise(e=>setTimeout(e,n))}class _b{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mb(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gb(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yb(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tb{create(e,i,o){return new Sb(e,i,o)}}class Sb{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xg="x-goog-api-key";class Eb{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(xg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ab="gl-node/";class wb{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=pT(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const l=new Eb(this.apiKey);this.apiClient=new Gw({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Ab+"web",uploader:new _b,downloader:new cb}),this.models=new oC(this.apiClient),this.live=new jw(this.apiClient,l,new Tb),this.batches=new BS(this.apiClient),this.chats=new yE(this.models,this.apiClient),this.caches=new pE(this.apiClient),this.files=new RE(this.apiClient),this.operations=new rC(this.apiClient),this.authTokens=new SC(this.apiClient),this.tunings=new ub(this.apiClient),this.fileSearchStores=new FC(this.apiClient)}}const Cb=({name:n,userType:e,onLogout:i})=>{const[o,l]=Pe.useState(!1);return B.jsxs("header",{className:"bg-brand-med-dark/50 backdrop-blur-sm p-4 border-b border-brand-border shadow-lg sticky top-0 z-10",children:[B.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[B.jsx("div",{className:"flex items-center",children:B.jsx("div",{className:"w-48",children:B.jsx("img",{src:"https://boboz.co.ke/wp-content/uploads/2025/11/amicus_1_logo.png",alt:"Amicus Pro Logo",className:"w-full h-auto"})})}),B.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[B.jsx("a",{href:"#",className:"text-sm font-medium text-pink-400","aria-current":"page",children:"Ask a Lawyer"}),B.jsx("a",{href:"#",className:"text-sm font-medium text-gray-300 hover:text-pink-400 transition-colors duration-200",children:"Find a Lawyer"}),B.jsx("a",{href:"#",className:"text-sm font-medium text-gray-300 hover:text-pink-400 transition-colors duration-200",children:"Be a Lawyer"}),n&&B.jsx("button",{onClick:i,className:"bg-red-600/80 text-white font-semibold rounded-lg px-3 py-1.5 text-xs transition-all duration-200 ease-in-out enabled:hover:bg-red-500 enabled:active:scale-95",children:"Logout"})]}),B.jsx("div",{className:"md:hidden",children:B.jsxs("button",{onClick:()=>l(!o),className:"text-gray-300 hover:text-white focus:outline-none focus:text-white","aria-controls":"mobile-menu","aria-expanded":o,"aria-label":"Toggle menu",children:[B.jsx("span",{className:"sr-only",children:"Open main menu"}),o?B.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):B.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]}),B.jsx("div",{className:`${o?"block":"hidden"} md:hidden transition-all duration-300`,id:"mobile-menu",children:B.jsxs("div",{className:"pt-2 pb-3 space-y-1 sm:px-3",children:[B.jsx("a",{href:"#",className:"text-pink-400 block px-3 py-2 rounded-md text-base font-medium","aria-current":"page",children:"Ask a Lawyer"}),B.jsx("a",{href:"#",className:"text-gray-300 hover:text-white hover:bg-brand-med/50 block px-3 py-2 rounded-md text-base font-medium",children:"Find a Lawyer"}),B.jsx("a",{href:"#",className:"text-gray-300 hover:text-white hover:bg-brand-med/50 block px-3 py-2 rounded-md text-base font-medium",children:"Be a Lawyer"}),n&&B.jsx("div",{className:"border-t border-brand-border pt-4 mt-4",children:B.jsx("button",{onClick:i,className:"w-full text-left bg-red-600/80 text-white font-semibold rounded-lg px-3 py-2 text-base transition-all duration-200 ease-in-out enabled:hover:bg-red-500 enabled:active:scale-95",children:"Logout"})})]})})]})},bb=({onSendMessage:n,isLoading:e})=>{const[i,o]=Pe.useState(""),l=Pe.useRef(null),a=h=>{h.preventDefault(),i.trim()&&!e&&(n(i.trim()),o(""))},c=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),a(h))};return Pe.useEffect(()=>{l.current&&(l.current.style.height="auto",l.current.style.height=`${l.current.scrollHeight}px`)},[i]),B.jsx("div",{className:"bg-brand-med-dark p-4 border-t border-brand-border sticky bottom-0",children:B.jsx("div",{className:"max-w-4xl mx-auto",children:B.jsxs("form",{onSubmit:a,className:"flex items-start space-x-4",children:[B.jsx("textarea",{ref:l,value:i,onChange:h=>o(h.target.value),onKeyDown:c,placeholder:"Type your question here.",className:"flex-1 bg-brand-med text-gray-200 rounded-lg p-3 resize-none focus:ring-2 focus:ring-pink-500 focus:outline-none transition-shadow duration-200 max-h-40",rows:1,disabled:e,autoFocus:!0}),B.jsx("button",{type:"submit",disabled:e||!i.trim(),className:"bg-pink-600 text-white font-semibold rounded-lg px-5 py-3 transition-all duration-200 ease-in-out enabled:hover:bg-pink-500 enabled:active:scale-95 disabled:bg-brand-light disabled:cursor-not-allowed flex items-center justify-center",children:e?B.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[B.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),B.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:B.jsx("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.925A1.5 1.5 0 005.135 9.25h6.115a.75.75 0 010 1.5H5.135a1.5 1.5 0 00-1.442 1.086L2.279 16.76a.75.75 0 00.95.826l14.5-4.25a.75.75 0 000-1.352L3.105 2.289z"})})})]})})})};var Mi=(n=>(n.USER="user",n.MODEL="model",n))(Mi||{});const vc=()=>B.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-brand-med rounded-full flex items-center justify-center border-2 border-brand-border",children:B.jsx("img",{src:"https://boboz.co.ke/wp-content/uploads/2025/11/matt_icon.png",alt:"Matt AI Avatar",className:"w-full h-full object-contain rounded-full","aria-label":"AI assistant avatar"})}),ju=({content:n})=>{const e=()=>{let i=n.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return i=i.replace(/\*(.*?)\*/g,"<em>$1</em>"),i=i.replace(/\n/g,"<br />"),{__html:i}};return B.jsx("div",{dangerouslySetInnerHTML:e()})},Rb=({message:n,sources:e})=>{const i=n.role===Mi.MODEL;if(i&&n.id==="welcome-0"){const[o,...l]=n.content.split(`

`),[a,c]=o.trim().split(`
`),h=l[0],g=l.slice(1).join(`

`);return B.jsxs("div",{className:"flex items-start gap-4 my-4",children:[B.jsx(vc,{}),B.jsxs("div",{className:"max-w-xl p-4 rounded-2xl text-base leading-relaxed bg-brand-med text-gray-200 rounded-tl-none",children:[B.jsxs("div",{className:"font-extrabold text-2xl md:text-3xl leading-tight",children:[B.jsx("p",{children:a}),B.jsx("p",{children:c})]}),B.jsxs("div",{className:"mt-4",children:[B.jsx("div",{className:"font-semibold text-base md:text-lg",children:B.jsx(ju,{content:h})}),B.jsx("div",{className:"mt-4",children:B.jsx(ju,{content:g})})]})]})]})}return B.jsxs("div",{className:`flex items-start gap-4 my-4 ${i?"":"justify-end"}`,children:[i&&B.jsx(vc,{}),B.jsxs("div",{className:`max-w-xl p-4 rounded-2xl text-base leading-relaxed ${i?"bg-brand-med text-gray-200 rounded-tl-none":"bg-purple-700 text-white rounded-br-none"}`,children:[B.jsx(ju,{content:n.content}),i&&e&&e.length>0&&B.jsxs("div",{className:"mt-4 pt-3 border-t border-brand-border",children:[B.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wider",children:"Sources"}),B.jsx("ol",{className:"space-y-1 list-decimal list-inside",children:e.map((o,l)=>B.jsx("li",{className:"text-sm text-pink-400",children:B.jsx("a",{href:o.uri,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",title:o.title,children:o.title||new URL(o.uri).hostname})},l))})]})]})]})},Nb=n=>`You are "Matt", an expert AI legal assistant specializing in Kenyan law. Your purpose is to assist users by searching for and providing information on Kenyan Case Law, Statutes, and Precedents, using https://new.kenyalaw.org as a primary source. The user you are talking to is named ${n}. Address them by their name when it feels natural to do so to create a more personal and helpful experience.

CRITICAL SAFETY INSTRUCTION:
1.  On your VERY FIRST message and ONLY on your first message, you MUST start with this exact disclaimer: " **Disclaimer:** I am an AI assistant, not an Advocate of the High Court of Kenya. This information is for educational purposes only and should not be considered legal advice. Please consult a qualified legal professional for advice on your specific situation."
2.  After the initial disclaimer, in subsequent messages, you do not need to repeat it.
3.  Your analysis should be empathetic, clear, and professional.
4.  When providing information, you MUST use your search tool to find and cite relevant Kenyan case law, statutes, or precedents to support your analysis. Prioritize results from new.kenyalaw.org. Any monetary values, if mentioned, should be in Kenyan Shillings (KES).
5.  Do not ask for personally identifiable information (PII) like names, addresses, or case numbers. Keep the conversation hypothetical.
6.  If the user asks for something outside your scope of Kenyan law, politely decline and state your purpose.`;var _c=function(n,e){return _c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},_c(n,e)};function ky(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_c(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var vl=function(){return vl=Object.assign||function(e){for(var i,o=1,l=arguments.length;o<l;o++){i=arguments[o];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},vl.apply(this,arguments)};function xs(n,e){var i={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(i[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(n);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(n,o[l])&&(i[o[l]]=n[o[l]]);return i}function Oy(n,e,i,o){var l=arguments.length,a=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,i,o);else for(var h=n.length-1;h>=0;h--)(c=n[h])&&(a=(l<3?c(a):l>3?c(e,i,a):c(e,i))||a);return l>3&&a&&Object.defineProperty(e,i,a),a}function Py(n,e){return function(i,o){e(i,o,n)}}function Ly(n,e,i,o,l,a){function c(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var h=o.kind,g=h==="getter"?"get":h==="setter"?"set":"value",m=!e&&n?o.static?n:n.prototype:null,v=e||(m?Object.getOwnPropertyDescriptor(m,o.name):{}),_,S=!1,A=i.length-1;A>=0;A--){var C={};for(var b in o)C[b]=b==="access"?{}:o[b];for(var b in o.access)C.access[b]=o.access[b];C.addInitializer=function(P){if(S)throw new TypeError("Cannot add initializers after decoration has completed");a.push(c(P||null))};var M=(0,i[A])(h==="accessor"?{get:v.get,set:v.set}:v[g],C);if(h==="accessor"){if(M===void 0)continue;if(M===null||typeof M!="object")throw new TypeError("Object expected");(_=c(M.get))&&(v.get=_),(_=c(M.set))&&(v.set=_),(_=c(M.init))&&l.unshift(_)}else(_=c(M))&&(h==="field"?l.unshift(_):v[g]=_)}m&&Object.defineProperty(m,o.name,v),S=!0}function qy(n,e,i){for(var o=arguments.length>2,l=0;l<e.length;l++)i=o?e[l].call(n,i):e[l].call(n);return o?i:void 0}function By(n){return typeof n=="symbol"?n:"".concat(n)}function Gy(n,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function Hy(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function te(n,e,i,o){function l(a){return a instanceof i?a:new i(function(c){c(a)})}return new(i||(i=Promise))(function(a,c){function h(v){try{m(o.next(v))}catch(_){c(_)}}function g(v){try{m(o.throw(v))}catch(_){c(_)}}function m(v){v.done?a(v.value):l(v.value).then(h,g)}m((o=o.apply(n,e||[])).next())})}function Vy(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,l,a,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(i=0)),i;)try{if(o=1,l&&(a=m[0]&2?l.return:m[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,m[1])).done)return a;switch(l=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return i.label++,{value:m[1],done:!1};case 5:i.label++,l=m[1],m=[0];continue;case 7:m=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){i=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){i.label=m[1];break}if(m[0]===6&&i.label<a[1]){i.label=a[1],a=m;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(m);break}a[2]&&i.ops.pop(),i.trys.pop();continue}m=e.call(n,i)}catch(v){m=[6,v],l=0}finally{o=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Rl=Object.create?(function(n,e,i,o){o===void 0&&(o=i);var l=Object.getOwnPropertyDescriptor(e,i);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(n,o,l)}):(function(n,e,i,o){o===void 0&&(o=i),n[o]=e[i]});function zy(n,e){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&Rl(e,n,i)}function _l(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vc(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var o=i.call(n),l,a=[],c;try{for(;(e===void 0||e-- >0)&&!(l=o.next()).done;)a.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(c)throw c.error}}return a}function Fy(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Vc(arguments[e]));return n}function Jy(){for(var n=0,e=0,i=arguments.length;e<i;e++)n+=arguments[e].length;for(var o=Array(n),l=0,e=0;e<i;e++)for(var a=arguments[e],c=0,h=a.length;c<h;c++,l++)o[l]=a[c];return o}function $y(n,e,i){if(i||arguments.length===2)for(var o=0,l=e.length,a;o<l;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))}function Rs(n){return this instanceof Rs?(this.v=n,this):new Rs(n)}function Yy(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(n,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(A){return function(C){return Promise.resolve(C).then(A,_)}}function h(A,C){o[A]&&(l[A]=function(b){return new Promise(function(M,P){a.push([A,b,M,P])>1||g(A,b)})},C&&(l[A]=C(l[A])))}function g(A,C){try{m(o[A](C))}catch(b){S(a[0][3],b)}}function m(A){A.value instanceof Rs?Promise.resolve(A.value.v).then(v,_):S(a[0][2],A)}function v(A){g("next",A)}function _(A){g("throw",A)}function S(A,C){A(C),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Ky(n){var e,i;return e={},o("next"),o("throw",function(l){throw l}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(l,a){e[l]=n[l]?function(c){return(i=!i)?{value:Rs(n[l](c)),done:!1}:a?a(c):c}:a}}function Qy(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof _l=="function"?_l(n):n[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(a){i[a]=n[a]&&function(c){return new Promise(function(h,g){c=n[a](c),l(h,g,c.done,c.value)})}}function l(a,c,h,g){Promise.resolve(g).then(function(m){a({value:m,done:h})},c)}}function Xy(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var Mb=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},Tc=function(n){return Tc=Object.getOwnPropertyNames||function(e){var i=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[i.length]=o);return i},Tc(n)};function Zy(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var i=Tc(n),o=0;o<i.length;o++)i[o]!=="default"&&Rl(e,n,i[o]);return Mb(e,n),e}function Wy(n){return n&&n.__esModule?n:{default:n}}function jy(n,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(n):o?o.value:e.get(n)}function ev(n,e,i,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!l:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(n,i):l?l.value=i:e.set(n,i),i}function tv(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function nv(n,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var o,l;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=e[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=e[Symbol.dispose],i&&(l=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");l&&(o=function(){try{l.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:e,dispose:o,async:i})}else i&&n.stack.push({async:!0});return e}var Ib=typeof SuppressedError=="function"?SuppressedError:function(n,e,i){var o=new Error(i);return o.name="SuppressedError",o.error=n,o.suppressed=e,o};function iv(n){function e(a){n.error=n.hasError?new Ib(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}var i,o=0;function l(){for(;i=n.stack.pop();)try{if(!i.async&&o===1)return o=0,n.stack.push(i),Promise.resolve().then(l);if(i.dispose){var a=i.dispose.call(i.value);if(i.async)return o|=2,Promise.resolve(a).then(l,function(c){return e(c),l()})}else o|=1}catch(c){e(c)}if(o===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return l()}function sv(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,o,l,a,c){return o?e?".jsx":".js":l&&(!a||!c)?i:l+a+"."+c.toLowerCase()+"js"}):n}const xb={__extends:ky,__assign:vl,__rest:xs,__decorate:Oy,__param:Py,__esDecorate:Ly,__runInitializers:qy,__propKey:By,__setFunctionName:Gy,__metadata:Hy,__awaiter:te,__generator:Vy,__createBinding:Rl,__exportStar:zy,__values:_l,__read:Vc,__spread:Fy,__spreadArrays:Jy,__spreadArray:$y,__await:Rs,__asyncGenerator:Yy,__asyncDelegator:Ky,__asyncValues:Qy,__makeTemplateObject:Xy,__importStar:Zy,__importDefault:Wy,__classPrivateFieldGet:jy,__classPrivateFieldSet:ev,__classPrivateFieldIn:tv,__addDisposableResource:nv,__disposeResources:iv,__rewriteRelativeImportExtension:sv},Db=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:nv,get __assign(){return vl},__asyncDelegator:Ky,__asyncGenerator:Yy,__asyncValues:Qy,__await:Rs,__awaiter:te,__classPrivateFieldGet:jy,__classPrivateFieldIn:tv,__classPrivateFieldSet:ev,__createBinding:Rl,__decorate:Oy,__disposeResources:iv,__esDecorate:Ly,__exportStar:zy,__extends:ky,__generator:Vy,__importDefault:Wy,__importStar:Zy,__makeTemplateObject:Xy,__metadata:Hy,__param:Py,__propKey:By,__read:Vc,__rest:xs,__rewriteRelativeImportExtension:sv,__runInitializers:qy,__setFunctionName:Gy,__spread:Fy,__spreadArray:$y,__spreadArrays:Jy,__values:_l,default:xb},Symbol.toStringTag,{value:"Module"})),Ub=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class zc extends Error{constructor(e,i="FunctionsError",o){super(e),this.name=i,this.context=o}}class kb extends zc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dg extends zc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ug extends zc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Sc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Sc||(Sc={}));class Ob{constructor(e,{headers:i={},customFetch:o,region:l=Sc.Any}={}){this.url=e,this.headers=i,this.region=l,this.fetch=Ub(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return te(this,arguments,void 0,function*(i,o={}){var l;let a,c;try{const{headers:h,method:g,body:m,signal:v,timeout:_}=o;let S={},{region:A}=o;A||(A=this.region);const C=new URL(`${this.url}/${i}`);A&&A!=="any"&&(S["x-region"]=A,C.searchParams.set("forceFunctionRegion",A));let b;m&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",b=m):typeof m=="string"?(S["Content-Type"]="text/plain",b=m):typeof FormData<"u"&&m instanceof FormData?b=m:(S["Content-Type"]="application/json",b=JSON.stringify(m)):b=m;let M=v;_&&(c=new AbortController,a=setTimeout(()=>c.abort(),_),v?(M=c.signal,v.addEventListener("abort",()=>c.abort())):M=c.signal);const P=yield this.fetch(C.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:b,signal:M}).catch(Y=>{throw new kb(Y)}),O=P.headers.get("x-relay-error");if(O&&O==="true")throw new Dg(P);if(!P.ok)throw new Ug(P);let x=((l=P.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),z;return x==="application/json"?z=yield P.json():x==="application/octet-stream"||x==="application/pdf"?z=yield P.blob():x==="text/event-stream"?z=P:x==="multipart/form-data"?z=yield P.formData():z=yield P.text(),{data:z,error:null,response:P}}catch(h){return{data:null,error:h,response:h instanceof Ug||h instanceof Dg?h.context:void 0}}finally{a&&clearTimeout(a)}})}}var ft={};const Ds=W0(Db);var il={},sl={},ol={},rl={},ll={},al={},kg;function ov(){if(kg)return al;kg=1,Object.defineProperty(al,"__esModule",{value:!0});class n extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return al.default=n,al}var Og;function rv(){if(Og)return ll;Og=1,Object.defineProperty(ll,"__esModule",{value:!0});const e=Ds.__importDefault(ov());class i{constructor(l){var a,c;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(a=l.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=l.signal,this.isMaybeSingle=(c=l.isMaybeSingle)!==null&&c!==void 0?c:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,a){return this.headers=new Headers(this.headers),this.headers.set(l,a),this}then(l,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var m,v,_,S;let A=null,C=null,b=null,M=g.status,P=g.statusText;if(g.ok){if(this.method!=="HEAD"){const Y=await g.text();Y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?C=Y:C=JSON.parse(Y))}const x=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),z=(_=g.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");x&&z&&z.length>1&&(b=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(A={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,b=null,M=406,P="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const x=await g.text();try{A=JSON.parse(x),Array.isArray(A)&&g.status===404&&(C=[],A=null,M=200,P="OK")}catch{g.status===404&&x===""?(M=204,P="No Content"):A={message:x}}if(A&&this.isMaybeSingle&&(!((S=A==null?void 0:A.details)===null||S===void 0)&&S.includes("0 rows"))&&(A=null,M=200,P="OK"),A&&this.shouldThrowOnError)throw new e.default(A)}return{error:A,data:C,count:b,status:M,statusText:P}});return this.shouldThrowOnError||(h=h.catch(g=>{var m,v,_,S,A,C;let b="";const M=g==null?void 0:g.cause;if(M){const P=(m=M==null?void 0:M.message)!==null&&m!==void 0?m:"",O=(v=M==null?void 0:M.code)!==null&&v!==void 0?v:"";b=`${(_=g==null?void 0:g.name)!==null&&_!==void 0?_:"FetchError"}: ${g==null?void 0:g.message}`,b+=`

Caused by: ${(S=M==null?void 0:M.name)!==null&&S!==void 0?S:"Error"}: ${P}`,O&&(b+=` (${O})`),M!=null&&M.stack&&(b+=`
${M.stack}`)}else b=(A=g==null?void 0:g.stack)!==null&&A!==void 0?A:"";return{error:{message:`${(C=g==null?void 0:g.name)!==null&&C!==void 0?C:"FetchError"}: ${g==null?void 0:g.message}`,details:b,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(l,a)}returns(){return this}overrideTypes(){return this}}return ll.default=i,ll}var Pg;function lv(){if(Pg)return rl;Pg=1,Object.defineProperty(rl,"__esModule",{value:!0});const e=Ds.__importDefault(rv());class i extends e.default{select(l){let a=!1;const c=(l??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:a=!0,nullsFirst:c,foreignTable:h,referencedTable:g=h}={}){const m=g?`${g}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${l}.${a?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:a,referencedTable:c=a}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,a,{foreignTable:c,referencedTable:h=c}={}){const g=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(m,`${a-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:a=!1,settings:c=!1,buffers:h=!1,wal:g=!1,format:m="text"}={}){var v;const _=[l?"analyze":null,a?"verbose":null,c?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${S}"; options=${_};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return rl.default=i,rl}var Lg;function Fc(){if(Lg)return ol;Lg=1,Object.defineProperty(ol,"__esModule",{value:!0});const e=Ds.__importDefault(lv()),i=new RegExp("[,()]");class o extends e.default{eq(a,c){return this.url.searchParams.append(a,`eq.${c}`),this}neq(a,c){return this.url.searchParams.append(a,`neq.${c}`),this}gt(a,c){return this.url.searchParams.append(a,`gt.${c}`),this}gte(a,c){return this.url.searchParams.append(a,`gte.${c}`),this}lt(a,c){return this.url.searchParams.append(a,`lt.${c}`),this}lte(a,c){return this.url.searchParams.append(a,`lte.${c}`),this}like(a,c){return this.url.searchParams.append(a,`like.${c}`),this}likeAllOf(a,c){return this.url.searchParams.append(a,`like(all).{${c.join(",")}}`),this}likeAnyOf(a,c){return this.url.searchParams.append(a,`like(any).{${c.join(",")}}`),this}ilike(a,c){return this.url.searchParams.append(a,`ilike.${c}`),this}ilikeAllOf(a,c){return this.url.searchParams.append(a,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(a,c){return this.url.searchParams.append(a,`ilike(any).{${c.join(",")}}`),this}regexMatch(a,c){return this.url.searchParams.append(a,`match.${c}`),this}regexIMatch(a,c){return this.url.searchParams.append(a,`imatch.${c}`),this}is(a,c){return this.url.searchParams.append(a,`is.${c}`),this}isDistinct(a,c){return this.url.searchParams.append(a,`isdistinct.${c}`),this}in(a,c){const h=Array.from(new Set(c)).map(g=>typeof g=="string"&&i.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(a,`in.(${h})`),this}contains(a,c){return typeof c=="string"?this.url.searchParams.append(a,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(a,`cs.{${c.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(c)}`),this}containedBy(a,c){return typeof c=="string"?this.url.searchParams.append(a,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(a,`cd.{${c.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(c)}`),this}rangeGt(a,c){return this.url.searchParams.append(a,`sr.${c}`),this}rangeGte(a,c){return this.url.searchParams.append(a,`nxl.${c}`),this}rangeLt(a,c){return this.url.searchParams.append(a,`sl.${c}`),this}rangeLte(a,c){return this.url.searchParams.append(a,`nxr.${c}`),this}rangeAdjacent(a,c){return this.url.searchParams.append(a,`adj.${c}`),this}overlaps(a,c){return typeof c=="string"?this.url.searchParams.append(a,`ov.${c}`):this.url.searchParams.append(a,`ov.{${c.join(",")}}`),this}textSearch(a,c,{config:h,type:g}={}){let m="";g==="plain"?m="pl":g==="phrase"?m="ph":g==="websearch"&&(m="w");const v=h===void 0?"":`(${h})`;return this.url.searchParams.append(a,`${m}fts${v}.${c}`),this}match(a){return Object.entries(a).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(a,c,h){return this.url.searchParams.append(a,`not.${c}.${h}`),this}or(a,{foreignTable:c,referencedTable:h=c}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${a})`),this}filter(a,c,h){return this.url.searchParams.append(a,`${c}.${h}`),this}}return ol.default=o,ol}var qg;function av(){if(qg)return sl;qg=1,Object.defineProperty(sl,"__esModule",{value:!0});const e=Ds.__importDefault(Fc());class i{constructor(l,{headers:a={},schema:c,fetch:h}){this.url=l,this.headers=new Headers(a),this.schema=c,this.fetch=h}select(l,a){const{head:c=!1,count:h}=a??{},g=c?"HEAD":"GET";let m=!1;const v=(l??"*").split("").map(_=>/\s/.test(_)&&!m?"":(_==='"'&&(m=!m),_)).join("");return this.url.searchParams.set("select",v),h&&this.headers.append("Prefer",`count=${h}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:a,defaultToNull:c=!0}={}){var h;const g="POST";if(a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const m=l.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(m.length>0){const v=[...new Set(m)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(l,{onConflict:a,ignoreDuplicates:c=!1,count:h,defaultToNull:g=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),h&&this.headers.append("Prefer",`count=${h}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const _=l.reduce((S,A)=>S.concat(Object.keys(A)),[]);if(_.length>0){const S=[...new Set(_)].map(A=>`"${A}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(l,{count:a}={}){var c;const h="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:l}={}){var a;const c="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return sl.default=i,sl}var Bg;function Pb(){if(Bg)return il;Bg=1,Object.defineProperty(il,"__esModule",{value:!0});const n=Ds,e=n.__importDefault(av()),i=n.__importDefault(Fc());class o{constructor(a,{headers:c={},schema:h,fetch:g}={}){this.url=a,this.headers=new Headers(c),this.schemaName=h,this.fetch=g}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${a}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new o(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,c={},{head:h=!1,get:g=!1,count:m}={}){var v;let _;const S=new URL(`${this.url}/rpc/${a}`);let A;h||g?(_=h?"HEAD":"GET",Object.entries(c).filter(([b,M])=>M!==void 0).map(([b,M])=>[b,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([b,M])=>{S.searchParams.append(b,M)})):(_="POST",A=c);const C=new Headers(this.headers);return m&&C.set("Prefer",`count=${m}`),new i.default({method:_,url:S,headers:C,schema:this.schemaName,body:A,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return il.default=o,il}var Gg;function Lb(){if(Gg)return ft;Gg=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.PostgrestError=ft.PostgrestBuilder=ft.PostgrestTransformBuilder=ft.PostgrestFilterBuilder=ft.PostgrestQueryBuilder=ft.PostgrestClient=void 0;const n=Ds,e=n.__importDefault(Pb());ft.PostgrestClient=e.default;const i=n.__importDefault(av());ft.PostgrestQueryBuilder=i.default;const o=n.__importDefault(Fc());ft.PostgrestFilterBuilder=o.default;const l=n.__importDefault(lv());ft.PostgrestTransformBuilder=l.default;const a=n.__importDefault(rv());ft.PostgrestBuilder=a.default;const c=n.__importDefault(ov());return ft.PostgrestError=c.default,ft.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:a.default,PostgrestError:c.default},ft}var uv=Lb();const cv=Dc(uv),qb=Z0({__proto__:null,default:cv},[uv]),{PostgrestClient:Bb,PostgrestQueryBuilder:tM,PostgrestFilterBuilder:nM,PostgrestTransformBuilder:iM,PostgrestBuilder:sM,PostgrestError:oM}=cv||qb;class Gb{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const o=this.getWebSocketConstructor();return new o(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Hb="2.84.0",Vb=`realtime-js/${Hb}`,dv="1.0.0",zb="2.0.0",Hg=dv,Ec=1e4,Fb=1e3,Jb=100;var Ci;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ci||(Ci={}));var je;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(je||(je={}));var Wt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Wt||(Wt={}));var Ac;(function(n){n.websocket="websocket"})(Ac||(Ac={}));var bi;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(bi||(bi={}));class $b{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,o,l,a;const c=e.topic,h=(i=e.ref)!==null&&i!==void 0?i:"",g=(o=e.join_ref)!==null&&o!==void 0?o:"",m=e.payload.event,v=(a=(l=e.payload)===null||l===void 0?void 0:l.payload)!==null&&a!==void 0?a:new ArrayBuffer(0),_=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+m.length,S=new ArrayBuffer(this.HEADER_LENGTH+_);let A=new DataView(S),C=0;A.setUint8(C++,this.KINDS.userBroadcastPush),A.setUint8(C++,g.length),A.setUint8(C++,h.length),A.setUint8(C++,c.length),A.setUint8(C++,m.length),A.setUint8(C++,this.BINARY_ENCODING),Array.from(g,M=>A.setUint8(C++,M.charCodeAt(0))),Array.from(h,M=>A.setUint8(C++,M.charCodeAt(0))),Array.from(c,M=>A.setUint8(C++,M.charCodeAt(0))),Array.from(m,M=>A.setUint8(C++,M.charCodeAt(0)));var b=new Uint8Array(S.byteLength+v.byteLength);return b.set(new Uint8Array(S),0),b.set(new Uint8Array(v),S.byteLength),b.buffer}_encodeJsonUserBroadcastPush(e){var i,o,l,a;const c=e.topic,h=(i=e.ref)!==null&&i!==void 0?i:"",g=(o=e.join_ref)!==null&&o!==void 0?o:"",m=e.payload.event,v=(a=(l=e.payload)===null||l===void 0?void 0:l.payload)!==null&&a!==void 0?a:{},S=new TextEncoder().encode(JSON.stringify(v)).buffer,A=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+m.length,C=new ArrayBuffer(this.HEADER_LENGTH+A);let b=new DataView(C),M=0;b.setUint8(M++,this.KINDS.userBroadcastPush),b.setUint8(M++,g.length),b.setUint8(M++,h.length),b.setUint8(M++,c.length),b.setUint8(M++,m.length),b.setUint8(M++,this.JSON_ENCODING),Array.from(g,O=>b.setUint8(M++,O.charCodeAt(0))),Array.from(h,O=>b.setUint8(M++,O.charCodeAt(0))),Array.from(c,O=>b.setUint8(M++,O.charCodeAt(0))),Array.from(m,O=>b.setUint8(M++,O.charCodeAt(0)));var P=new Uint8Array(C.byteLength+S.byteLength);return P.set(new Uint8Array(C),0),P.set(new Uint8Array(S),C.byteLength),P.buffer}decode(e,i){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return i(o)}if(typeof e=="string"){const o=JSON.parse(e),[l,a,c,h,g]=o;return i({join_ref:l,ref:a,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),o=i.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,l)}}_decodeUserBroadcast(e,i,o){const l=i.getUint8(1),a=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const m=o.decode(e.slice(g,g+l));g=g+l;const v=o.decode(e.slice(g,g+a));g=g+a;const _=o.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),A=h===this.JSON_ENCODING?JSON.parse(o.decode(S)):S,C={type:this.BROADCAST_EVENT,event:v,payload:A};return c>0&&(C.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}}class fv{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Oe||(Oe={}));const Vg=(n,e,i={})=>{var o;const l=(o=i.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((a,c)=>(a[c]=Yb(c,n,e,l),a),{}):{}},Yb=(n,e,i,o)=>{const l=e.find(h=>h.name===n),a=l==null?void 0:l.type,c=i[n];return a&&!o.includes(a)?hv(a,c):wc(c)},hv=(n,e)=>{if(n.charAt(0)==="_"){const i=n.slice(1,n.length);return Zb(e,i)}switch(n){case Oe.bool:return Kb(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Qb(e);case Oe.json:case Oe.jsonb:return Xb(e);case Oe.timestamp:return Wb(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return wc(e);default:return wc(e)}},wc=n=>n,Kb=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Qb=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Xb=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Zb=(n,e)=>{if(typeof n!="string")return n;const i=n.length-1,o=n[i];if(n[0]==="{"&&o==="}"){let a;const c=n.slice(1,i);try{a=JSON.parse("["+c+"]")}catch{a=c?c.split(","):[]}return a.map(h=>hv(e,h))}return n},Wb=n=>typeof n=="string"?n.replace(" ","T"):n,pv=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ec{constructor(e,i,o={},l=Ec){this.channel=e,this.event=i,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var o;return this._hasReceived(e)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(zg||(zg={}));class Uo{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:a,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uo.syncState(this.state,l,a,c),this.pendingDiffs.forEach(g=>{this.state=Uo.syncDiff(this.state,g,a,c)}),this.pendingDiffs=[],h()}),this.channel._on(o.diff,{},l=>{const{onJoin:a,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Uo.syncDiff(this.state,l,a,c),h())}),this.onJoin((l,a,c)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:a,newPresences:c})}),this.onLeave((l,a,c)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:a,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,o,l){const a=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(a,(m,v)=>{c[m]||(g[m]=v)}),this.map(c,(m,v)=>{const _=a[m];if(_){const S=v.map(M=>M.presence_ref),A=_.map(M=>M.presence_ref),C=v.filter(M=>A.indexOf(M.presence_ref)<0),b=_.filter(M=>S.indexOf(M.presence_ref)<0);C.length>0&&(h[m]=C),b.length>0&&(g[m]=b)}else h[m]=v}),this.syncDiff(a,{joins:h,leaves:g},o,l)}static syncDiff(e,i,o,l){const{joins:a,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(a,(h,g)=>{var m;const v=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(g),v.length>0){const _=e[h].map(A=>A.presence_ref),S=v.filter(A=>_.indexOf(A.presence_ref)<0);e[h].unshift(...S)}o(h,v,g)}),this.map(c,(h,g)=>{let m=e[h];if(!m)return;const v=g.map(_=>_.presence_ref);m=m.filter(_=>v.indexOf(_.presence_ref)<0),e[h]=m,l(h,m,g),m.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(o=>i(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,o)=>{const l=e[o];return"metas"in l?i[o]=l.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):i[o]=l,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Fg||(Fg={}));var ko;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ko||(ko={}));var An;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(An||(An={}));class Jc{constructor(e,i={config:{}},o){var l,a;if(this.topic=e,this.params=i,this.socket=o,this.bindings={},this.state=je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new ec(this,Wt.join,this.params,this.timeout),this.rejoinTimer=new fv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=je.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wt.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new Uo(this),this.broadcastEndpointURL=pv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var o,l,a;if(this.socket.isConnected()||this.socket.connect(),this.state==je.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,m=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(A=>A.filter))!==null&&l!==void 0?l:[],v=!!this.bindings[ko.PRESENCE]&&this.bindings[ko.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,_={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:m,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(A=>e==null?void 0:e(An.CHANNEL_ERROR,A)),this._onClose(()=>e==null?void 0:e(An.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:A})=>{var C;if(this.socket.setAuth(),A===void 0){e==null||e(An.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,M=(C=b==null?void 0:b.length)!==null&&C!==void 0?C:0,P=[];for(let O=0;O<M;O++){const x=b[O],{filter:{event:z,schema:Y,table:$,filter:J}}=x,re=A&&A[O];if(re&&re.event===z&&re.schema===Y&&re.table===$&&re.filter===J)P.push(Object.assign(Object.assign({},x),{id:re.id}));else{this.unsubscribe(),this.state=je.errored,e==null||e(An.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(An.SUBSCRIBED);return}}).receive("error",A=>{this.state=je.errored,e==null||e(An.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(An.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,o){return this.state===je.joined&&e===ko.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,o)}async httpSend(e,i,o={}){var l;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const m=await h.json();g=m.error||m.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var o,l;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=m.body)===null||l===void 0?void 0:l.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var c,h,g;const m=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=je.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new ec(this,Wt.leave,{},e),o.receive("ok",()=>{i(),l("ok")}).receive("timeout",()=>{i(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=je.closed,this.bindings={}}async _fetchWithTimeout(e,i,o){const l=new AbortController,a=setTimeout(()=>l.abort(),o),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:l.signal}));return clearTimeout(a),c}_push(e,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new ec(this,e,i,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Jb){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,o){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,o){var l,a;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:m,join:v}=Wt;if(o&&[h,g,m,v].indexOf(c)>=0&&o!==this._joinRef())return;let S=this._onMessage(c,i,o);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(A=>{var C,b,M;return((C=A.filter)===null||C===void 0?void 0:C.event)==="*"||((M=(b=A.filter)===null||b===void 0?void 0:b.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===c}).map(A=>A.callback(S,o)):(a=this.bindings[c])===null||a===void 0||a.filter(A=>{var C,b,M,P,O,x;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in A){const z=A.id,Y=(C=A.filter)===null||C===void 0?void 0:C.event;return z&&((b=i.ids)===null||b===void 0?void 0:b.includes(z))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((M=i.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const z=(O=(P=A==null?void 0:A.filter)===null||P===void 0?void 0:P.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return z==="*"||z===((x=i==null?void 0:i.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===c}).map(A=>{if(typeof S=="object"&&"ids"in S){const C=S.data,{schema:b,table:M,commit_timestamp:P,type:O,errors:x}=C;S=Object.assign(Object.assign({},{schema:b,table:M,commit_timestamp:P,eventType:O,new:{},old:{},errors:x}),this._getPayloadRecords(C))}A.callback(S,o)})}_isClosed(){return this.state===je.closed}_isJoined(){return this.state===je.joined}_isJoining(){return this.state===je.joining}_isLeaving(){return this.state===je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,o){const l=e.toLocaleLowerCase(),a={type:l,filter:i,callback:o};return this.bindings[l]?this.bindings[l].push(a):this.bindings[l]=[a],this}_off(e,i){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var a;return!(((a=l.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===o&&Jc.isEqual(l.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(e[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wt.close,{},e)}_onError(e){this._on(Wt.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Vg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Vg(e.columns,e.old_record)),i}}const tc=()=>{},ul={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jb=[1e3,2e3,5e3,1e4],eR=1e4,tR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nR{constructor(e,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ec,this.transport=null,this.heartbeatIntervalMs=ul.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tc,this.ref=0,this.reconnectTimer=null,this.vsn=Hg,this.logger=tc,this.conn=null,this.sendBuffer=[],this.serializer=new $b,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...a)=>l(...a):(...a)=>fetch(...a),!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${Ac.websocket}`,this.httpEndpoint=pv(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gb.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,o){this.logger(e,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ci.connecting:return bi.Connecting;case Ci.open:return bi.Open;case Ci.closing:return bi.Closing;default:return bi.Closed}}isConnected(){return this.connectionState()===bi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const o=`realtime:${e}`,l=this.getChannels().find(a=>a.topic===o);if(l)return l;{const a=new Jc(`realtime:${e}`,i,this);return this.channels.push(a),a}}push(e){const{topic:i,event:o,payload:l,ref:a}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${o} (${a})`,l),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Fb,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},ul.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:a,ref:c}=i,h=c?`(${c})`:"",g=a.status||"";this.log("receive",`${g} ${o} ${l} ${h}`.trim(),a),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(l,a,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ci.open||this.conn.readyState===Ci.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wt.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const o=e.match(/\?/)?"&":"?",l=new URLSearchParams(i);return`${e}${o}${l}`}_workerObjectUrl(e){let i;if(e)i=e;else{const o=new Blob([tR],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const l={access_token:i,version:Vb};i&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Wt.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(i)}catch(l){this.log("error",`error in ${e} callback`,l)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new fv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ul.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,o,l,a,c,h,g,m,v,_,S,A;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(o=e==null?void 0:e.timeout)!==null&&o!==void 0?o:Ec,this.heartbeatIntervalMs=(l=e==null?void 0:e.heartbeatIntervalMs)!==null&&l!==void 0?l:ul.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:tc,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Hg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:(C=>jb[C-1]||eR),this.vsn){case dv:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((C,b)=>b(JSON.stringify(C))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((C,b)=>b(JSON.parse(C)));break;case zb:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(A=e==null?void 0:e.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $c extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function He(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class iR extends $c{constructor(e,i,o){super(e),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cc extends $c{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const Yc=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),sR=()=>Response,bc=n=>{if(Array.isArray(n))return n.map(i=>bc(i));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([i,o])=>{const l=i.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[l]=bc(o)}),e},oR=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},nc=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},rR=(n,e,i)=>te(void 0,void 0,void 0,function*(){const o=yield sR();n instanceof o&&!(i!=null&&i.noResolveJson)?n.json().then(l=>{const a=n.status||500,c=(l==null?void 0:l.statusCode)||a+"";e(new iR(nc(l),a,c))}).catch(l=>{e(new Cc(nc(l),l))}):e(new Cc(nc(n),n))}),lR=(n,e,i,o)=>{const l={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!o?l:(oR(o)?(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),l.body=JSON.stringify(o)):l.body=o,e!=null&&e.duplex&&(l.duplex=e.duplex),Object.assign(Object.assign({},l),i))};function qo(n,e,i,o,l,a){return te(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,lR(e,o,l,a)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>rR(g,h,o))})})}function Oo(n,e,i,o){return te(this,void 0,void 0,function*(){return qo(n,"GET",e,i,o)})}function Zt(n,e,i,o,l){return te(this,void 0,void 0,function*(){return qo(n,"POST",e,o,l,i)})}function Rc(n,e,i,o,l){return te(this,void 0,void 0,function*(){return qo(n,"PUT",e,o,l,i)})}function aR(n,e,i,o){return te(this,void 0,void 0,function*(){return qo(n,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function Kc(n,e,i,o,l){return te(this,void 0,void 0,function*(){return qo(n,"DELETE",e,o,l,i)})}class uR{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return te(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(He(e))return{data:null,error:e};throw e}})}}var mv;class cR{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[mv]="BlobDownloadBuilder",this.promise=null}asStream(){return new uR(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return te(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(He(e))return{data:null,error:e};throw e}})}}mv=Symbol.toStringTag;const dR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fR{constructor(e,i={},o,l){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=o,this.fetch=Yc(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,o,l){return te(this,void 0,void 0,function*(){try{let a;const c=Object.assign(Object.assign({},Jg),l);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&o instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),g&&a.append("metadata",this.encodeMetadata(g)),a.append("",o)):typeof FormData<"u"&&o instanceof FormData?(a=o,a.has("cacheControl")||a.append("cacheControl",c.cacheControl),g&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(g))):(a=o,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!c.duplex&&(c.duplex="half")),l!=null&&l.headers&&(h=Object.assign(Object.assign({},h),l.headers));const m=this._removeEmptyFolders(i),v=this._getFinalPath(m),_=yield(e=="PUT"?Rc:Zt)(this.fetch,`${this.url}/object/${v}`,a,Object.assign({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}})}upload(e,i,o){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,o)})}uploadToSignedUrl(e,i,o,l){return te(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),c=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",i);try{let g;const m=Object.assign({upsert:Jg.upsert},l),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",m.cacheControl)):(g=o,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const _=yield Rc(this.fetch,h.toString(),g,{headers:v});return{data:{path:a,fullPath:_.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(He(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,i){return te(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const l=Object.assign({},this.headers);i!=null&&i.upsert&&(l["x-upsert"]="true");const a=yield Zt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),c=new URL(this.url+a.url),h=c.searchParams.get("token");if(!h)throw new $c("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}})}update(e,i,o){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,o)})}move(e,i,o){return te(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(He(l))return{data:null,error:l};throw l}})}copy(e,i,o){return te(this,void 0,void 0,function*(){try{return{data:{path:(yield Zt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(He(l))return{data:null,error:l};throw l}})}createSignedUrl(e,i,o){return te(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),a=yield Zt(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:i},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const c=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${c}`)},{data:a,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(He(l))return{data:null,error:l};throw l}})}createSignedUrls(e,i,o){return te(this,void 0,void 0,function*(){try{const l=yield Zt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),a=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${a}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(He(l))return{data:null,error:l};throw l}})}download(e,i){const l=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),c=a?`?${a}`:"",h=this._getFinalPath(e),g=()=>Oo(this.fetch,`${this.url}/${l}/${h}${c}`,{headers:this.headers,noResolveJson:!0});return new cR(g,this.shouldThrowOnError)}info(e){return te(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const o=yield Oo(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:bc(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}})}exists(e){return te(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield aR(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(He(o)&&o instanceof Cc){const l=o.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,i){const o=this._getFinalPath(e),l=[],a=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";a!==""&&l.push(a);const h=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});g!==""&&l.push(g);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${o}${m}`)}}}remove(e){return te(this,void 0,void 0,function*(){try{return{data:yield Kc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}list(e,i,o){return te(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},dR),i),{prefix:e||""});return{data:yield Zt(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(He(l))return{data:null,error:l};throw l}})}listV2(e,i){return te(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield Zt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const gv="2.84.0",yv={"X-Client-Info":`storage-js/${gv}`};class hR{constructor(e,i={},o,l){this.shouldThrowOnError=!1;const a=new URL(e);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yv),i),this.fetch=Yc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return te(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(e);return{data:yield Oo(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}createBucket(e){return te(this,arguments,void 0,function*(i,o={public:!1}){try{return{data:yield Zt(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(He(l))return{data:null,error:l};throw l}})}updateBucket(e,i){return te(this,void 0,void 0,function*(){try{return{data:yield Rc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(He(o))return{data:null,error:o};throw o}})}emptyBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Kc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(e){const i={};return e&&("limit"in e&&(i.limit=String(e.limit)),"offset"in e&&(i.offset=String(e.offset)),e.search&&(i.search=e.search),e.sortColumn&&(i.sortColumn=e.sortColumn),e.sortOrder&&(i.sortOrder=e.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}class pR{constructor(e,i={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yv),i),this.fetch=Yc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}listBuckets(e){return te(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&i.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&i.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&i.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&i.set("sortOrder",e.sortOrder),e!=null&&e.search&&i.set("search",e.search);const o=i.toString(),l=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield Oo(this.fetch,l,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Kc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(He(i))return{data:null,error:i};throw i}})}}const Qc={"X-Client-Info":`storage-js/${gv}`,"Content-Type":"application/json"};class vv extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function kt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class ic extends vv{constructor(e,i,o){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mR extends vv{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var $g;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})($g||($g={}));const Xc=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),gR=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Yg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),yR=(n,e,i)=>te(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(i!=null&&i.noResolveJson)){const l=n.status||500,a=n;if(typeof a.json=="function")a.json().then(c=>{const h=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||l+"";e(new ic(Yg(c),l,h))}).catch(()=>{const c=l+"",h=a.statusText||`HTTP ${l} error`;e(new ic(h,l,c))});else{const c=l+"",h=a.statusText||`HTTP ${l} error`;e(new ic(h,l,c))}}else e(new mR(Yg(n),n))}),vR=(n,e,i,o)=>{const l={method:n,headers:(e==null?void 0:e.headers)||{}};return o?(gR(o)?(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),l.body=JSON.stringify(o)):l.body=o,Object.assign(Object.assign({},l),i)):l};function _R(n,e,i,o,l,a){return te(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,vR(e,o,l,a)).then(g=>{if(!g.ok)throw g;if(o!=null&&o.noResolveJson)return g;const m=g.headers.get("content-type");return!m||!m.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>yR(g,h,o))})})}function Ot(n,e,i,o,l){return te(this,void 0,void 0,function*(){return _R(n,"POST",e,o,l,i)})}class TR{constructor(e,i={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qc),i),this.fetch=Xc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return te(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}getIndex(e,i){return te(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}listIndexes(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return te(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}}class SR{constructor(e,i={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qc),i),this.fetch=Xc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return te(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ot(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}getVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}listVectors(e){return te(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ot(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}queryVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}deleteVectors(e){return te(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ot(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}}class ER{constructor(e,i={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qc),i),this.fetch=Xc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}listBuckets(){return te(this,arguments,void 0,function*(e={}){try{return{data:yield Ot(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield Ot(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kt(i))return{data:null,error:i};throw i}})}}class AR extends ER{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new wR(this.url,this.headers,e,this.fetch)}}class wR extends TR{constructor(e,i,o,l){super(e,i,l),this.vectorBucketName=o}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return te(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return te(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return te(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return te(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new CR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class CR extends SR{constructor(e,i,o,l,a){super(e,i,a),this.vectorBucketName=o,this.indexName=l}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return te(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return te(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return te(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return te(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return te(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class bR extends hR{constructor(e,i={},o,l){super(e,i,o,l)}from(e){return new fR(this.url,this.headers,e,this.fetch)}get vectors(){return new AR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pR(this.url+"/iceberg",this.headers,this.fetch)}}const RR="2.84.0";let xo="";typeof Deno<"u"?xo="deno":typeof document<"u"?xo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xo="react-native":xo="node";const NR={"X-Client-Info":`supabase-js-${xo}/${RR}`},MR={headers:NR},IR={schema:"public"},xR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DR={},UR=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),kR=()=>Headers,OR=(n,e,i)=>{const o=UR(i),l=kR();return async(a,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:n;let m=new l(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),o(a,Object.assign(Object.assign({},c),{headers:m}))}};function PR(n){return n.endsWith("/")?n:n+"/"}function LR(n,e){var i,o;const{db:l,auth:a,realtime:c,global:h}=n,{db:g,auth:m,realtime:v,global:_}=e,S={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},v),c),storage:{},global:Object.assign(Object.assign(Object.assign({},_),h),{headers:Object.assign(Object.assign({},(i=_==null?void 0:_.headers)!==null&&i!==void 0?i:{}),(o=h==null?void 0:h.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return n.accessToken?S.accessToken=n.accessToken:delete S.accessToken,S}function qR(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(PR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _v="2.84.0",Ts=30*1e3,Nc=3,sc=Nc*Ts,BR="http://localhost:9999",GR="supabase.auth.token",HR={"X-Client-Info":`gotrue-js/${_v}`},Mc="X-Supabase-Api-Version",Tv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zR=600*1e3;class Po extends Error{constructor(e,i,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class FR extends Po{constructor(e,i,o){super(e,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function JR(n){return ne(n)&&n.name==="AuthApiError"}class Ri extends Po{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class ni extends Po{constructor(e,i,o,l){super(e,o,l),this.name=i,this.status=o}}class Ut extends ni{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $R(n){return ne(n)&&n.name==="AuthSessionMissingError"}class ms extends ni{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cl extends ni{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dl extends ni{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YR(n){return ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class Kg extends ni{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ic extends ni{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function oc(n){return ne(n)&&n.name==="AuthRetryableFetchError"}class Qg extends ni{constructor(e,i,o){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class xc extends ni{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xg=` 	
\r=`.split(""),KR=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Xg.length;e+=1)n[Xg[e].charCodeAt(0)]=-2;for(let e=0;e<Tl.length;e+=1)n[Tl[e].charCodeAt(0)]=e;return n})();function Zg(n,e,i){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(Tl[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(Tl[o]),e.queuedBits-=6}}function Sv(n,e,i){const o=KR[n];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Wg(n){const e=[],i=c=>{e.push(String.fromCodePoint(c))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},a=c=>{ZR(c,o,i)};for(let c=0;c<n.length;c+=1)Sv(n.charCodeAt(c),l,a);return e.join("")}function QR(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function XR(n,e){for(let i=0;i<n.length;i+=1){let o=n.charCodeAt(i);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(n.charCodeAt(i+1)-56320&65535|l)+65536,i+=1}QR(o,e)}}function ZR(n,e,i){if(e.utf8seq===0){if(n<=127){i(n);return}for(let o=1;o<6;o+=1)if((n>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function bs(n){const e=[],i={queue:0,queuedBits:0},o=l=>{e.push(l)};for(let l=0;l<n.length;l+=1)Sv(n.charCodeAt(l),i,o);return new Uint8Array(e)}function WR(n){const e=[];return XR(n,i=>e.push(i)),new Uint8Array(e)}function Ni(n){const e=[],i={queue:0,queuedBits:0},o=l=>{e.push(l)};return n.forEach(l=>Zg(l,i,o)),Zg(null,i,o),e.join("")}function jR(n){return Math.round(Date.now()/1e3)+n}function eN(){return Symbol("auth-callback")}const at=()=>typeof window<"u"&&typeof document<"u",Ei={tested:!1,writable:!1},Ev=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ei.tested)return Ei.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ei.tested=!0,Ei.writable=!0}catch{Ei.tested=!0,Ei.writable=!1}return Ei.writable};function tN(n){const e={},i=new URL(n);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((l,a)=>{e[a]=l})}catch{}return i.searchParams.forEach((o,l)=>{e[l]=o}),e}const Av=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),nN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ss=async(n,e,i)=>{await n.setItem(e,JSON.stringify(i))},Ai=async(n,e)=>{const i=await n.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Wn=async(n,e)=>{await n.removeItem(e)};class Nl{constructor(){this.promise=new Nl.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Nl.promiseConstructor=Promise;function rc(n){const e=n.split(".");if(e.length!==3)throw new xc("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!VR.test(e[o]))throw new xc("JWT not in base64url format");return{header:JSON.parse(Wg(e[0])),payload:JSON.parse(Wg(e[1])),signature:bs(e[2]),raw:{header:e[0],payload:e[1]}}}async function iN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function sN(n,e){return new Promise((o,l)=>{(async()=>{for(let a=0;a<1/0;a++)try{const c=await n(a);if(!e(a,null,c)){o(c);return}}catch(c){if(!e(a,c)){l(c);return}}})()})}function oN(n){return("0"+n.toString(16)).substr(-2)}function rN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let l="";for(let a=0;a<56;a++)l+=i.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(e),Array.from(e,oN).join("")}async function lN(n){const i=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",i),l=new Uint8Array(o);return Array.from(l).map(a=>String.fromCharCode(a)).join("")}async function aN(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const i=await lN(n);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gs(n,e,i=!1){const o=rN();let l=o;i&&(l+="/PASSWORD_RECOVERY"),await Ss(n,`${e}-code-verifier`,l);const a=await aN(o);return[a,o===a?"plain":"s256"]}const uN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cN(n){const e=n.headers.get(Mc);if(!e||!e.match(uN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dN(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function fN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ys(n){if(!hN.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lc(){const n={};return new Proxy(n,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pN(n,e){return new Proxy(n,{get:(i,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const a=o.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,l)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,o,l)}})}function jg(n){return JSON.parse(JSON.stringify(n))}const wi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),mN=[502,503,504];async function ey(n){var e;if(!nN(n))throw new Ic(wi(n),0);if(mN.includes(n.status))throw new Ic(wi(n),n.status);let i;try{i=await n.json()}catch(a){throw new Ri(wi(a),a)}let o;const l=cN(n);if(l&&l.getTime()>=Tv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new Qg(wi(i),n.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Ut}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0))throw new Qg(wi(i),n.status,i.weak_password.reasons);throw new FR(wi(i),n.status||500,o)}const gN=(n,e,i,o)=>{const l={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),i))};async function le(n,e,i,o){var l;const a=Object.assign({},o==null?void 0:o.headers);a[Mc]||(a[Mc]=Tv["2024-01-01"].name),o!=null&&o.jwt&&(a.Authorization=`Bearer ${o.jwt}`);const c=(l=o==null?void 0:o.query)!==null&&l!==void 0?l:{};o!=null&&o.redirectTo&&(c.redirect_to=o.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await yN(n,e,i+h,{headers:a,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function yN(n,e,i,o,l,a){const c=gN(e,o,l,a);let h;try{h=await n(i,Object.assign({},c))}catch(g){throw console.error(g),new Ic(wi(g),0)}if(h.ok||await ey(h),o!=null&&o.noResolveJson)return h;try{return await h.json()}catch(g){await ey(g)}}function Xt(n){var e;let i=null;TN(n)&&(i=Object.assign({},n),n.expires_at||(i.expires_at=jR(n.expires_in)));const o=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:i,user:o},error:null}}function ty(n){const e=Xt(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(e.data.weak_password=n.weak_password),e}function jn(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function vN(n){return{data:n,error:null}}function _N(n){const{action_link:e,email_otp:i,hashed_token:o,redirect_to:l,verification_type:a}=n,c=xs(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:o,redirect_to:l,verification_type:a},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function ny(n){return n}function TN(n){return n.access_token&&n.refresh_token&&n.expires_in}const ac=["global","local","others"];class SN{constructor({url:e="",headers:i={},fetch:o}){this.url=e,this.headers=i,this.fetch=Av(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=ac[0]){if(ac.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ac.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ne(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,i={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:jn})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:i}=e,o=xs(e,["options"]),l=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(l.new_email=o==null?void 0:o.newEmail,delete l.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:_N,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(ne(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:jn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,o,l,a,c,h,g;try{const m={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(a=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&a!==void 0?a:""},xform:ny});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(C=>{const b=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(C.split(";")[1].split("=")[1]);m[`${M}Page`]=b}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(ne(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){ys(e);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:jn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){ys(e);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:jn})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,i=!1){ys(e);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:jn})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){ys(e.userId);try{const{data:i,error:o}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:i,error:o}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _deleteFactor(e){ys(e.userId),ys(e.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,o,l,a,c,h,g;try{const m={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(a=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&a!==void 0?a:""},xform:ny});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(C=>{const b=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(C.split(";")[1].split("=")[1]);m[`${M}Page`]=b}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(ne(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ne(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}}function iy(n={}){return{getItem:e=>n[e]||null,setItem:(e,i)=>{n[e]=i},removeItem:e=>{delete n[e]}}}const vs={debug:!!(globalThis&&Ev()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class EN extends wv{}async function AN(n,e,i){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,l.name);try{return await i()}finally{vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,l.name)}}else{if(e===0)throw vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new EN(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(vs.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function wN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Cv(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function CN(n){return parseInt(n,16)}function bN(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function RN(n){var e;const{chainId:i,domain:o,expirationTime:l,issuedAt:a=new Date,nonce:c,notBefore:h,requestId:g,resources:m,scheme:v,uri:_,version:S}=n;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const A=Cv(n.address),C=v?`${v}://${o}`:o,b=n.statement?`${n.statement}
`:"",M=`${C} wants you to sign in with your Ethereum account:
${A}

${b}`;let P=`URI: ${_}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${a.toISOString()}`;if(l&&(P+=`
Expiration Time: ${l.toISOString()}`),h&&(P+=`
Not Before: ${h.toISOString()}`),g&&(P+=`
Request ID: ${g}`),m){let O=`
Resources:`;for(const x of m){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);O+=`
- ${x}`}P+=O}return`${M}
${P}`}class Ze extends Error{constructor({message:e,code:i,cause:o,name:l}){var a;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(a=l??(o instanceof Error?o.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=i}}class Sl extends Ze{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function NN({error:n,options:e}){var i,o,l;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new Ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((l=a.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ze({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new Ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(bv(c)){if(a.rp.id!==c)return new Ze({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function MN({error:n,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ze({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(bv(o)){if(i.rpId!==o)return new Ze({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class IN{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const xN=new IN;function DN(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:i,excludeCredentials:o}=n,l=xs(n,["challenge","user","excludeCredentials"]),a=bs(e).buffer,c=Object.assign(Object.assign({},i),{id:bs(i.id).buffer}),h=Object.assign(Object.assign({},l),{challenge:a,user:c});if(o&&o.length>0){h.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const m=o[g];h.excludeCredentials[g]=Object.assign(Object.assign({},m),{id:bs(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function UN(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:i}=n,o=xs(n,["challenge","allowCredentials"]),l=bs(e).buffer,a=Object.assign(Object.assign({},o),{challenge:l});if(i&&i.length>0){a.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];a.allowCredentials[c]=Object.assign(Object.assign({},h),{id:bs(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return a}function kN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n;return{id:n.id,rawId:n.id,response:{attestationObject:Ni(new Uint8Array(n.response.attestationObject)),clientDataJSON:Ni(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ON(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n,o=n.getClientExtensionResults(),l=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Ni(new Uint8Array(l.authenticatorData)),clientDataJSON:Ni(new Uint8Array(l.clientDataJSON)),signature:Ni(new Uint8Array(l.signature)),userHandle:l.userHandle?Ni(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function bv(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function sy(){var n,e;return!!(at()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function PN(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Sl("Browser returned unexpected credential type",e)}:{data:null,error:new Sl("Empty credential response",e)}}catch(e){return{data:null,error:NN({error:e,options:n})}}}async function LN(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Sl("Browser returned unexpected credential type",e)}:{data:null,error:new Sl("Empty credential response",e)}}catch(e){return{data:null,error:MN({error:e,options:n})}}}const qN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},BN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function El(...n){const e=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),i=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of n)if(l)for(const a in l){const c=l[a];if(c!==void 0)if(Array.isArray(c))o[a]=c;else if(i(c))o[a]=c;else if(e(c)){const h=o[a];e(h)?o[a]=El(h,c):o[a]=El(c)}else o[a]=c}return o}function GN(n,e){return El(qN,n,e||{})}function HN(n,e){return El(BN,n,e||{})}class VN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:o,signal:l},a){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const g=l??xN.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${o}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=GN(c.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:v,error:_}=await PN({publicKey:m,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const m=HN(c.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:v,error:_}=await LN(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ri("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},a){if(!i)return{data:null,error:new Po("rpId is required for WebAuthn authentication")};try{if(!sy())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:o},signal:l},{request:a});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:o,credential_response:g.credential_response}})}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ri("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},a){if(!i)return{data:null,error:new Po("rpId is required for WebAuthn registration")};try{if(!sy())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:l},{create:a});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:m}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ri("Unexpected error in register",c)}}}}wN();const zN={url:BR,storageKey:GR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:HR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function oy(n,e,i){return await i()}const _s={};class Lo{get jwks(){var e,i;return(i=(e=_s[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=_s[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{cachedAt:e})}constructor(e){var i,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},zN),e);if(this.storageKey=a.storageKey,this.instanceID=(i=Lo.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Lo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&at()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new SN({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Av(a.fetch),this.lock=a.lock||oy,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:at()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=AN:this.lock=oy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new VN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Ev()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=iy(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=iy(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_v}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},o="none";if(at()&&(i=tN(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),at()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:a}=await this._getSessionFromURL(i,o);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),YR(a)){const g=(e=a.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:c,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ne(i)?this._returnResult({error:i}):this._returnResult({error:new Ri("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,o,l;try{const a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.captchaToken}},xform:Xt}),{data:c,error:h}=a;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(a){if(ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var i,o,l;try{let a;if("email"in e){const{email:v,password:_,options:S}=e;let A=null,C=null;this.flowType==="pkce"&&([A,C]=await gs(this.storage,this.storageKey)),a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:A,code_challenge_method:C},xform:Xt})}else if("phone"in e){const{phone:v,password:_,options:S}=e;a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(o=S==null?void 0:S.data)!==null&&o!==void 0?o:{},channel:(l=S==null?void 0:S.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:Xt})}else throw new cl("You must provide either an email or phone number and a password");const{data:c,error:h}=a;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(a){if(ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let i;if("email"in e){const{email:a,password:c,options:h}=e;i=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ty})}else if("phone"in e){const{phone:a,password:c,options:h}=e;i=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ty})}else throw new cl("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const a=new ms;return this._returnResult({data:{user:null,session:null},error:a})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,o,l,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,o,l,a,c,h,g,m,v,_,S;let A,C;if("message"in e)A=e.message,C=e.signature;else{const{chain:b,wallet:M,statement:P,options:O}=e;let x;if(at())if(typeof M=="object")x=M;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")x=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=M}const z=new URL((i=O==null?void 0:O.url)!==null&&i!==void 0?i:window.location.href),Y=await x.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=Cv(Y[0]);let J=(o=O==null?void 0:O.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!J){const Z=await x.request({method:"eth_chainId"});J=CN(Z)}const re={domain:z.host,address:$,statement:P,uri:z.href,version:"1",chainId:J,nonce:(l=O==null?void 0:O.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(c=(a=O==null?void 0:O.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=O==null?void 0:O.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=O==null?void 0:O.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(m=O==null?void 0:O.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=O==null?void 0:O.signInWithEthereum)===null||v===void 0?void 0:v.resources};A=RN(re),C=await x.request({method:"personal_sign",params:[bN(A),$]})}try{const{data:b,error:M}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:C},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Xt});if(M)throw M;if(!b||!b.session||!b.user){const P=new ms;return this._returnResult({data:{user:null,session:null},error:P})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:M})}catch(b){if(ne(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var i,o,l,a,c,h,g,m,v,_,S,A;let C,b;if("message"in e)C=e.message,b=e.signature;else{const{chain:M,wallet:P,statement:O,options:x}=e;let z;if(at())if(typeof P=="object")z=P;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))z=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=P}const Y=new URL((i=x==null?void 0:x.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in z&&z.signIn){const $=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),O?{statement:O}:null));let J;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")J=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)J=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)C=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),b=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${Y.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(l=(o=x==null?void 0:x.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((h=x==null?void 0:x.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((g=x==null?void 0:x.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((m=x==null?void 0:x.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((_=(v=x==null?void 0:x.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...x.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const $=await z.signMessage(new TextEncoder().encode(C),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=$}}try{const{data:M,error:P}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Ni(b)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Xt});if(P)throw P;if(!M||!M.session||!M.user){const O=new ms;return this._returnResult({data:{user:null,session:null},error:O})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:P})}catch(M){if(ne(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(e){const i=await Ai(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(i??"").split("/");try{const{data:a,error:c}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:Xt});if(await Wn(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!a||!a.session||!a.user){const h=new ms;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:l??null}),error:c})}catch(a){if(ne(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:i,provider:o,token:l,access_token:a,nonce:c}=e,h=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Xt}),{data:g,error:m}=h;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g||!g.session||!g.user){const v=new ms;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:m})}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,o,l,a,c;try{if("email"in e){const{email:h,options:g}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await gs(this.storage,this.storageKey));const{error:_}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:g}=e,{data:m,error:v}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=g==null?void 0:g.data)!==null&&l!==void 0?l:{},create_user:(a=g==null?void 0:g.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v})}throw new cl("You must provide either an email or phone number.")}catch(h){if(ne(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,o;try{let l,a;"options"in e&&(l=(i=e.options)===null||i===void 0?void 0:i.redirectTo,a=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:c,error:h}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:l,xform:Xt});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,m=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(l){if(ne(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(e){var i,o,l,a,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await gs(this.storage,this.storageKey));const m=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=e==null?void 0:e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:vN});return!((a=m.data)===null||a===void 0)&&a.url&&at()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(h){if(ne(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;if(o)throw o;if(!i)throw new Ut;const{error:l}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(e){if(ne(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:o,type:l,options:a}=e,{error:c}=await le(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:o,type:l,options:a}=e,{data:c,error:h}=await le(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new cl("You must provide either an email or phone number and a type")}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<sc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const c=await Ai(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=lc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=pN(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:l,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:jn}):await this._useSession(async i=>{var o,l,a;const{data:c,error:h}=i;if(h)throw h;return!(!((o=c.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ut}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&a!==void 0?a:void 0,xform:jn})})}catch(i){if(ne(i))return $R(i)&&(await this._removeSession(),await Wn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async o=>{const{data:l,error:a}=o;if(a)throw a;if(!l.session)throw new Ut;const c=l.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await gs(this.storage,this.storageKey));const{data:m,error:v}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:jn});if(v)throw v;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(o){if(ne(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ut;const i=Date.now()/1e3;let o=i,l=!0,a=null;const{payload:c}=rc(e.access_token);if(c.exp&&(o=c.exp,l=o<=i),l){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(i){if(ne(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var o;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(o=c.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new Ut;const{data:l,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!at())throw new dl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Kg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dl("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kg("No code detected.");const{data:O,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:a,refresh_token:c,expires_in:h,expires_at:g,token_type:m}=e;if(!a||!h||!c||!m)throw new dl("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(h);let S=v+_;g&&(S=parseInt(g));const A=S-v;A*1e3<=Ts&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${_}s`);const C=S-_;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,S,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,S,v);const{data:b,error:M}=await this._getUser(a);if(M)throw M;const P={provider_token:o,provider_refresh_token:l,access_token:a,expires_in:_,expires_at:S,refresh_token:c,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:e.type},error:null})}catch(o){if(ne(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Ai(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:l,error:a}=i;if(a)return this._returnResult({error:a});const c=(o=l.session)===null||o===void 0?void 0:o.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(JR(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await Wn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=eN(),o={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async i=>{var o,l;try{const{data:{session:a},error:c}=i;if(c)throw c;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,i={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await gs(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(a){if(ne(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:o,error:l}=await this._useSession(async a=>{var c,h,g,m,v;const{data:_,error:S}=a;if(S)throw S;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",A,{headers:this.headers,jwt:(v=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return at()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:e.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(ne(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var o;try{const{error:l,data:{session:a}}=i;if(l)throw l;const{options:c,provider:h,token:g,access_token:m,nonce:v}=e,_=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=a==null?void 0:a.access_token)!==null&&o!==void 0?o:void 0,body:{provider:h,id_token:g,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Xt}),{data:S,error:A}=_;return A?this._returnResult({data:{user:null,session:null},error:A}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new ms}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:A}))}catch(l){if(ne(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var o,l;const{data:a,error:c}=i;if(c)throw c;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await sN(async l=>(l>0&&await iN(200*Math.pow(2,l-1)),this._debug(i,"refreshing attempt",l),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xt})),(l,a)=>{const c=200*Math.pow(2,l);return a&&oc(a)&&Date.now()+c-o<Ts})}catch(o){if(this._debug(i,"error",o),ne(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",o),at()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Ai(this.storage,this.storageKey);if(l&&this.userStorage){let c=await Ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:l.user},await Ss(this.userStorage,this.storageKey+"-user",c)),l.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:lc()}else if(l&&!l.user&&!l.user){const c=await Ai(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(l.user=c.user,await Wn(this.storage,this.storageKey+"-user"),await Ss(this.storage,this.storageKey,l)):l.user=lc()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const a=((i=l.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<sc;if(this._debug(o,`session has${a?"":" not"} expired with margin of ${sc}s`),a){if(this.autoRefreshToken&&l.refresh_token){const{error:c}=await this._callRefreshToken(l.refresh_token);c&&(console.error(c),oc(c)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(l.access_token);!h&&(c!=null&&c.user)?(l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(o,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var i,o;if(!e)throw new Ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Nl;const{data:a,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!a.session)throw new Ut;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={data:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(l,"error",a),ne(a)){const c={data:null,error:a};return oc(a)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(a),a}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,i,o=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:i});const a=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){a.push(g)}});if(await Promise.all(c),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await Ss(this.userStorage,this.storageKey+"-user",{user:i.user});const l=Object.assign({},i);delete l.user;const a=jg(l);await Ss(this.storage,this.storageKey,a)}else{const l=jg(i);await Ss(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await Wn(this.storage,this.storageKey),await Wn(this.storage,this.storageKey+"-code-verifier"),await Wn(this.storage,this.storageKey+"-user"),this.userStorage&&await Wn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&at()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ts);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-e)/Ts);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Ts}ms, refresh threshold is ${Nc} ticks`),l<=Nc&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,o){const l=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[a,c]=await gs(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});l.push(h.toString())}if(o!=null&&o.queryParams){const a=new URLSearchParams(o.queryParams);l.push(a.toString())}return o!=null&&o.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var o;const{data:l,error:a}=i;return a?this._returnResult({data:null,error:a}):await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var o,l;const{data:a,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:m}=await le(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&g.type==="totp"&&(!((l=g==null?void 0:g.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:l,error:a}=i;if(a)return this._returnResult({data:null,error:a});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?kN(e.webauthn.credential_response):ON(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:l,error:a}=i;if(a)return this._returnResult({data:null,error:a});const c=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:DN(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:UN(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])l.all.push(a),a.status==="verified"&&l[a.factor_type].push(a);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=rc(o.access_token);let c=null;a.aal&&(c=a.aal);let h=c;((i=(e=o.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const m=a.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;return l?this._returnResult({data:null,error:l}):o?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ut})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:l},error:a}=o;if(a)return this._returnResult({data:null,error:a});if(!l)return this._returnResult({data:null,error:new Ut});const c=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&at()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(ne(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:l},error:a}=o;if(a)return this._returnResult({data:null,error:a});if(!l)return this._returnResult({data:null,error:new Ut});const c=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&at()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(ne(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;return o?this._returnResult({data:null,error:o}):i?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ut})})}catch(e){if(ne(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;return l?this._returnResult({data:null,error:l}):o?await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Ut})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let o=i.keys.find(h=>h.kid===e);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(h=>h.kid===e),o&&this.jwks_cached_at+zR>l)return o;const{data:a,error:c}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=l,o=a.keys.find(h=>h.kid===e),!o)?null:o}async getClaims(e,i={}){try{let o=e;if(!o){const{data:A,error:C}=await this.getSession();if(C||!A.session)return this._returnResult({data:null,error:C});o=A.session.access_token}const{header:l,payload:a,signature:c,raw:{header:h,payload:g}}=rc(o);i!=null&&i.allowExpired||dN(a.exp);const m=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!m){const{error:A}=await this.getUser(o);if(A)throw A;return{data:{claims:a,header:l,signature:c},error:null}}const v=fN(l.alg),_=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,WR(`${h}.${g}`)))throw new xc("Invalid JWT signature");return{data:{claims:a,header:l,signature:c},error:null}}catch(o){if(ne(o))return this._returnResult({data:null,error:o});throw o}}}Lo.nextInstanceID={};const FN=Lo;class JN extends FN{constructor(e){super(e)}}class $N{constructor(e,i,o){var l,a,c;this.supabaseUrl=e,this.supabaseKey=i;const h=qR(e);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const g=`sb-${h.hostname.split(".")[0]}-auth-token`,m={db:IR,realtime:DR,auth:Object.assign(Object.assign({},xR),{storageKey:g}),global:MR},v=LR(o??{},m);this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(a=v.global.headers)!==null&&a!==void 0?a:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(_,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=v.auth)!==null&&c!==void 0?c:{},this.headers,v.global.fetch),this.fetch=OR(i,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new Bb(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new bR(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Ob(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,i,o)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,i;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(i=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:o,storage:l,userStorage:a,storageKey:c,flowType:h,lock:g,debug:m,throwOnError:v},_,S){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new JN({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),_),storageKey:c,autoRefreshToken:e,persistSession:i,detectSessionInUrl:o,storage:l,userStorage:a,flowType:h,lock:g,debug:m,throwOnError:v,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(e,i,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YN=(n,e,i)=>new $N(n,e,i);function KN(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}KN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const QN="https://mzdclssjndpdhckmknve.supabase.co",XN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16ZGNsc3NqbmRwZGhja21rbnZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2MTg3MTIsImV4cCI6MjA3OTE5NDcxMn0.H8FZH9dDJhs14JcbTl-clpPuppAPuaN7Bh16tZ8xvGE",ut=YN(QN,XN),ZN=({onAuthenticated:n})=>{const[e,i]=Pe.useState("signup"),[o,l]=Pe.useState(""),[a,c]=Pe.useState(""),[h,g]=Pe.useState(""),[m,v]=Pe.useState(!1),[_,S]=Pe.useState(null),A=async C=>{C.preventDefault(),S(null),v(!0);try{if(e==="signup"){const{data:b,error:M}=await ut.auth.signUp({email:a,password:h,options:{data:{full_name:o}}});if(M)throw M;b.user&&await ut.from("profiles").upsert({id:b.user.id,full_name:o,role:"user"})}else{const{error:b}=await ut.auth.signInWithPassword({email:a,password:h});if(b)throw b}n()}catch(b){S(b.message||"Authentication failed")}finally{v(!1)}};return B.jsxs("div",{className:"min-h-screen bg-brand-dark flex flex-col items-center justify-center text-white p-4",children:[B.jsx("div",{className:"w-full max-w-[541px] px-4 mb-8",children:B.jsx("img",{src:"https://boboz.co.ke/wp-content/uploads/2025/11/amicus_1_logo.png",alt:"Amicus Pro Logo",className:"w-full h-auto"})}),B.jsxs("div",{className:"w-full max-w-4xl bg-brand-med-dark rounded-lg shadow-2xl border border-brand-border flex flex-col md:flex-row overflow-hidden",children:[B.jsxs("div",{className:"w-full md:w-1/2 p-8 bg-brand-med flex flex-col justify-center",children:[B.jsx("h1",{className:"font-extrabold text-2xl md:text-3xl leading-tight text-brand-accent mb-4",children:"Get Simple, Straight Answers to Complex Legal Challenges"}),B.jsx("p",{className:"text-md text-gray-200 mb-4",children:"Hello! I'm Matt, an AI guru with a strong legal research background."}),B.jsx("p",{className:"text-gray-300 text-sm",children:"I'll search and compile insightful legal info on ANY QUESTION, sourcing my answers from Kenyan Case Law, Acts of Parliament and Published articles."})]}),B.jsxs("div",{className:"w-full md:w-1/2 p-8",children:[B.jsx("h2",{className:"text-2xl font-bold text-center text-gray-200 mb-6",children:e==="signup"?"Create Account":"Sign In"}),B.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e==="signup"&&B.jsxs("div",{children:[B.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-400",children:"Full Name"}),B.jsx("input",{id:"name",type:"text",value:o,onChange:C=>l(C.target.value),className:"mt-1 block w-full bg-brand-med border border-brand-border rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-pink-500 focus:border-pink-500",required:!0,autoComplete:"name"})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email Address"}),B.jsx("input",{id:"email",type:"email",value:a,onChange:C=>c(C.target.value),className:"mt-1 block w-full bg-brand-med border border-brand-border rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-pink-500 focus:border-pink-500",required:!0,autoComplete:"email"})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400",children:"Password"}),B.jsx("input",{id:"password",type:"password",value:h,onChange:C=>g(C.target.value),className:"mt-1 block w-full bg-brand-med border border-brand-border rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-pink-500 focus:border-pink-500",required:!0,autoComplete:e==="signup"?"new-password":"current-password"})]}),_&&B.jsx("div",{className:"text-red-400 text-sm",children:_}),B.jsx("div",{children:B.jsx("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 rounded-md text-sm font-medium text-white bg-pink-600 hover:bg-pink-700 disabled:opacity-50",children:m?"Please wait...":e==="signup"?"Sign Up & Start Chatting":"Sign In"})})]}),B.jsx("div",{className:"mt-4 text-center text-xs text-gray-400",children:e==="signup"?B.jsx("button",{onClick:()=>i("signin"),className:"text-pink-400 hover:underline",children:"Already have an account? Sign in"}):B.jsx("button",{onClick:()=>i("signup"),className:"text-pink-400 hover:underline",children:"Need an account? Sign up"})})]})]})]})},WN=({onLogout:n})=>{const[e,i]=Pe.useState({}),[o,l]=Pe.useState({totalUsers:0,totalMessages:0,userMessages:0,modelMessages:0}),[a,c]=Pe.useState(!0);Pe.useEffect(()=>{(async()=>{c(!0);const{count:m}=await ut.from("profiles").select("*",{count:"exact",head:!0}),{count:v}=await ut.from("messages").select("*",{count:"exact",head:!0}),{count:_}=await ut.from("messages").select("*",{count:"exact",head:!0}).eq("role","user"),{count:S}=await ut.from("messages").select("*",{count:"exact",head:!0}).eq("role","model"),{data:A}=await ut.from("messages").select("id, user_id, role, content, created_at").order("created_at",{ascending:!0}),{data:C}=await ut.from("profiles").select("id"),b={};(C||[]).forEach(P=>{b[P.id]=P.id.substring(0,8)});const M={};(A||[]).forEach(P=>{const O=b[P.user_id]||P.user_id.substring(0,8);M[O]||(M[O]=[]),M[O].push({id:P.id,role:P.role,content:P.content})}),i(M),l({totalUsers:m||0,totalMessages:v||0,userMessages:_||0,modelMessages:S||0}),c(!1)})()},[]);const h=m=>{let v=`<?xml version="1.0" encoding="UTF-8"?>
<allChatHistory>
`;for(const[_,S]of Object.entries(m))v+=`  <userChat id="${_}">
`,S.forEach(A=>{v+=`    <message id="${A.id}" role="${A.role}">
      <content><![CDATA[${A.content}]]></content>
    </message>
`}),v+=`  </userChat>
`;return v+="</allChatHistory>",v},g=()=>{const m=h(e),v=new Blob([m],{type:"application/xml"}),_=URL.createObjectURL(v),S=document.createElement("a");S.href=_,S.download="all_chat_history.xml",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(_)};return B.jsxs("div",{className:"min-h-screen bg-brand-dark text-white",children:[B.jsx("header",{className:"bg-brand-med-dark/50 backdrop-blur-sm p-4 border-b border-brand-border shadow-lg sticky top-0 z-10",children:B.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[B.jsx("h1",{className:"text-xl font-bold",children:"Admin Dashboard"}),B.jsx("button",{onClick:n,className:"bg-red-600 text-white font-semibold rounded-lg px-4 py-2 text-sm",children:"Logout"})]})}),B.jsxs("main",{className:"p-4 md:p-6 max-w-6xl mx-auto",children:[B.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Usage Analytics"}),a?B.jsx("p",{className:"text-gray-400",children:"Loading..."}):B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[B.jsxs("div",{className:"bg-brand-med-dark p-4 rounded-lg border border-brand-border",children:[B.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Users"}),B.jsx("p",{className:"text-3xl font-bold",children:o.totalUsers})]}),B.jsxs("div",{className:"bg-brand-med-dark p-4 rounded-lg border border-brand-border",children:[B.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Messages"}),B.jsx("p",{className:"text-3xl font-bold",children:o.totalMessages})]}),B.jsxs("div",{className:"bg-brand-med-dark p-4 rounded-lg border border-brand-border",children:[B.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"User Queries"}),B.jsx("p",{className:"text-3xl font-bold",children:o.userMessages})]}),B.jsxs("div",{className:"bg-brand-med-dark p-4 rounded-lg border border-brand-border",children:[B.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Model Responses"}),B.jsx("p",{className:"text-3xl font-bold",children:o.modelMessages})]})]}),B.jsxs("div",{className:"flex justify-between items-center mb-4",children:[B.jsx("h2",{className:"text-2xl font-semibold",children:"All User Chat History"}),B.jsx("button",{onClick:g,disabled:Object.keys(e).length===0,className:"bg-pink-600 text-white font-semibold rounded-lg px-5 py-2 disabled:bg-brand-light disabled:cursor-not-allowed",children:"Download All as XML"})]}),B.jsx("div",{className:"bg-brand-med-dark rounded-lg border border-brand-border max-h-[60vh] overflow-y-auto",children:B.jsx("div",{className:"p-4 space-y-6",children:Object.keys(e).length>0?Object.entries(e).map(([m,v])=>B.jsxs("div",{className:"border border-brand-border rounded-lg p-4",children:[B.jsxs("h3",{className:"text-md font-semibold text-amber-300/90 pb-2 mb-3 border-b border-brand-border/50",children:["User ID: ",B.jsx("span",{className:"font-normal text-gray-300",children:m})]}),B.jsx("div",{className:"space-y-3",children:v.map(_=>B.jsxs("div",{className:`p-3 rounded-lg ${_.role===Mi.USER?"bg-purple-800/50":"bg-brand-med/50"}`,children:[B.jsx("p",{className:"text-xs font-bold capitalize text-pink-400 mb-1",children:_.role}),B.jsx("p",{className:"text-sm whitespace-pre-wrap",children:_.content})]},_.id))})]},m)):B.jsx("p",{className:"text-gray-400 text-center py-8",children:"No chat history found."})})})]})]})};async function ry(n,e){const{data:{session:i}}=await ut.auth.getSession();i&&await ut.from("events").insert({user_id:i.user.id,event_type:n,metadata:e||{}})}const Io={id:"welcome-0",role:Mi.MODEL,content:`Get Simple, Straight Answers
to Complex Legal Challenges 

Hello! I'm Matt, an AI guru with a strong legal research background.

I'll search and compile insightful legal info on ANY QUESTION, sourcing my answers from Kenyan Case Law, Acts of parliament and published articles.`},jN=()=>{var M,P;const[n,e]=Pe.useState(null),[i,o]=Pe.useState([Io]),[l,a]=Pe.useState({}),[c,h]=Pe.useState(!1),[g,m]=Pe.useState(null),v=Pe.useRef(null),_=Pe.useRef(null),S=Pe.useCallback(()=>{if(n!=null&&n.full_name)try{const O="AIzaSyCt8tOV93RBJjtcOOAnTMFOnnMmbe7SxNc",z=new wb({apiKey:O}).chats.create({model:"gemini-2.5-flash",config:{systemInstruction:Nb(n.full_name),tools:[{googleSearch:{}}]}});v.current=z}catch(O){m(O.message||"Initialization failed"),console.error(O)}},[n==null?void 0:n.full_name]);Pe.useEffect(()=>{const O=ut.auth.onAuthStateChange(async(x,z)=>{var Y;if(z!=null&&z.user){const{user:$}=z,{data:J}=await ut.from("profiles").select("full_name, role").eq("id",$.id).single(),re={id:$.id,full_name:(J==null?void 0:J.full_name)||((Y=$.email)==null?void 0:Y.split("@")[0])||"User",email:$.email,role:(J==null?void 0:J.role)||"user"};e(re),await A($.id),ry("login")}else e(null),o([Io]),v.current=null});return()=>{O.data.subscription.unsubscribe()}},[]),Pe.useEffect(()=>{n!=null&&n.role&&S()},[n,S]),Pe.useEffect(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[i]);async function A(O){const{data:x,error:z}=await ut.from("messages").select("id, role, content, created_at").eq("user_id",O).order("created_at",{ascending:!0});if(z){console.warn("Load messages error:",z.message),o([Io]);return}!x||x.length===0?o([Io]):o([Io,...x.map(Y=>({id:Y.id,role:Y.role,content:Y.content}))])}const C=async()=>{await ut.auth.signOut()},b=async O=>{var Z,he,Te,fe;if(!v.current||!n){m("Chat not initialized.");return}h(!0),m(null);const x=crypto.randomUUID();o(Se=>[...Se,{id:x,role:Mi.USER,content:O}]);const{error:z}=await ut.from("messages").insert({id:x,user_id:n.id,role:"user",content:O});z&&console.warn("Insert user message failed:",z.message),ry("message_sent",{length:O.length});const Y=crypto.randomUUID();o(Se=>[...Se,{id:Y,role:Mi.MODEL,content:""}]);const $=[],J=new Set;let re="";try{const Se=await v.current.sendMessageStream({message:O});for await(const ct of Se){const et=ct.text||"";re+=et;const q=(Te=(he=(Z=ct.candidates)==null?void 0:Z[0])==null?void 0:he.groundingMetadata)==null?void 0:Te.groundingChunks;if(q){for(const K of q)if((fe=K.web)!=null&&fe.uri&&!J.has(K.web.uri)){const ie={uri:K.web.uri,title:K.web.title||K.web.uri};$.push(ie),J.add(ie.uri)}}o(K=>K.map(ie=>ie.id===Y?{...ie,content:re}:ie))}}catch(Se){re=`Sorry, something went wrong: ${Se.message||"Unknown error"}`,o(et=>et.map(q=>q.id===Y?{...q,content:re}:q)),console.error(Se)}finally{if(h(!1),$.length>0&&a(Se=>({...Se,[Y]:$})),re){const{error:Se}=await ut.from("messages").insert({id:Y,user_id:n.id,role:"model",content:re});Se&&console.warn("Insert model message failed:",Se.message)}}};return n?n.role==="admin"?B.jsx(WN,{onLogout:C}):B.jsxs("div",{className:"flex flex-col h-screen",children:[B.jsx(Cb,{name:n.full_name,userType:n.role,onLogout:C}),B.jsx("main",{ref:_,className:"flex-1 overflow-y-auto p-4 md:p-6 bg-brand-accent",children:B.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.map(O=>B.jsx(Rb,{message:O,sources:l[O.id]},O.id)),c&&((M=i[i.length-1])==null?void 0:M.role)===Mi.MODEL&&((P=i[i.length-1])==null?void 0:P.content)===""&&B.jsxs("div",{className:"flex items-start gap-4 my-4",children:[B.jsx(vc,{}),B.jsx("div",{className:"max-w-xl p-4 rounded-2xl bg-brand-med text-gray-200 rounded-tl-none",children:B.jsxs("div",{className:"flex items-center space-x-2",children:[B.jsx("span",{className:"h-2 w-2 bg-pink-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),B.jsx("span",{className:"h-2 w-2 bg-pink-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),B.jsx("span",{className:"h-2 w-2 bg-pink-400 rounded-full animate-bounce"})]})})]}),g&&B.jsx("div",{className:"text-red-400 bg-red-900/50 p-3 rounded-lg text-center",children:g})]})}),B.jsx(bb,{onSendMessage:b,isLoading:c})]}):B.jsx(ZN,{onAuthenticated:()=>{}})},Rv=document.getElementById("root");if(!Rv)throw new Error("Could not find root element to mount to");const eM=cT.createRoot(Rv);eM.render(B.jsx(nT.StrictMode,{children:B.jsx(jN,{})}));
